!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((t="undefined"!=typeof globalThis?globalThis:t||self).igv_webapp={})}(this,(function(t){"use strict";var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function r(t,e){return t(e={exports:{}},e.exports),e.exports}var n=function(t){return t&&t.Math==Math&&t},i=n("object"==typeof globalThis&&globalThis)||n("object"==typeof window&&window)||n("object"==typeof self&&self)||n("object"==typeof e&&e)||Function("return this")(),a=function(t){try{return!!t()}catch(t){return!0}},o=!a((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]})),s={}.propertyIsEnumerable,l=Object.getOwnPropertyDescriptor,c={f:l&&!s.call({1:2},1)?function(t){var e=l(this,t);return!!e&&e.enumerable}:s},u=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}},f={}.toString,h=function(t){return f.call(t).slice(8,-1)},p="".split,d=a((function(){return!Object("z").propertyIsEnumerable(0)}))?function(t){return"String"==h(t)?p.call(t,""):Object(t)}:Object,g=function(t){if(null==t)throw TypeError("Can't call method on "+t);return t},m=function(t){return d(g(t))},w=function(t){return"object"==typeof t?null!==t:"function"==typeof t},y=function(t,e){if(!w(t))return t;var r,n;if(e&&"function"==typeof(r=t.toString)&&!w(n=r.call(t)))return n;if("function"==typeof(r=t.valueOf)&&!w(n=r.call(t)))return n;if(!e&&"function"==typeof(r=t.toString)&&!w(n=r.call(t)))return n;throw TypeError("Can't convert object to primitive value")},b={}.hasOwnProperty,v=function(t,e){return b.call(t,e)},S=i.document,R=w(S)&&w(S.createElement),E=function(t){return R?S.createElement(t):{}},x=!o&&!a((function(){return 7!=Object.defineProperty(E("div"),"a",{get:function(){return 7}}).a})),C=Object.getOwnPropertyDescriptor,D={f:o?C:function(t,e){if(t=m(t),e=y(e,!0),x)try{return C(t,e)}catch(t){}if(v(t,e))return u(!c.f.call(t,e),t[e])}},k=function(t){if(!w(t))throw TypeError(String(t)+" is not an object");return t},L=Object.defineProperty,T={f:o?L:function(t,e,r){if(k(t),e=y(e,!0),k(r),x)try{return L(t,e,r)}catch(t){}if("get"in r||"set"in r)throw TypeError("Accessors not supported");return"value"in r&&(t[e]=r.value),t}},I=o?function(t,e,r){return T.f(t,e,u(1,r))}:function(t,e,r){return t[e]=r,t},B=function(t,e){try{I(i,t,e)}catch(r){i[t]=e}return e},A="__core-js_shared__",O=i[A]||B(A,{}),_=Function.toString;"function"!=typeof O.inspectSource&&(O.inspectSource=function(t){return _.call(t)});var M,z,F,U=O.inspectSource,H=i.WeakMap,P="function"==typeof H&&/native code/.test(U(H)),N=r((function(t){(t.exports=function(t,e){return O[t]||(O[t]=void 0!==e?e:{})})("versions",[]).push({version:"3.6.5",mode:"global",copyright:"Â© 2020 Denis Pushkarev (zloirock.ru)"})})),j=0,K=Math.random(),G=function(t){return"Symbol("+String(void 0===t?"":t)+")_"+(++j+K).toString(36)},Z=N("keys"),V=function(t){return Z[t]||(Z[t]=G(t))},Y={},q=i.WeakMap;if(P){var W=new q,X=W.get,J=W.has,Q=W.set;M=function(t,e){return Q.call(W,t,e),e},z=function(t){return X.call(W,t)||{}},F=function(t){return J.call(W,t)}}else{var tt=V("state");Y[tt]=!0,M=function(t,e){return I(t,tt,e),e},z=function(t){return v(t,tt)?t[tt]:{}},F=function(t){return v(t,tt)}}var et={set:M,get:z,has:F,enforce:function(t){return F(t)?z(t):M(t,{})},getterFor:function(t){return function(e){var r;if(!w(e)||(r=z(e)).type!==t)throw TypeError("Incompatible receiver, "+t+" required");return r}}},rt=r((function(t){var e=et.get,r=et.enforce,n=String(String).split("String");(t.exports=function(t,e,a,o){var s=!!o&&!!o.unsafe,l=!!o&&!!o.enumerable,c=!!o&&!!o.noTargetGet;"function"==typeof a&&("string"!=typeof e||v(a,"name")||I(a,"name",e),r(a).source=n.join("string"==typeof e?e:"")),t!==i?(s?!c&&t[e]&&(l=!0):delete t[e],l?t[e]=a:I(t,e,a)):l?t[e]=a:B(e,a)})(Function.prototype,"toString",(function(){return"function"==typeof this&&e(this).source||U(this)}))})),nt=i,it=function(t){return"function"==typeof t?t:void 0},at=function(t,e){return arguments.length<2?it(nt[t])||it(i[t]):nt[t]&&nt[t][e]||i[t]&&i[t][e]},ot=Math.ceil,st=Math.floor,lt=function(t){return isNaN(t=+t)?0:(t>0?st:ot)(t)},ct=Math.min,ut=function(t){return t>0?ct(lt(t),9007199254740991):0},ft=Math.max,ht=Math.min,pt=function(t,e){var r=lt(t);return r<0?ft(r+e,0):ht(r,e)},dt=function(t){return function(e,r,n){var i,a=m(e),o=ut(a.length),s=pt(n,o);if(t&&r!=r){for(;o>s;)if((i=a[s++])!=i)return!0}else for(;o>s;s++)if((t||s in a)&&a[s]===r)return t||s||0;return!t&&-1}},gt={includes:dt(!0),indexOf:dt(!1)},mt=gt.indexOf,wt=function(t,e){var r,n=m(t),i=0,a=[];for(r in n)!v(Y,r)&&v(n,r)&&a.push(r);for(;e.length>i;)v(n,r=e[i++])&&(~mt(a,r)||a.push(r));return a},yt=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],bt=yt.concat("length","prototype"),vt={f:Object.getOwnPropertyNames||function(t){return wt(t,bt)}},St={f:Object.getOwnPropertySymbols},Rt=at("Reflect","ownKeys")||function(t){var e=vt.f(k(t)),r=St.f;return r?e.concat(r(t)):e},Et=function(t,e){for(var r=Rt(e),n=T.f,i=D.f,a=0;a<r.length;a++){var o=r[a];v(t,o)||n(t,o,i(e,o))}},xt=/#|\.prototype\./,Ct=function(t,e){var r=kt[Dt(t)];return r==Tt||r!=Lt&&("function"==typeof e?a(e):!!e)},Dt=Ct.normalize=function(t){return String(t).replace(xt,".").toLowerCase()},kt=Ct.data={},Lt=Ct.NATIVE="N",Tt=Ct.POLYFILL="P",It=Ct,Bt=D.f,At=function(t,e){var r,n,a,o,s,l=t.target,c=t.global,u=t.stat;if(r=c?i:u?i[l]||B(l,{}):(i[l]||{}).prototype)for(n in e){if(o=e[n],a=t.noTargetGet?(s=Bt(r,n))&&s.value:r[n],!It(c?n:l+(u?".":"#")+n,t.forced)&&void 0!==a){if(typeof o==typeof a)continue;Et(o,a)}(t.sham||a&&a.sham)&&I(o,"sham",!0),rt(r,n,o,t)}},Ot=function(t){if("function"!=typeof t)throw TypeError(String(t)+" is not a function");return t},_t=function(t,e,r){if(Ot(t),void 0===e)return t;switch(r){case 0:return function(){return t.call(e)};case 1:return function(r){return t.call(e,r)};case 2:return function(r,n){return t.call(e,r,n)};case 3:return function(r,n,i){return t.call(e,r,n,i)}}return function(){return t.apply(e,arguments)}},Mt=function(t){return Object(g(t))},zt=Array.isArray||function(t){return"Array"==h(t)},Ft=!!Object.getOwnPropertySymbols&&!a((function(){return!String(Symbol())})),Ut=Ft&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,Ht=N("wks"),Pt=i.Symbol,Nt=Ut?Pt:Pt&&Pt.withoutSetter||G,$t=function(t){return v(Ht,t)||(Ft&&v(Pt,t)?Ht[t]=Pt[t]:Ht[t]=Nt("Symbol."+t)),Ht[t]},jt=$t("species"),Kt=function(t,e){var r;return zt(t)&&("function"!=typeof(r=t.constructor)||r!==Array&&!zt(r.prototype)?w(r)&&null===(r=r[jt])&&(r=void 0):r=void 0),new(void 0===r?Array:r)(0===e?0:e)},Gt=[].push,Zt=function(t){var e=1==t,r=2==t,n=3==t,i=4==t,a=6==t,o=5==t||a;return function(s,l,c,u){for(var f,h,p=Mt(s),g=d(p),m=_t(l,c,3),w=ut(g.length),y=0,b=u||Kt,v=e?b(s,w):r?b(s,0):void 0;w>y;y++)if((o||y in g)&&(h=m(f=g[y],y,p),t))if(e)v[y]=h;else if(h)switch(t){case 3:return!0;case 5:return f;case 6:return y;case 2:Gt.call(v,f)}else if(i)return!1;return a?-1:n||i?i:v}},Vt={forEach:Zt(0),map:Zt(1),filter:Zt(2),some:Zt(3),every:Zt(4),find:Zt(5),findIndex:Zt(6)},Yt=function(t,e){var r=[][t];return!!r&&a((function(){r.call(null,e||function(){throw 1},1)}))},qt=Object.defineProperty,Wt={},Xt=function(t){throw t},Jt=function(t,e){if(v(Wt,t))return Wt[t];e||(e={});var r=[][t],n=!!v(e,"ACCESSORS")&&e.ACCESSORS,i=v(e,0)?e[0]:Xt,s=v(e,1)?e[1]:void 0;return Wt[t]=!!r&&!a((function(){if(n&&!o)return!0;var t={length:-1};n?qt(t,1,{enumerable:!0,get:Xt}):t[1]=1,r.call(t,i,s)}))},Qt=Vt.forEach,te=Yt("forEach"),ee=Jt("forEach"),re=te&&ee?[].forEach:function(t){return Qt(this,t,arguments.length>1?arguments[1]:void 0)};At({target:"Array",proto:!0,forced:[].forEach!=re},{forEach:re});var ne={};ne[$t("toStringTag")]="z";var ie="[object z]"===String(ne),ae=$t("toStringTag"),oe="Arguments"==h(function(){return arguments}()),se=ie?h:function(t){var e,r,n;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(r=function(t,e){try{return t[e]}catch(t){}}(e=Object(t),ae))?r:oe?h(e):"Object"==(n=h(e))&&"function"==typeof e.callee?"Arguments":n},le=ie?{}.toString:function(){return"[object "+se(this)+"]"};ie||rt(Object.prototype,"toString",le,{unsafe:!0});var ce=i.Promise,ue=function(t,e,r){for(var n in e)rt(t,n,e[n],r);return t},fe=T.f,he=$t("toStringTag"),pe=function(t,e,r){t&&!v(t=r?t:t.prototype,he)&&fe(t,he,{configurable:!0,value:e})},de=$t("species"),ge=function(t){var e=at(t),r=T.f;o&&e&&!e[de]&&r(e,de,{configurable:!0,get:function(){return this}})},me=function(t,e,r){if(!(t instanceof e))throw TypeError("Incorrect "+(r?r+" ":"")+"invocation");return t},we={},ye=$t("iterator"),be=Array.prototype,ve=$t("iterator"),Se=function(t,e,r,n){try{return n?e(k(r)[0],r[1]):e(r)}catch(e){var i=t.return;throw void 0!==i&&k(i.call(t)),e}},Re=r((function(t){var e=function(t,e){this.stopped=t,this.result=e};(t.exports=function(t,r,n,i,a){var o,s,l,c,u,f,h,p,d=_t(r,n,i?2:1);if(a)o=t;else{if("function"!=typeof(s=function(t){if(null!=t)return t[ve]||t["@@iterator"]||we[se(t)]}(t)))throw TypeError("Target is not iterable");if(void 0!==(p=s)&&(we.Array===p||be[ye]===p)){for(l=0,c=ut(t.length);c>l;l++)if((u=i?d(k(h=t[l])[0],h[1]):d(t[l]))&&u instanceof e)return u;return new e(!1)}o=s.call(t)}for(f=o.next;!(h=f.call(o)).done;)if("object"==typeof(u=Se(o,d,h.value,i))&&u&&u instanceof e)return u;return new e(!1)}).stop=function(t){return new e(!0,t)}})),Ee=$t("iterator"),xe=!1;try{var Ce=0,De={next:function(){return{done:!!Ce++}},return:function(){xe=!0}};De[Ee]=function(){return this},Array.from(De,(function(){throw 2}))}catch(t){}var ke,Le,Te,Ie=function(t,e){if(!e&&!xe)return!1;var r=!1;try{var n={};n[Ee]=function(){return{next:function(){return{done:r=!0}}}},t(n)}catch(t){}return r},Be=$t("species"),Ae=at("document","documentElement"),Oe=at("navigator","userAgent")||"",_e=/(iphone|ipod|ipad).*applewebkit/i.test(Oe),Me=i.location,ze=i.setImmediate,Fe=i.clearImmediate,Ue=i.process,He=i.MessageChannel,Pe=i.Dispatch,Ne=0,$e={},je="onreadystatechange",Ke=function(t){if($e.hasOwnProperty(t)){var e=$e[t];delete $e[t],e()}},Ge=function(t){return function(){Ke(t)}},Ze=function(t){Ke(t.data)},Ve=function(t){i.postMessage(t+"",Me.protocol+"//"+Me.host)};ze&&Fe||(ze=function(t){for(var e=[],r=1;arguments.length>r;)e.push(arguments[r++]);return $e[++Ne]=function(){("function"==typeof t?t:Function(t)).apply(void 0,e)},ke(Ne),Ne},Fe=function(t){delete $e[t]},"process"==h(Ue)?ke=function(t){Ue.nextTick(Ge(t))}:Pe&&Pe.now?ke=function(t){Pe.now(Ge(t))}:He&&!_e?(Te=(Le=new He).port2,Le.port1.onmessage=Ze,ke=_t(Te.postMessage,Te,1)):!i.addEventListener||"function"!=typeof postMessage||i.importScripts||a(Ve)||"file:"===Me.protocol?ke=je in E("script")?function(t){Ae.appendChild(E("script")).onreadystatechange=function(){Ae.removeChild(this),Ke(t)}}:function(t){setTimeout(Ge(t),0)}:(ke=Ve,i.addEventListener("message",Ze,!1)));var Ye,qe,We,Xe,Je,Qe,tr,er,rr={set:ze,clear:Fe},nr=D.f,ir=rr.set,ar=i.MutationObserver||i.WebKitMutationObserver,or=i.process,sr=i.Promise,lr="process"==h(or),cr=nr(i,"queueMicrotask"),ur=cr&&cr.value;ur||(Ye=function(){var t,e;for(lr&&(t=or.domain)&&t.exit();qe;){e=qe.fn,qe=qe.next;try{e()}catch(t){throw qe?Xe():We=void 0,t}}We=void 0,t&&t.enter()},lr?Xe=function(){or.nextTick(Ye)}:ar&&!_e?(Je=!0,Qe=document.createTextNode(""),new ar(Ye).observe(Qe,{characterData:!0}),Xe=function(){Qe.data=Je=!Je}):sr&&sr.resolve?(tr=sr.resolve(void 0),er=tr.then,Xe=function(){er.call(tr,Ye)}):Xe=function(){ir.call(i,Ye)});var fr,hr,pr=ur||function(t){var e={fn:t,next:void 0};We&&(We.next=e),qe||(qe=e,Xe()),We=e},dr=function(t){var e,r;this.promise=new t((function(t,n){if(void 0!==e||void 0!==r)throw TypeError("Bad Promise constructor");e=t,r=n})),this.resolve=Ot(e),this.reject=Ot(r)},gr={f:function(t){return new dr(t)}},mr=function(t,e){if(k(t),w(e)&&e.constructor===t)return e;var r=gr.f(t);return(0,r.resolve)(e),r.promise},wr=function(t){try{return{error:!1,value:t()}}catch(t){return{error:!0,value:t}}},yr=i.process,br=yr&&yr.versions,vr=br&&br.v8;vr?hr=(fr=vr.split("."))[0]+fr[1]:Oe&&(!(fr=Oe.match(/Edge\/(\d+)/))||fr[1]>=74)&&(fr=Oe.match(/Chrome\/(\d+)/))&&(hr=fr[1]);var Sr,Rr,Er,xr,Cr=hr&&+hr,Dr=rr.set,kr=$t("species"),Lr="Promise",Tr=et.get,Ir=et.set,Br=et.getterFor(Lr),Ar=ce,Or=i.TypeError,_r=i.document,Mr=i.process,zr=at("fetch"),Fr=gr.f,Ur=Fr,Hr="process"==h(Mr),Pr=!!(_r&&_r.createEvent&&i.dispatchEvent),Nr="unhandledrejection",$r=It(Lr,(function(){if(!(U(Ar)!==String(Ar))){if(66===Cr)return!0;if(!Hr&&"function"!=typeof PromiseRejectionEvent)return!0}if(Cr>=51&&/native code/.test(Ar))return!1;var t=Ar.resolve(1),e=function(t){t((function(){}),(function(){}))};return(t.constructor={})[kr]=e,!(t.then((function(){}))instanceof e)})),jr=$r||!Ie((function(t){Ar.all(t).catch((function(){}))})),Kr=function(t){var e;return!(!w(t)||"function"!=typeof(e=t.then))&&e},Gr=function(t,e,r){if(!e.notified){e.notified=!0;var n=e.reactions;pr((function(){for(var i=e.value,a=1==e.state,o=0;n.length>o;){var s,l,c,u=n[o++],f=a?u.ok:u.fail,h=u.resolve,p=u.reject,d=u.domain;try{f?(a||(2===e.rejection&&qr(t,e),e.rejection=1),!0===f?s=i:(d&&d.enter(),s=f(i),d&&(d.exit(),c=!0)),s===u.promise?p(Or("Promise-chain cycle")):(l=Kr(s))?l.call(s,h,p):h(s)):p(i)}catch(t){d&&!c&&d.exit(),p(t)}}e.reactions=[],e.notified=!1,r&&!e.rejection&&Vr(t,e)}))}},Zr=function(t,e,r){var n,a;Pr?((n=_r.createEvent("Event")).promise=e,n.reason=r,n.initEvent(t,!1,!0),i.dispatchEvent(n)):n={promise:e,reason:r},(a=i["on"+t])?a(n):t===Nr&&function(t,e){var r=i.console;r&&r.error&&(1===arguments.length?r.error(t):r.error(t,e))}("Unhandled promise rejection",r)},Vr=function(t,e){Dr.call(i,(function(){var r,n=e.value;if(Yr(e)&&(r=wr((function(){Hr?Mr.emit("unhandledRejection",n,t):Zr(Nr,t,n)})),e.rejection=Hr||Yr(e)?2:1,r.error))throw r.value}))},Yr=function(t){return 1!==t.rejection&&!t.parent},qr=function(t,e){Dr.call(i,(function(){Hr?Mr.emit("rejectionHandled",t):Zr("rejectionhandled",t,e.value)}))},Wr=function(t,e,r,n){return function(i){t(e,r,i,n)}},Xr=function(t,e,r,n){e.done||(e.done=!0,n&&(e=n),e.value=r,e.state=2,Gr(t,e,!0))},Jr=function(t,e,r,n){if(!e.done){e.done=!0,n&&(e=n);try{if(t===r)throw Or("Promise can't be resolved itself");var i=Kr(r);i?pr((function(){var n={done:!1};try{i.call(r,Wr(Jr,t,n,e),Wr(Xr,t,n,e))}catch(r){Xr(t,n,r,e)}})):(e.value=r,e.state=1,Gr(t,e,!1))}catch(r){Xr(t,{done:!1},r,e)}}};$r&&(Ar=function(t){me(this,Ar,Lr),Ot(t),Sr.call(this);var e=Tr(this);try{t(Wr(Jr,this,e),Wr(Xr,this,e))}catch(t){Xr(this,e,t)}},(Sr=function(t){Ir(this,{type:Lr,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:0,value:void 0})}).prototype=ue(Ar.prototype,{then:function(t,e){var r,n,i,a=Br(this),o=Fr((r=Ar,void 0===(i=k(this).constructor)||null==(n=k(i)[Be])?r:Ot(n)));return o.ok="function"!=typeof t||t,o.fail="function"==typeof e&&e,o.domain=Hr?Mr.domain:void 0,a.parent=!0,a.reactions.push(o),0!=a.state&&Gr(this,a,!1),o.promise},catch:function(t){return this.then(void 0,t)}}),Rr=function(){var t=new Sr,e=Tr(t);this.promise=t,this.resolve=Wr(Jr,t,e),this.reject=Wr(Xr,t,e)},gr.f=Fr=function(t){return t===Ar||t===Er?new Rr(t):Ur(t)},"function"==typeof ce&&(xr=ce.prototype.then,rt(ce.prototype,"then",(function(t,e){var r=this;return new Ar((function(t,e){xr.call(r,t,e)})).then(t,e)}),{unsafe:!0}),"function"==typeof zr&&At({global:!0,enumerable:!0,forced:!0},{fetch:function(t){return mr(Ar,zr.apply(i,arguments))}}))),At({global:!0,wrap:!0,forced:$r},{Promise:Ar}),pe(Ar,Lr,!1),ge(Lr),Er=at(Lr),At({target:Lr,stat:!0,forced:$r},{reject:function(t){var e=Fr(this);return e.reject.call(void 0,t),e.promise}}),At({target:Lr,stat:!0,forced:$r},{resolve:function(t){return mr(this,t)}}),At({target:Lr,stat:!0,forced:jr},{all:function(t){var e=this,r=Fr(e),n=r.resolve,i=r.reject,a=wr((function(){var r=Ot(e.resolve),a=[],o=0,s=1;Re(t,(function(t){var l=o++,c=!1;a.push(void 0),s++,r.call(e,t).then((function(t){c||(c=!0,a[l]=t,--s||n(a))}),i)})),--s||n(a)}));return a.error&&i(a.value),r.promise},race:function(t){var e=this,r=Fr(e),n=r.reject,i=wr((function(){var i=Ot(e.resolve);Re(t,(function(t){i.call(e,t).then(r.resolve,n)}))}));return i.error&&n(i.value),r.promise}}),At({target:"URL",proto:!0,enumerable:!0},{toJSON:function(){return URL.prototype.toString.call(this)}});r((function(t){var e=function(t){var e,r=Object.prototype,n=r.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",o=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function l(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function(t,e,r){return t[e]=r}}function c(t,e,r,n){var i=e&&e.prototype instanceof m?e:m,a=Object.create(i.prototype),o=new L(n||[]);return a._invoke=function(t,e,r){var n=f;return function(i,a){if(n===p)throw new Error("Generator is already running");if(n===d){if("throw"===i)throw a;return I()}for(r.method=i,r.arg=a;;){var o=r.delegate;if(o){var s=C(o,r);if(s){if(s===g)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(n===f)throw n=d,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n=p;var l=u(t,e,r);if("normal"===l.type){if(n=r.done?d:h,l.arg===g)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(n=d,r.method="throw",r.arg=l.arg)}}}(t,r,o),a}function u(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var f="suspendedStart",h="suspendedYield",p="executing",d="completed",g={};function m(){}function w(){}function y(){}var b={};b[a]=function(){return this};var v=Object.getPrototypeOf,S=v&&v(v(T([])));S&&S!==r&&n.call(S,a)&&(b=S);var R=y.prototype=m.prototype=Object.create(b);function E(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function x(t,e){function r(i,a,o,s){var l=u(t[i],t,a);if("throw"!==l.type){var c=l.arg,f=c.value;return f&&"object"==typeof f&&n.call(f,"__await")?e.resolve(f.__await).then((function(t){r("next",t,o,s)}),(function(t){r("throw",t,o,s)})):e.resolve(f).then((function(t){c.value=t,o(c)}),(function(t){return r("throw",t,o,s)}))}s(l.arg)}var i;this._invoke=function(t,n){function a(){return new e((function(e,i){r(t,n,e,i)}))}return i=i?i.then(a,a):a()}}function C(t,r){var n=t.iterator[r.method];if(n===e){if(r.delegate=null,"throw"===r.method){if(t.iterator.return&&(r.method="return",r.arg=e,C(t,r),"throw"===r.method))return g;r.method="throw",r.arg=new TypeError("The iterator does not provide a 'throw' method")}return g}var i=u(n,t.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,g;var a=i.arg;return a?a.done?(r[t.resultName]=a.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,g):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,g)}function D(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function k(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function L(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(D,this),this.reset(!0)}function T(t){if(t){var r=t[a];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,o=function r(){for(;++i<t.length;)if(n.call(t,i))return r.value=t[i],r.done=!1,r;return r.value=e,r.done=!0,r};return o.next=o}}return{next:I}}function I(){return{value:e,done:!0}}return w.prototype=R.constructor=y,y.constructor=w,w.displayName=l(y,s,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===w||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,y):(t.__proto__=y,l(t,s,"GeneratorFunction")),t.prototype=Object.create(R),t},t.awrap=function(t){return{__await:t}},E(x.prototype),x.prototype[o]=function(){return this},t.AsyncIterator=x,t.async=function(e,r,n,i,a){void 0===a&&(a=Promise);var o=new x(c(e,r,n,i),a);return t.isGeneratorFunction(r)?o:o.next().then((function(t){return t.done?t.value:o.next()}))},E(R),l(R,s,"Generator"),R[a]=function(){return this},R.toString=function(){return"[object Generator]"},t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=T,L.prototype={constructor:L,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(k),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function i(n,i){return s.type="throw",s.arg=t,r.next=n,i&&(r.method="next",r.arg=e),!!i}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],s=o.completion;if("root"===o.tryLoc)return i("end");if(o.tryLoc<=this.prev){var l=n.call(o,"catchLoc"),c=n.call(o,"finallyLoc");if(l&&c){if(this.prev<o.catchLoc)return i(o.catchLoc,!0);if(this.prev<o.finallyLoc)return i(o.finallyLoc)}else if(l){if(this.prev<o.catchLoc)return i(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return i(o.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=t,o.arg=e,a?(this.method="next",this.next=a.finallyLoc,g):this.complete(o)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),g},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),k(r),g}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var i=n.arg;k(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:T(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),g}},t}(t.exports);try{regeneratorRuntime=e}catch(t){Function("r","regeneratorRuntime = r")(e)}}));function Qr(t,e,r,n,i,a,o){try{var s=t[a](o),l=s.value}catch(t){return void r(t)}s.done?e(l):Promise.resolve(l).then(n,i)}function tn(t){return function(){var e=this,r=arguments;return new Promise((function(n,i){var a=t.apply(e,r);function o(t){Qr(a,n,i,o,s,"next",t)}function s(t){Qr(a,n,i,o,s,"throw",t)}o(void 0)}))}}function en(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function rn(t,e){var r;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(r=function(t,e){if(t){if("string"==typeof t)return en(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?en(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,i=function(){};return{s:i,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){r=t[Symbol.iterator]()},n:function(){var t=r.next();return o=t.done,t},e:function(t){s=!0,a=t},f:function(){try{o||null==r.return||r.return()}finally{if(s)throw a}}}}var nn={Huffman:{},Util:{},CRC32:{},CompressionMethod:{DEFLATE:8,RESERVED:15},Zip:function(t){t=t||{},this.files=[],this.comment=t.comment,this.password}};nn.Zip.CompressionMethod={STORE:0,DEFLATE:8},nn.Zip.OperatingSystem={MSDOS:0,UNIX:3,MACINTOSH:7},nn.Zip.Flags={ENCRYPT:1,DESCRIPTOR:8,UTF8:2048},nn.Zip.FileHeaderSignature=[80,75,1,2],nn.Zip.LocalFileHeaderSignature=[80,75,3,4],nn.Zip.CentralDirectorySignature=[80,75,5,6],nn.Zip.prototype.addFile=function(t,e){(e=e||{}).filename;var r,n=t.length,i=0;if(t instanceof Array&&(t=new Uint8Array(t)),"number"!=typeof e.compressionMethod&&(e.compressionMethod=nn.Zip.CompressionMethod.DEFLATE),e.compress)switch(e.compressionMethod){case nn.Zip.CompressionMethod.STORE:break;case nn.Zip.CompressionMethod.DEFLATE:i=nn.CRC32.calc(t),t=this.deflateWithOption(t,e),r=!0;break;default:throw new Error("unknown compression method:"+e.compressionMethod)}this.files.push({buffer:t,option:e,compressed:r,encrypted:!1,size:n,crc32:i})},nn.Zip.prototype.setPassword=function(t){this.password=t},nn.Zip.prototype.compress=function(){var t,e,r,n,i,a,o,s,l,c,u,f,h,p,d,g,m,w,y,b,v,S,R,E,x,C,D=this.files,k=0,L=0;for(R=0,E=D.length;R<E;++R){if(p=(t=D[R]).option.filename?t.option.filename.length:0,d=t.option.extraField?t.option.extraField.length:0,g=t.option.comment?t.option.comment.length:0,!t.compressed)switch(t.crc32=nn.CRC32.calc(t.buffer),t.option.compressionMethod){case nn.Zip.CompressionMethod.STORE:break;case nn.Zip.CompressionMethod.DEFLATE:t.buffer=this.deflateWithOption(t.buffer,t.option),t.compressed=!0;break;default:throw new Error("unknown compression method:"+t.option.compressionMethod)}if(void 0!==t.option.password||void 0!==this.password){for(S=this.createEncryptionKey(t.option.password||this.password),b=t.buffer,(v=new Uint8Array(b.length+12)).set(b,12),b=v,x=0;x<12;++x)b[x]=this.encode(S,11===R?255&t.crc32:256*Math.random()|0);for(C=b.length;x<C;++x)b[x]=this.encode(S,b[x]);t.buffer=b}k+=30+p+t.buffer.length,L+=46+p+g}for(a=22+(this.comment?this.comment.length:0),e=new Uint8Array(k+L+a),r=0,i=(n=k)+L,R=0,E=D.length;R<E;++R)p=(t=D[R]).option.filename?t.option.filename.length:0,d=0,g=t.option.comment?t.option.comment.length:0,o=r,e[r++]=nn.Zip.LocalFileHeaderSignature[0],e[r++]=nn.Zip.LocalFileHeaderSignature[1],e[r++]=nn.Zip.LocalFileHeaderSignature[2],e[r++]=nn.Zip.LocalFileHeaderSignature[3],e[n++]=nn.Zip.FileHeaderSignature[0],e[n++]=nn.Zip.FileHeaderSignature[1],e[n++]=nn.Zip.FileHeaderSignature[2],e[n++]=nn.Zip.FileHeaderSignature[3],20,e[n++]=20,e[n++]=t.option.os||nn.Zip.OperatingSystem.MSDOS,e[r++]=e[n++]=20,e[r++]=e[n++]=0,s=0,(t.option.password||this.password)&&(s|=nn.Zip.Flags.ENCRYPT),e[r++]=e[n++]=255&s,e[r++]=e[n++]=s>>8&255,l=t.option.compressionMethod,e[r++]=e[n++]=255&l,e[r++]=e[n++]=l>>8&255,c=t.option.date||new Date,e[r++]=e[n++]=(7&c.getMinutes())<<5|c.getSeconds()/2|0,e[r++]=e[n++]=c.getHours()<<3|c.getMinutes()>>3,e[r++]=e[n++]=(c.getMonth()+1&7)<<5|c.getDate(),e[r++]=e[n++]=(c.getFullYear()-1980&127)<<1|c.getMonth()+1>>3,u=t.crc32,e[r++]=e[n++]=255&u,e[r++]=e[n++]=u>>8&255,e[r++]=e[n++]=u>>16&255,e[r++]=e[n++]=u>>24&255,f=t.buffer.length,e[r++]=e[n++]=255&f,e[r++]=e[n++]=f>>8&255,e[r++]=e[n++]=f>>16&255,e[r++]=e[n++]=f>>24&255,h=t.size,e[r++]=e[n++]=255&h,e[r++]=e[n++]=h>>8&255,e[r++]=e[n++]=h>>16&255,e[r++]=e[n++]=h>>24&255,e[r++]=e[n++]=255&p,e[r++]=e[n++]=p>>8&255,e[r++]=e[n++]=255&d,e[r++]=e[n++]=d>>8&255,e[n++]=255&g,e[n++]=g>>8&255,e[n++]=0,e[n++]=0,e[n++]=0,e[n++]=0,e[n++]=0,e[n++]=0,e[n++]=0,e[n++]=0,e[n++]=255&o,e[n++]=o>>8&255,e[n++]=o>>16&255,e[n++]=o>>24&255,(m=t.option.filename)&&(e.set(m,r),e.set(m,n),r+=p,n+=p),(w=t.option.extraField)&&(e.set(w,r),e.set(w,n),r+=d,n+=d),(y=t.option.comment)&&(e.set(y,n),n+=g),e.set(t.buffer,r),r+=t.buffer.length;return e[i++]=nn.Zip.CentralDirectorySignature[0],e[i++]=nn.Zip.CentralDirectorySignature[1],e[i++]=nn.Zip.CentralDirectorySignature[2],e[i++]=nn.Zip.CentralDirectorySignature[3],e[i++]=0,e[i++]=0,e[i++]=0,e[i++]=0,e[i++]=255&E,e[i++]=E>>8&255,e[i++]=255&E,e[i++]=E>>8&255,e[i++]=255&L,e[i++]=L>>8&255,e[i++]=L>>16&255,e[i++]=L>>24&255,e[i++]=255&k,e[i++]=k>>8&255,e[i++]=k>>16&255,e[i++]=k>>24&255,g=this.comment?this.comment.length:0,e[i++]=255&g,e[i++]=g>>8&255,this.comment&&(e.set(this.comment,i),i+=g),e},nn.Zip.prototype.deflateWithOption=function(t,e){return new nn.RawDeflate(t,e.deflateOption).compress()},nn.Zip.prototype.getByte=function(t){var e=65535&t[2]|2;return e*(1^e)>>8&255},nn.Zip.prototype.encode=function(t,e){var r=this.getByte(t);return this.updateKeys(t,e),r^e},nn.Zip.prototype.updateKeys=function(t,e){t[0]=nn.CRC32.single(t[0],e),t[1]=1+(6681*(20173*(t[1]+(255&t[0]))>>>0)>>>0)>>>0,t[2]=nn.CRC32.single(t[2],t[1]>>>24)},nn.Zip.prototype.createEncryptionKey=function(t){var e,r,n=[305419896,591751049,878082192];for(n=new Uint32Array(n),e=0,r=t.length;e<r;++e)this.updateKeys(n,255&t[e]);return n},nn.Huffman.buildHuffmanTable=function(t){var e,r,n,i,a,o,s,l,c,u,f,h=t.length,p=0,d=Number.POSITIVE_INFINITY;for(l=0,c=h;l<c;++l)t[l]>p&&(p=t[l]),t[l]<d&&(d=t[l]);for(e=1<<p,r=new Uint32Array(e),n=1,i=0,a=2;n<=p;){for(l=0;l<h;++l)if(t[l]===n){for(o=0,s=i,u=0;u<n;++u)o=o<<1|1&s,s>>=1;for(f=n<<16|l,u=o;u<e;u+=a)r[u]=f;++i}++n,i<<=1,a<<=1}return[r,p,d]};var an=nn.Huffman.buildHuffmanTable;nn.RawInflate=function(t,e){switch(this.buffer,this.blocks=[],this.bufferSize=32768,this.totalpos=0,this.ip=0,this.bitsbuf=0,this.bitsbuflen=0,this.input=new Uint8Array(t),this.output,this.op,this.bfinal=!1,this.bufferType=nn.RawInflate.BufferType.ADAPTIVE,this.resize=!1,!e&&(e={})||(e.index&&(this.ip=e.index),e.bufferSize&&(this.bufferSize=e.bufferSize),e.bufferType&&(this.bufferType=e.bufferType),e.resize&&(this.resize=e.resize)),this.bufferType){case nn.RawInflate.BufferType.BLOCK:this.op=nn.RawInflate.MaxBackwardLength,this.output=new Uint8Array(nn.RawInflate.MaxBackwardLength+this.bufferSize+nn.RawInflate.MaxCopyLength);break;case nn.RawInflate.BufferType.ADAPTIVE:this.op=0,this.output=new Uint8Array(this.bufferSize);break;default:throw new Error("invalid inflate mode")}},nn.RawInflate.BufferType={BLOCK:0,ADAPTIVE:1},nn.RawInflate.prototype.decompress=function(){for(;!this.bfinal;)this.parseBlock();switch(this.bufferType){case nn.RawInflate.BufferType.BLOCK:return this.concatBufferBlock();case nn.RawInflate.BufferType.ADAPTIVE:return this.concatBufferDynamic();default:throw new Error("invalid inflate mode")}},nn.RawInflate.MaxBackwardLength=32768,nn.RawInflate.MaxCopyLength=258,nn.RawInflate.Order=new Uint16Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),nn.RawInflate.LengthCodeTable=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,258,258]),nn.RawInflate.LengthExtraTable=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0]),nn.RawInflate.DistCodeTable=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577]),nn.RawInflate.DistExtraTable=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),nn.RawInflate.FixedLiteralLengthTable=function(){var t,e,r=new Uint8Array(288);for(t=0,e=r.length;t<e;++t)r[t]=t<=143?8:t<=255?9:t<=279?7:8;return an(r)}(),nn.RawInflate.FixedDistanceTable=function(){var t,e,r=new Uint8Array(30);for(t=0,e=r.length;t<e;++t)r[t]=5;return an(r)}(),nn.RawInflate.prototype.parseBlock=function(){var t=this.readBits(3);switch(1&t&&(this.bfinal=!0),t>>>=1){case 0:this.parseUncompressedBlock();break;case 1:this.parseFixedHuffmanBlock();break;case 2:this.parseDynamicHuffmanBlock();break;default:throw new Error("unknown BTYPE: "+t)}},nn.RawInflate.prototype.readBits=function(t){var e,r=this.bitsbuf,n=this.bitsbuflen,i=this.input,a=this.ip;if(a+(t-n+7>>3)>=i.length)throw new Error("input buffer is broken");for(;n<t;)r|=i[a++]<<n,n+=8;return e=r&(1<<t)-1,r>>>=t,n-=t,this.bitsbuf=r,this.bitsbuflen=n,this.ip=a,e},nn.RawInflate.prototype.readCodeByTable=function(t){for(var e,r,n=this.bitsbuf,i=this.bitsbuflen,a=this.input,o=this.ip,s=a.length,l=t[0],c=t[1];i<c&&!(o>=s);)n|=a[o++]<<i,i+=8;if((r=(e=l[n&(1<<c)-1])>>>16)>i)throw new Error("invalid code length: "+r);return this.bitsbuf=n>>r,this.bitsbuflen=i-r,this.ip=o,65535&e},nn.RawInflate.prototype.parseUncompressedBlock=function(){var t,e,r=this.input,n=this.ip,i=this.output,a=this.op,o=r.length,s=i.length;if(this.bitsbuf=0,this.bitsbuflen=0,n+1>=o)throw new Error("invalid uncompressed block header: LEN");if(t=r[n++]|r[n++]<<8,n+1>=o)throw new Error("invalid uncompressed block header: NLEN");if(t===~(r[n++]|r[n++]<<8))throw new Error("invalid uncompressed block header: length verify");if(n+t>r.length)throw new Error("input buffer is broken");switch(this.bufferType){case nn.RawInflate.BufferType.BLOCK:for(;a+t>i.length;)t-=e=s-a,i.set(r.subarray(n,n+e),a),a+=e,n+=e,this.op=a,i=this.expandBufferBlock(),a=this.op;break;case nn.RawInflate.BufferType.ADAPTIVE:for(;a+t>i.length;)i=this.expandBufferAdaptive({fixRatio:2});break;default:throw new Error("invalid inflate mode")}i.set(r.subarray(n,n+t),a),a+=t,n+=t,this.ip=n,this.op=a,this.output=i},nn.RawInflate.prototype.parseFixedHuffmanBlock=function(){switch(this.bufferType){case nn.RawInflate.BufferType.ADAPTIVE:this.decodeHuffmanAdaptive(nn.RawInflate.FixedLiteralLengthTable,nn.RawInflate.FixedDistanceTable);break;case nn.RawInflate.BufferType.BLOCK:this.decodeHuffmanBlock(nn.RawInflate.FixedLiteralLengthTable,nn.RawInflate.FixedDistanceTable);break;default:throw new Error("invalid inflate mode")}},nn.RawInflate.prototype.parseDynamicHuffmanBlock=function(){var t,e,r,n,i,a,o,s,l,c=this.readBits(5)+257,u=this.readBits(5)+1,f=this.readBits(4)+4,h=new Uint8Array(nn.RawInflate.Order.length);for(s=0;s<f;++s)h[nn.RawInflate.Order[s]]=this.readBits(3);for(t=an(h),n=new Uint8Array(c+u),s=0,l=c+u;s<l;)switch(i=this.readCodeByTable(t)){case 16:for(o=3+this.readBits(2);o--;)n[s++]=a;break;case 17:for(o=3+this.readBits(3);o--;)n[s++]=0;a=0;break;case 18:for(o=11+this.readBits(7);o--;)n[s++]=0;a=0;break;default:n[s++]=i,a=i}switch(e=an(n.subarray(0,c)),r=an(n.subarray(c)),this.bufferType){case nn.RawInflate.BufferType.ADAPTIVE:this.decodeHuffmanAdaptive(e,r);break;case nn.RawInflate.BufferType.BLOCK:this.decodeHuffmanBlock(e,r);break;default:throw new Error("invalid inflate mode")}},nn.RawInflate.prototype.decodeHuffmanBlock=function(t,e){var r=this.output,n=this.op;this.currentLitlenTable=t;for(var i,a,o,s,l=r.length-nn.RawInflate.MaxCopyLength,c=nn.RawInflate.LengthCodeTable,u=nn.RawInflate.LengthExtraTable,f=nn.RawInflate.DistCodeTable,h=nn.RawInflate.DistExtraTable;256!==(i=this.readCodeByTable(t));)if(i<256)n>=l&&(this.op=n,r=this.expandBufferBlock(),n=this.op),r[n++]=i;else for(s=c[a=i-257],u[a]>0&&(s+=this.readBits(u[a])),o=f[i=this.readCodeByTable(e)],h[i]>0&&(o+=this.readBits(h[i])),n>=l&&(this.op=n,r=this.expandBufferBlock(),n=this.op);s--;)r[n]=r[n++-o];for(;this.bitsbuflen>=8;)this.bitsbuflen-=8,this.ip--;this.op=n},nn.RawInflate.prototype.decodeHuffmanAdaptive=function(t,e){var r=this.output,n=this.op;this.currentLitlenTable=t;for(var i,a,o,s,l=r.length,c=nn.RawInflate.LengthCodeTable,u=nn.RawInflate.LengthExtraTable,f=nn.RawInflate.DistCodeTable,h=nn.RawInflate.DistExtraTable;256!==(i=this.readCodeByTable(t));)if(i<256)n>=l&&(l=(r=this.expandBufferAdaptive()).length),r[n++]=i;else for(s=c[a=i-257],u[a]>0&&(s+=this.readBits(u[a])),o=f[i=this.readCodeByTable(e)],h[i]>0&&(o+=this.readBits(h[i])),n+s>l&&(l=(r=this.expandBufferAdaptive()).length);s--;)r[n]=r[n++-o];for(;this.bitsbuflen>=8;)this.bitsbuflen-=8,this.ip--;this.op=n},nn.RawInflate.prototype.expandBufferBlock=function(t){var e=new Uint8Array(this.op-nn.RawInflate.MaxBackwardLength),r=this.op-nn.RawInflate.MaxBackwardLength,n=this.output;return e.set(n.subarray(nn.RawInflate.MaxBackwardLength,e.length)),this.blocks.push(e),this.totalpos+=e.length,n.set(n.subarray(r,r+nn.RawInflate.MaxBackwardLength)),this.op=nn.RawInflate.MaxBackwardLength,n},nn.RawInflate.prototype.expandBufferAdaptive=function(t){var e,r,n,i=this.input.length/this.ip+1|0,a=this.input,o=this.output;return t&&("number"==typeof t.fixRatio&&(i=t.fixRatio),"number"==typeof t.addRatio&&(i+=t.addRatio)),r=i<2?(n=(a.length-this.ip)/this.currentLitlenTable[2]/2*258|0)<o.length?o.length+n:o.length<<1:o.length*i,(e=new Uint8Array(r)).set(o),this.output=e,this.output},nn.RawInflate.prototype.concatBufferBlock=function(){var t,e,r,n,i,a=0,o=this.totalpos+(this.op-nn.RawInflate.MaxBackwardLength),s=this.output,l=this.blocks,c=new Uint8Array(o);if(0===l.length)return this.output.subarray(nn.RawInflate.MaxBackwardLength,this.op);for(e=0,r=l.length;e<r;++e)for(n=0,i=(t=l[e]).length;n<i;++n)c[a++]=t[n];for(e=nn.RawInflate.MaxBackwardLength,r=this.op;e<r;++e)c[a++]=s[e];return this.blocks=[],this.buffer=c,this.buffer},nn.RawInflate.prototype.concatBufferDynamic=function(){var t,e=this.op;return this.resize?(t=new Uint8Array(e)).set(this.output.subarray(0,e)):t=this.output.subarray(0,e),this.buffer=t,this.buffer};var on;an=nn.Huffman.buildHuffmanTable;let sn;async function ln(t){if(gapi.auth2&&gapi.auth2.getAuthInstance())return void console.warn("oAuth has already been initialized");gapi.apiKey=t.apiKey;const e=Object.assign({},t);return e.scope||(e.scope="profile"),t.client_id||(t.client_id=t.clientId),await async function(t){return new Promise((function(e,r){gapi.load(t,{callback:e,onerror:r})}))}("auth2"),new Promise((function(t,r){gapi.auth2.init(e).then(t,r)}))}function cn(t){return un("div",t)}function un(t,e){const r=document.createElement(t);return e&&(e.class&&r.classList.add(e.class),e.id&&(r.id=e.id),e.style&&function(t,e){for(let r of Object.keys(e))t.style[r]=e[r]}(r,e.style)),r}function fn(t){const e=getComputedStyle(t);"none"!==e.display&&(t._initialDisplay=e.display),t.style.display="none"}function hn(t){if("none"===getComputedStyle(t).display){const e=t._initialDisplay||"block";t.style.display=e}}function pn(t,e){return function(t,e){e=e||"currentColor";let r=dn[t];r||(console.error("No icon named: "+t),r=dn.question);const n=document.createElementNS("http://www.w3.org/2000/svg","svg");n.setAttributeNS(null,"viewBox","0 0 "+r[0]+" "+r[1]);const i=document.createElementNS("http://www.w3.org/2000/svg","path");return i.setAttributeNS(null,"fill",e),i.setAttributeNS(null,"d",r[4]),n.appendChild(i),n}(t,e)}nn.RawInflateStream=function(t,e,r){this.blocks=[],this.bufferSize=r||65e3,this.totalpos=0,this.ip=void 0===e?0:e,this.bitsbuf=0,this.bitsbuflen=0,this.input=new Uint8Array(t),this.output=new Uint8Array(this.bufferSize),this.op=0,this.bfinal=!1,this.blockLength,this.resize=!1,this.litlenTable,this.distTable,this.sp=0,this.status=nn.RawInflateStream.Status.INITIALIZED,this.ip_,this.bitsbuflen_,this.bitsbuf_},nn.RawInflateStream.BlockType={UNCOMPRESSED:0,FIXED:1,DYNAMIC:2},nn.RawInflateStream.Status={INITIALIZED:0,BLOCK_HEADER_START:1,BLOCK_HEADER_END:2,BLOCK_BODY_START:3,BLOCK_BODY_END:4,DECODE_BLOCK_START:5,DECODE_BLOCK_END:6},nn.RawInflateStream.prototype.decompress=function(t,e){var r=!1;for(void 0!==t&&(this.input=t),void 0!==e&&(this.ip=e);!r;)switch(this.status){case nn.RawInflateStream.Status.INITIALIZED:case nn.RawInflateStream.Status.BLOCK_HEADER_START:this.readBlockHeader()<0&&(r=!0);break;case nn.RawInflateStream.Status.BLOCK_HEADER_END:case nn.RawInflateStream.Status.BLOCK_BODY_START:switch(this.currentBlockType){case nn.RawInflateStream.BlockType.UNCOMPRESSED:this.readUncompressedBlockHeader()<0&&(r=!0);break;case nn.RawInflateStream.BlockType.FIXED:this.parseFixedHuffmanBlock()<0&&(r=!0);break;case nn.RawInflateStream.BlockType.DYNAMIC:this.parseDynamicHuffmanBlock()<0&&(r=!0)}break;case nn.RawInflateStream.Status.BLOCK_BODY_END:case nn.RawInflateStream.Status.DECODE_BLOCK_START:switch(this.currentBlockType){case nn.RawInflateStream.BlockType.UNCOMPRESSED:this.parseUncompressedBlock()<0&&(r=!0);break;case nn.RawInflateStream.BlockType.FIXED:case nn.RawInflateStream.BlockType.DYNAMIC:this.decodeHuffman()<0&&(r=!0)}break;case nn.RawInflateStream.Status.DECODE_BLOCK_END:this.bfinal?r=!0:this.status=nn.RawInflateStream.Status.INITIALIZED}return this.concatBuffer()},nn.RawInflateStream.MaxBackwardLength=32768,nn.RawInflateStream.MaxCopyLength=258,nn.RawInflateStream.Order=new Uint16Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),nn.RawInflateStream.LengthCodeTable=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,258,258]),nn.RawInflateStream.LengthExtraTable=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0]),nn.RawInflateStream.DistCodeTable=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577]),nn.RawInflateStream.DistExtraTable=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),nn.RawInflateStream.FixedLiteralLengthTable=function(){var t,e,r=new Uint8Array(288);for(t=0,e=r.length;t<e;++t)r[t]=t<=143?8:t<=255?9:t<=279?7:8;return an(r)}(),nn.RawInflateStream.FixedDistanceTable=function(){var t,e,r=new Uint8Array(30);for(t=0,e=r.length;t<e;++t)r[t]=5;return an(r)}(),nn.RawInflateStream.prototype.readBlockHeader=function(){var t;if(this.status=nn.RawInflateStream.Status.BLOCK_HEADER_START,this.save_(),(t=this.readBits(3))<0)return this.restore_(),-1;switch(1&t&&(this.bfinal=!0),t>>>=1){case 0:this.currentBlockType=nn.RawInflateStream.BlockType.UNCOMPRESSED;break;case 1:this.currentBlockType=nn.RawInflateStream.BlockType.FIXED;break;case 2:this.currentBlockType=nn.RawInflateStream.BlockType.DYNAMIC;break;default:throw new Error("unknown BTYPE: "+t)}this.status=nn.RawInflateStream.Status.BLOCK_HEADER_END},nn.RawInflateStream.prototype.readBits=function(t){for(var e,r=this.bitsbuf,n=this.bitsbuflen,i=this.input,a=this.ip;n<t;){if(i.length<=a)return-1;r|=(e=i[a++])<<n,n+=8}return e=r&(1<<t)-1,r>>>=t,n-=t,this.bitsbuf=r,this.bitsbuflen=n,this.ip=a,e},nn.RawInflateStream.prototype.readCodeByTable=function(t){for(var e,r,n=this.bitsbuf,i=this.bitsbuflen,a=this.input,o=this.ip,s=t[0],l=t[1];i<l;){if(a.length<=o)return-1;n|=a[o++]<<i,i+=8}if((r=(e=s[n&(1<<l)-1])>>>16)>i)throw new Error("invalid code length: "+r);return this.bitsbuf=n>>r,this.bitsbuflen=i-r,this.ip=o,65535&e},nn.RawInflateStream.prototype.readUncompressedBlockHeader=function(){var t,e=this.input,r=this.ip;if(this.status=nn.RawInflateStream.Status.BLOCK_BODY_START,r+4>=e.length)return-1;if((t=e[r++]|e[r++]<<8)===~(e[r++]|e[r++]<<8))throw new Error("invalid uncompressed block header: length verify");this.bitsbuf=0,this.bitsbuflen=0,this.ip=r,this.blockLength=t,this.status=nn.RawInflateStream.Status.BLOCK_BODY_END},nn.RawInflateStream.prototype.parseUncompressedBlock=function(){var t=this.input,e=this.ip,r=this.output,n=this.op,i=this.blockLength;for(this.status=nn.RawInflateStream.Status.DECODE_BLOCK_START;i--;){if(n===r.length&&(r=this.expandBuffer({fixRatio:2})),e>=t.length)return this.ip=e,this.op=n,this.blockLength=i+1,-1;r[n++]=t[e++]}return i<0&&(this.status=nn.RawInflateStream.Status.DECODE_BLOCK_END),this.ip=e,this.op=n,0},nn.RawInflateStream.prototype.parseFixedHuffmanBlock=function(){return this.status=nn.RawInflateStream.Status.BLOCK_BODY_START,this.litlenTable=nn.RawInflateStream.FixedLiteralLengthTable,this.distTable=nn.RawInflateStream.FixedDistanceTable,this.status=nn.RawInflateStream.Status.BLOCK_BODY_END,0},nn.RawInflateStream.prototype.save_=function(){this.ip_=this.ip,this.bitsbuflen_=this.bitsbuflen,this.bitsbuf_=this.bitsbuf},nn.RawInflateStream.prototype.restore_=function(){this.ip=this.ip_,this.bitsbuflen=this.bitsbuflen_,this.bitsbuf=this.bitsbuf_},nn.RawInflateStream.prototype.parseDynamicHuffmanBlock=function(){var t,e,r,n,i=new Uint8Array(nn.RawInflateStream.Order.length);if(this.status=nn.RawInflateStream.Status.BLOCK_BODY_START,this.save_(),t=this.readBits(5)+257,e=this.readBits(5)+1,r=this.readBits(4)+4,t<0||e<0||r<0)return this.restore_(),-1;try{(function(){var a,o,s,l,c,u,f=0;for(c=0;c<r;++c){if((a=this.readBits(3))<0)throw new Error("not enough input");i[nn.RawInflateStream.Order[c]]=a}for(n=an(i),l=new Uint8Array(t+e),c=0,u=t+e;c<u;){if((o=this.readCodeByTable(n))<0)throw new Error("not enough input");switch(o){case 16:if((a=this.readBits(2))<0)throw new Error("not enough input");for(s=3+a;s--;)l[c++]=f;break;case 17:if((a=this.readBits(3))<0)throw new Error("not enough input");for(s=3+a;s--;)l[c++]=0;f=0;break;case 18:if((a=this.readBits(7))<0)throw new Error("not enough input");for(s=11+a;s--;)l[c++]=0;f=0;break;default:l[c++]=o,f=o}}this.litlenTable=an(l.subarray(0,t)),this.distTable=an(l.subarray(t))}).call(this)}catch(t){return this.restore_(),-1}return this.status=nn.RawInflateStream.Status.BLOCK_BODY_END,0},nn.RawInflateStream.prototype.decodeHuffman=function(){var t,e,r,n,i,a=this.output,o=this.op,s=this.litlenTable,l=this.distTable,c=a.length;for(this.status=nn.RawInflateStream.Status.DECODE_BLOCK_START;;){if(this.save_(),(t=this.readCodeByTable(s))<0)return this.op=o,this.restore_(),-1;if(256===t)break;if(t<256)o===c&&(c=(a=this.expandBuffer()).length),a[o++]=t;else{if(e=t-257,n=nn.RawInflateStream.LengthCodeTable[e],nn.RawInflateStream.LengthExtraTable[e]>0){if((i=this.readBits(nn.RawInflateStream.LengthExtraTable[e]))<0)return this.op=o,this.restore_(),-1;n+=i}if((t=this.readCodeByTable(l))<0)return this.op=o,this.restore_(),-1;if(r=nn.RawInflateStream.DistCodeTable[t],nn.RawInflateStream.DistExtraTable[t]>0){if((i=this.readBits(nn.RawInflateStream.DistExtraTable[t]))<0)return this.op=o,this.restore_(),-1;r+=i}for(o+n>=c&&(c=(a=this.expandBuffer()).length);n--;)a[o]=a[o++-r];if(this.ip===this.input.length)return this.op=o,-1}}for(;this.bitsbuflen>=8;)this.bitsbuflen-=8,this.ip--;this.op=o,this.status=nn.RawInflateStream.Status.DECODE_BLOCK_END},nn.RawInflateStream.prototype.expandBuffer=function(t){var e,r,n,i=this.input.length/this.ip+1|0,a=this.input,o=this.output;return t&&("number"==typeof t.fixRatio&&(i=t.fixRatio),"number"==typeof t.addRatio&&(i+=t.addRatio)),r=i<2?(n=(a.length-this.ip)/this.litlenTable[2]/2*258|0)<o.length?o.length+n:o.length<<1:o.length*i,(e=new Uint8Array(r)).set(o),this.output=e,this.output},nn.RawInflateStream.prototype.concatBuffer=function(){var t,e,r=this.op;return t=this.resize?new Uint8Array(this.output.subarray(this.sp,r)):this.output.subarray(this.sp,r),this.sp=r,r>nn.RawInflateStream.MaxBackwardLength+this.bufferSize&&(this.op=this.sp=nn.RawInflateStream.MaxBackwardLength,e=this.output,this.output=new Uint8Array(this.bufferSize+nn.RawInflateStream.MaxBackwardLength),this.output.set(e.subarray(r-nn.RawInflateStream.MaxBackwardLength,r))),t},nn.Inflate=function(t,e){var r,n;switch(this.input=t,this.ip=0,this.rawinflate,this.verify,!e&&(e={})||(e.index&&(this.ip=e.index),e.verify&&(this.verify=e.verify)),r=t[this.ip++],n=t[this.ip++],15&r){case nn.CompressionMethod.DEFLATE:this.method=nn.CompressionMethod.DEFLATE;break;default:throw new Error("unsupported compression method")}if(((r<<8)+n)%31!=0)throw new Error("invalid fcheck flag:"+((r<<8)+n)%31);if(32&n)throw new Error("fdict flag is not supported");this.rawinflate=new nn.RawInflate(t,{index:this.ip,bufferSize:e.bufferSize,bufferType:e.bufferType,resize:e.resize})},nn.Inflate.BufferType=nn.RawInflate.BufferType,nn.Inflate.prototype.decompress=function(){var t,e=this.input;if(t=this.rawinflate.decompress(),this.ip=this.rawinflate.ip,this.verify&&(e[this.ip++]<<24|e[this.ip++]<<16|e[this.ip++]<<8|e[this.ip++])>>>0!==nn.Adler32(t))throw new Error("invalid adler-32 checksum");return t},nn.InflateStream=function(t){this.input=void 0===t?new Uint8Array:t,this.ip=0,this.rawinflate=new nn.RawInflateStream(this.input,this.ip),this.method,this.output=this.rawinflate.output},nn.InflateStream.prototype.decompress=function(t){var e;if(void 0!==t){var r=new Uint8Array(this.input.length+t.length);r.set(this.input,0),r.set(t,this.input.length),this.input=r}return void 0===this.method&&this.readHeader()<0?new Uint8Array:(e=this.rawinflate.decompress(this.input,this.ip),0!==this.rawinflate.ip&&(this.input=this.input.subarray(this.rawinflate.ip),this.ip=0),e)},nn.InflateStream.prototype.readHeader=function(){var t=this.ip,e=this.input,r=e[t++],n=e[t++];if(void 0===r||void 0===n)return-1;switch(15&r){case nn.CompressionMethod.DEFLATE:this.method=nn.CompressionMethod.DEFLATE;break;default:throw new Error("unsupported compression method")}if(((r<<8)+n)%31!=0)throw new Error("invalid fcheck flag:"+((r<<8)+n)%31);if(32&n)throw new Error("fdict flag is not supported");this.ip=t},nn.Gunzip=function(t,e){this.input=t,this.ip=0,this.member=[],this.decompressed=!1},nn.Gunzip.prototype.getMembers=function(){return this.decompressed||this.decompress(),this.member.slice()},nn.Gunzip.prototype.decompress=function(){for(var t=this.input.length;this.ip<t;)this.decodeMember();return this.decompressed=!0,this.concatMember()},nn.Gunzip.prototype.decodeMember=function(){var t,e,r,n,i,a,o,s,l,c=new nn.GunzipMember,u=this.input,f=this.ip;if(c.id1=u[f++],c.id2=u[f++],31!==c.id1||139!==c.id2)throw new Error("invalid file signature:"+c.id1+","+c.id2);switch(c.cm=u[f++],c.cm){case 8:break;default:throw new Error("unknown compression method: "+c.cm)}if(c.flg=u[f++],s=u[f++]|u[f++]<<8|u[f++]<<16|u[f++]<<24,c.mtime=new Date(1e3*s),c.xfl=u[f++],c.os=u[f++],(c.flg&nn.Gzip.FlagsMask.FEXTRA)>0&&(c.xlen=u[f++]|u[f++]<<8,f=this.decodeSubField(f,c.xlen)),(c.flg&nn.Gzip.FlagsMask.FNAME)>0){for(o=[],a=0;(i=u[f++])>0;)o[a++]=String.fromCharCode(i);c.name=o.join("")}if((c.flg&nn.Gzip.FlagsMask.FCOMMENT)>0){for(o=[],a=0;(i=u[f++])>0;)o[a++]=String.fromCharCode(i);c.comment=o.join("")}if((c.flg&nn.Gzip.FlagsMask.FHCRC)>0&&(c.crc16=65535&nn.CRC32.calc(u,0,f),c.crc16!==(u[f++]|u[f++]<<8)))throw new Error("invalid header crc16");if(t=u[u.length-4]|u[u.length-3]<<8|u[u.length-2]<<16|u[u.length-1]<<24,u.length-f-4-4<512*t&&(n=t),e=new nn.RawInflate(u,{index:f,bufferSize:n}),c.data=r=e.decompress(),f=e.ip,c.crc32=l=(u[f++]|u[f++]<<8|u[f++]<<16|u[f++]<<24)>>>0,nn.CRC32.calc(r)!==l)throw new Error("invalid CRC-32 checksum: 0x"+nn.CRC32.calc(r).toString(16)+" / 0x"+l.toString(16));if(c.isize=t=(u[f++]|u[f++]<<8|u[f++]<<16|u[f++]<<24)>>>0,(4294967295&r.length)!==t)throw new Error("invalid input size: "+(4294967295&r.length)+" / "+t);this.member.push(c),this.ip=f},nn.Gunzip.prototype.decodeSubField=function(t,e){return t+e},nn.Gunzip.prototype.concatMember=function(){var t,e,r,n=this.member,i=0,a=0;for(t=0,e=n.length;t<e;++t)a+=n[t].data.length;for(r=new Uint8Array(a),t=0;t<e;++t)r.set(n[t].data,i),i+=n[t].data.length;return r},nn.GunzipMember=function(){this.id1,this.id2,this.cm,this.flg,this.mtime,this.xfl,this.os,this.crc16,this.xlen,this.crc32,this.isize,this.name,this.comment,this.data},nn.GunzipMember.prototype.getName=function(){return this.name},nn.GunzipMember.prototype.getData=function(){return this.data},nn.GunzipMember.prototype.getMtime=function(){return this.mtime},nn.Gzip=function(t,e){this.input=t,this.ip=0,this.output,this.op=0,this.flags={},this.filename,this.comment,this.deflateOptions,e&&(e.flags&&(this.flags=e.flags),"string"==typeof e.filename&&(this.filename=e.filename),"string"==typeof e.comment&&(this.comment=e.comment),e.deflateOptions&&(this.deflateOptions=e.deflateOptions)),this.deflateOptions||(this.deflateOptions={})},nn.Gzip.DefaultBufferSize=32768,nn.Gzip.prototype.compress=function(){var t,e,r,n,i,a,o,s,l=new Uint8Array(nn.Gzip.DefaultBufferSize),c=0,u=this.input,f=this.ip,h=this.filename,p=this.comment;if(l[c++]=31,l[c++]=139,l[c++]=8,t=0,this.flags.fname&&(t|=nn.Gzip.FlagsMask.FNAME),this.flags.fcomment&&(t|=nn.Gzip.FlagsMask.FCOMMENT),this.flags.fhcrc&&(t|=nn.Gzip.FlagsMask.FHCRC),l[c++]=t,e=(Date.now?Date.now():+new Date)/1e3|0,l[c++]=255&e,l[c++]=e>>>8&255,l[c++]=e>>>16&255,l[c++]=e>>>24&255,l[c++]=0,l[c++]=nn.Gzip.OperatingSystem.UNKNOWN,void 0!==this.flags.fname){for(o=0,s=h.length;o<s;++o)(a=h.charCodeAt(o))>255&&(l[c++]=a>>>8&255),l[c++]=255&a;l[c++]=0}if(this.flags.comment){for(o=0,s=p.length;o<s;++o)(a=p.charCodeAt(o))>255&&(l[c++]=a>>>8&255),l[c++]=255&a;l[c++]=0}return this.flags.fhcrc&&(r=65535&nn.CRC32.calc(l,0,c),l[c++]=255&r,l[c++]=r>>>8&255),this.deflateOptions.outputBuffer=l,this.deflateOptions.outputIndex=c,l=(i=new nn.RawDeflate(u,this.deflateOptions)).compress(),(c=i.op)+8>l.buffer.byteLength?(this.output=new Uint8Array(c+8),this.output.set(new Uint8Array(l.buffer)),l=this.output):l=new Uint8Array(l.buffer),n=nn.CRC32.calc(u),l[c++]=255&n,l[c++]=n>>>8&255,l[c++]=n>>>16&255,l[c++]=n>>>24&255,s=u.length,l[c++]=255&s,l[c++]=s>>>8&255,l[c++]=s>>>16&255,l[c++]=s>>>24&255,this.ip=f,c<l.length&&(this.output=l=l.subarray(0,c)),l},nn.Gzip.OperatingSystem={FAT:0,AMIGA:1,VMS:2,UNIX:3,VM_CMS:4,ATARI_TOS:5,HPFS:6,MACINTOSH:7,Z_SYSTEM:8,CP_M:9,TOPS_20:10,NTFS:11,QDOS:12,ACORN_RISCOS:13,UNKNOWN:255},nn.Gzip.FlagsMask={FTEXT:1,FHCRC:2,FEXTRA:4,FNAME:8,FCOMMENT:16},nn.Heap=function(t){this.buffer=new Uint16Array(2*t),this.length=0},nn.Heap.prototype.getParent=function(t){return 2*((t-2)/4|0)},nn.Heap.prototype.getChild=function(t){return 2*t+2},nn.Heap.prototype.push=function(t,e){var r,n,i,a=this.buffer;for(r=this.length,a[this.length++]=e,a[this.length++]=t;r>0&&(n=this.getParent(r),a[r]>a[n]);)i=a[r],a[r]=a[n],a[n]=i,i=a[r+1],a[r+1]=a[n+1],a[n+1]=i,r=n;return this.length},nn.Heap.prototype.pop=function(){var t,e,r,n,i,a=this.buffer;for(e=a[0],t=a[1],this.length-=2,a[0]=a[this.length],a[1]=a[this.length+1],i=0;!((n=this.getChild(i))>=this.length)&&(n+2<this.length&&a[n+2]>a[n]&&(n+=2),a[n]>a[i]);)r=a[i],a[i]=a[n],a[n]=r,r=a[i+1],a[i+1]=a[n+1],a[n+1]=r,i=n;return{index:t,value:e,length:this.length}},nn.RawDeflate=function(t,e){this.compressionType=nn.RawDeflate.CompressionType.DYNAMIC,this.lazy=0,this.freqsLitLen,this.freqsDist,this.input=t instanceof Array?new Uint8Array(t):t,this.output,this.op=0,e&&(e.lazy&&(this.lazy=e.lazy),"number"==typeof e.compressionType&&(this.compressionType=e.compressionType),e.outputBuffer&&(this.output=e.outputBuffer instanceof Array?new Uint8Array(e.outputBuffer):e.outputBuffer),"number"==typeof e.outputIndex&&(this.op=e.outputIndex)),this.output||(this.output=new Uint8Array(32768))},nn.RawDeflate.CompressionType={NONE:0,FIXED:1,DYNAMIC:2,RESERVED:3},nn.RawDeflate.Lz77MinLength=3,nn.RawDeflate.Lz77MaxLength=258,nn.RawDeflate.WindowSize=32768,nn.RawDeflate.MaxCodeLength=16,nn.RawDeflate.HUFMAX=286,nn.RawDeflate.FixedHuffmanTable=function(){var t,e=[];for(t=0;t<288;t++)switch(!0){case t<=143:e.push([t+48,8]);break;case t<=255:e.push([t-144+400,9]);break;case t<=279:e.push([t-256+0,7]);break;case t<=287:e.push([t-280+192,8]);break;default:throw"invalid literal: "+t}return e}(),nn.RawDeflate.prototype.compress=function(){var t,e,r,n=this.input;switch(this.compressionType){case nn.RawDeflate.CompressionType.NONE:for(e=0,r=n.length;e<r;)e+=(t=n.subarray(e,e+65535)).length,this.makeNocompressBlock(t,e===r);break;case nn.RawDeflate.CompressionType.FIXED:this.output=this.makeFixedHuffmanBlock(n,!0),this.op=this.output.length;break;case nn.RawDeflate.CompressionType.DYNAMIC:this.output=this.makeDynamicHuffmanBlock(n,!0),this.op=this.output.length;break;default:throw"invalid compression type"}return this.output},nn.RawDeflate.prototype.makeNocompressBlock=function(t,e){var r,n,i,a,o=this.output,s=this.op;for(o=new Uint8Array(this.output.buffer);o.length<=s+t.length+5;)o=new Uint8Array(o.length<<1);return o.set(this.output),r=e?1:0,n=nn.RawDeflate.CompressionType.NONE,o[s++]=r|n<<1,a=65536+~(i=t.length)&65535,o[s++]=255&i,o[s++]=i>>>8&255,o[s++]=255&a,o[s++]=a>>>8&255,o.set(t,s),s+=t.length,o=o.subarray(0,s),this.op=s,this.output=o,o},nn.RawDeflate.prototype.makeFixedHuffmanBlock=function(t,e){var r,n,i,a=new nn.BitStream(new Uint8Array(this.output.buffer),this.op);return r=e?1:0,n=nn.RawDeflate.CompressionType.FIXED,a.writeBits(r,1,!0),a.writeBits(n,2,!0),i=this.lz77(t),this.fixedHuffman(i,a),a.finish()},nn.RawDeflate.prototype.makeDynamicHuffmanBlock=function(t,e){var r,n,i,a,o,s,l,c,u,f,h,p,d,g,m,w,y,b=new nn.BitStream(new Uint8Array(this.output.buffer),this.op),v=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],S=new Array(19);for(r=e?1:0,n=nn.RawDeflate.CompressionType.DYNAMIC,b.writeBits(r,1,!0),b.writeBits(n,2,!0),i=this.lz77(t),l=this.getLengths_(this.freqsLitLen,15),c=this.getCodesFromLengths_(l),u=this.getLengths_(this.freqsDist,7),f=this.getCodesFromLengths_(u),a=286;a>257&&0===l[a-1];a--);for(o=30;o>1&&0===u[o-1];o--);for(h=this.getTreeSymbols_(a,l,o,u),p=this.getLengths_(h.freqs,7),w=0;w<19;w++)S[w]=p[v[w]];for(s=19;s>4&&0===S[s-1];s--);for(d=this.getCodesFromLengths_(p),b.writeBits(a-257,5,!0),b.writeBits(o-1,5,!0),b.writeBits(s-4,4,!0),w=0;w<s;w++)b.writeBits(S[w],3,!0);for(w=0,y=h.codes.length;w<y;w++)if(g=h.codes[w],b.writeBits(d[g],p[g],!0),g>=16){switch(w++,g){case 16:m=2;break;case 17:m=3;break;case 18:m=7;break;default:throw"invalid code: "+g}b.writeBits(h.codes[w],m,!0)}return this.dynamicHuffman(i,[c,l],[f,u],b),b.finish()},nn.RawDeflate.prototype.dynamicHuffman=function(t,e,r,n){var i,a,o,s,l,c,u,f;for(l=e[0],c=e[1],u=r[0],f=r[1],i=0,a=t.length;i<a;++i)if(o=t[i],n.writeBits(l[o],c[o],!0),o>256)n.writeBits(t[++i],t[++i],!0),s=t[++i],n.writeBits(u[s],f[s],!0),n.writeBits(t[++i],t[++i],!0);else if(256===o)break;return n},nn.RawDeflate.prototype.fixedHuffman=function(t,e){var r,n,i;for(r=0,n=t.length;r<n;r++)if(i=t[r],nn.BitStream.prototype.writeBits.apply(e,nn.RawDeflate.FixedHuffmanTable[i]),i>256)e.writeBits(t[++r],t[++r],!0),e.writeBits(t[++r],5),e.writeBits(t[++r],t[++r],!0);else if(256===i)break;return e},nn.RawDeflate.Lz77Match=function(t,e){this.length=t,this.backwardDistance=e},nn.RawDeflate.Lz77Match.LengthCodeTable=(on=function(){var t,e,r=[];for(t=3;t<=258;t++)e=n(t),r[t]=e[2]<<24|e[1]<<16|e[0];function n(t){switch(!0){case 3===t:return[257,t-3,0];case 4===t:return[258,t-4,0];case 5===t:return[259,t-5,0];case 6===t:return[260,t-6,0];case 7===t:return[261,t-7,0];case 8===t:return[262,t-8,0];case 9===t:return[263,t-9,0];case 10===t:return[264,t-10,0];case t<=12:return[265,t-11,1];case t<=14:return[266,t-13,1];case t<=16:return[267,t-15,1];case t<=18:return[268,t-17,1];case t<=22:return[269,t-19,2];case t<=26:return[270,t-23,2];case t<=30:return[271,t-27,2];case t<=34:return[272,t-31,2];case t<=42:return[273,t-35,3];case t<=50:return[274,t-43,3];case t<=58:return[275,t-51,3];case t<=66:return[276,t-59,3];case t<=82:return[277,t-67,4];case t<=98:return[278,t-83,4];case t<=114:return[279,t-99,4];case t<=130:return[280,t-115,4];case t<=162:return[281,t-131,5];case t<=194:return[282,t-163,5];case t<=226:return[283,t-195,5];case t<=257:return[284,t-227,5];case 258===t:return[285,t-258,0];default:throw"invalid length: "+t}}return r}(),new Uint32Array(on)),nn.RawDeflate.Lz77Match.prototype.getDistanceCode_=function(t){var e;switch(!0){case 1===t:e=[0,t-1,0];break;case 2===t:e=[1,t-2,0];break;case 3===t:e=[2,t-3,0];break;case 4===t:e=[3,t-4,0];break;case t<=6:e=[4,t-5,1];break;case t<=8:e=[5,t-7,1];break;case t<=12:e=[6,t-9,2];break;case t<=16:e=[7,t-13,2];break;case t<=24:e=[8,t-17,3];break;case t<=32:e=[9,t-25,3];break;case t<=48:e=[10,t-33,4];break;case t<=64:e=[11,t-49,4];break;case t<=96:e=[12,t-65,5];break;case t<=128:e=[13,t-97,5];break;case t<=192:e=[14,t-129,6];break;case t<=256:e=[15,t-193,6];break;case t<=384:e=[16,t-257,7];break;case t<=512:e=[17,t-385,7];break;case t<=768:e=[18,t-513,8];break;case t<=1024:e=[19,t-769,8];break;case t<=1536:e=[20,t-1025,9];break;case t<=2048:e=[21,t-1537,9];break;case t<=3072:e=[22,t-2049,10];break;case t<=4096:e=[23,t-3073,10];break;case t<=6144:e=[24,t-4097,11];break;case t<=8192:e=[25,t-6145,11];break;case t<=12288:e=[26,t-8193,12];break;case t<=16384:e=[27,t-12289,12];break;case t<=24576:e=[28,t-16385,13];break;case t<=32768:e=[29,t-24577,13];break;default:throw"invalid distance"}return e},nn.RawDeflate.Lz77Match.prototype.toLz77Array=function(){var t,e=this.length,r=this.backwardDistance,n=[],i=0;return t=nn.RawDeflate.Lz77Match.LengthCodeTable[e],n[i++]=65535&t,n[i++]=t>>16&255,n[i++]=t>>24,t=this.getDistanceCode_(r),n[i++]=t[0],n[i++]=t[1],n[i++]=t[2],n},nn.RawDeflate.prototype.lz77=function(t){var e,r,n,i,a,o,s,l,c,u={},f=nn.RawDeflate.WindowSize,h=new Uint16Array(2*t.length),p=0,d=0,g=new Uint32Array(286),m=new Uint32Array(30),w=this.lazy;function y(t,e){var r,n,i=t.toLz77Array();for(r=0,n=i.length;r<n;++r)h[p++]=i[r];g[i[0]]++,m[i[3]]++,d=t.length+e-1,l=null}for(g[256]=1,e=0,r=t.length;e<r;++e){for(a=0,n=0,i=nn.RawDeflate.Lz77MinLength;n<i&&e+n!==r;++n)a=a<<8|t[e+n];if(void 0===u[a]&&(u[a]=[]),o=u[a],d-- >0)o.push(e);else{for(;o.length>0&&e-o[0]>f;)o.shift();if(e+nn.RawDeflate.Lz77MinLength>=r){for(l&&y(l,-1),n=0,i=r-e;n<i;++n)c=t[e+n],h[p++]=c,++g[c];break}o.length>0?(s=this.searchLongestMatch_(t,e,o),l?l.length<s.length?(c=t[e-1],h[p++]=c,++g[c],y(s,0)):y(l,-1):s.length<w?l=s:y(s,0)):l?y(l,-1):(c=t[e],h[p++]=c,++g[c]),o.push(e)}}return h[p++]=256,g[256]++,this.freqsLitLen=g,this.freqsDist=m,h.subarray(0,p)},nn.RawDeflate.prototype.searchLongestMatch_=function(t,e,r){var n,i,a,o,s,l,c=0,u=t.length;t:for(o=0,l=r.length;o<l;o++){if(n=r[l-o-1],a=nn.RawDeflate.Lz77MinLength,c>nn.RawDeflate.Lz77MinLength){for(s=c;s>nn.RawDeflate.Lz77MinLength;s--)if(t[n+s-1]!==t[e+s-1])continue t;a=c}for(;a<nn.RawDeflate.Lz77MaxLength&&e+a<u&&t[n+a]===t[e+a];)++a;if(a>c&&(i=n,c=a),a===nn.RawDeflate.Lz77MaxLength)break}return new nn.RawDeflate.Lz77Match(c,e-i)},nn.RawDeflate.prototype.getTreeSymbols_=function(t,e,r,n){var i,a,o,s,l,c,u=new Uint32Array(t+r),f=new Uint32Array(316),h=new Uint8Array(19);for(a=0,i=0;i<t;i++)u[a++]=e[i];for(i=0;i<r;i++)u[a++]=n[i];for(l=0,i=0,s=u.length;i<s;i+=a){for(a=1;i+a<s&&u[i+a]===u[i];++a);if(o=a,0===u[i])if(o<3)for(;o-- >0;)f[l++]=0,h[0]++;else for(;o>0;)(c=o<138?o:138)>o-3&&c<o&&(c=o-3),c<=10?(f[l++]=17,f[l++]=c-3,h[17]++):(f[l++]=18,f[l++]=c-11,h[18]++),o-=c;else if(f[l++]=u[i],h[u[i]]++,--o<3)for(;o-- >0;)f[l++]=u[i],h[u[i]]++;else for(;o>0;)(c=o<6?o:6)>o-3&&c<o&&(c=o-3),f[l++]=16,f[l++]=c-3,h[16]++,o-=c}return{codes:f.subarray(0,l),freqs:h}},nn.RawDeflate.prototype.getLengths_=function(t,e){var r,n,i,a,o,s=t.length,l=new nn.Heap(2*nn.RawDeflate.HUFMAX),c=new Uint8Array(s);for(a=0;a<s;++a)t[a]>0&&l.push(a,t[a]);if(r=new Array(l.length/2),n=new Uint32Array(l.length/2),1===r.length)return c[l.pop().index]=1,c;for(a=0,o=l.length/2;a<o;++a)r[a]=l.pop(),n[a]=r[a].value;for(i=this.reversePackageMerge_(n,n.length,e),a=0,o=r.length;a<o;++a)c[r[a].index]=i[a];return c},nn.RawDeflate.prototype.reversePackageMerge_=function(t,e,r){var n,i,a,o,s,l=new Uint16Array(r),c=new Uint8Array(r),u=new Uint8Array(e),f=new Array(r),h=new Array(r),p=new Array(r),d=(1<<r)-e,g=1<<r-1;function m(t){var r=h[t][p[t]];r===e?(m(t+1),m(t+1)):--u[r],++p[t]}for(l[r-1]=e,i=0;i<r;++i)d<g?c[i]=0:(c[i]=1,d-=g),d<<=1,l[r-2-i]=(l[r-1-i]/2|0)+e;for(l[0]=c[0],f[0]=new Array(l[0]),h[0]=new Array(l[0]),i=1;i<r;++i)l[i]>2*l[i-1]+c[i]&&(l[i]=2*l[i-1]+c[i]),f[i]=new Array(l[i]),h[i]=new Array(l[i]);for(n=0;n<e;++n)u[n]=r;for(a=0;a<l[r-1];++a)f[r-1][a]=t[a],h[r-1][a]=a;for(n=0;n<r;++n)p[n]=0;for(1===c[r-1]&&(--u[0],++p[r-1]),i=r-2;i>=0;--i){for(n=0,o=0,s=p[i+1],a=0;a<l[i];a++)(o=f[i+1][s]+f[i+1][s+1])>t[n]?(f[i][a]=o,h[i][a]=e,s+=2):(f[i][a]=t[n],h[i][a]=n,++n);p[i]=0,1===c[i]&&m(i)}return u},nn.RawDeflate.prototype.getCodesFromLengths_=function(t){var e,r,n,i,a=new Uint16Array(t.length),o=[],s=[],l=0;for(e=0,r=t.length;e<r;e++)o[t[e]]=1+(0|o[t[e]]);for(e=1,r=nn.RawDeflate.MaxCodeLength;e<=r;e++)s[e]=l,l+=0|o[e],l<<=1;for(e=0,r=t.length;e<r;e++)for(l=s[t[e]],s[t[e]]+=1,a[e]=0,n=0,i=t[e];n<i;n++)a[e]=a[e]<<1|1&l,l>>>=1;return a},nn.Unzip=function(t,e){e=e||{},this.input=t instanceof Array?new Uint8Array(t):t,this.ip=0,this.eocdrOffset,this.numberOfThisDisk,this.startDisk,this.totalEntriesThisDisk,this.totalEntries,this.centralDirectorySize,this.centralDirectoryOffset,this.commentLength,this.comment,this.fileHeaderList,this.filenameToIndex,this.verify=e.verify||!1,this.password=e.password},nn.Unzip.CompressionMethod=nn.Zip.CompressionMethod,nn.Unzip.FileHeaderSignature=nn.Zip.FileHeaderSignature,nn.Unzip.LocalFileHeaderSignature=nn.Zip.LocalFileHeaderSignature,nn.Unzip.CentralDirectorySignature=nn.Zip.CentralDirectorySignature,nn.Unzip.FileHeader=function(t,e){this.input=t,this.offset=e,this.length,this.version,this.os,this.needVersion,this.flags,this.compression,this.time,this.date,this.crc32,this.compressedSize,this.plainSize,this.fileNameLength,this.extraFieldLength,this.fileCommentLength,this.diskNumberStart,this.internalFileAttributes,this.externalFileAttributes,this.relativeOffset,this.filename,this.extraField,this.comment},nn.Unzip.FileHeader.prototype.parse=function(){var t=this.input,e=this.offset;if(t[e++]!==nn.Unzip.FileHeaderSignature[0]||t[e++]!==nn.Unzip.FileHeaderSignature[1]||t[e++]!==nn.Unzip.FileHeaderSignature[2]||t[e++]!==nn.Unzip.FileHeaderSignature[3])throw new Error("invalid file header signature");this.version=t[e++],this.os=t[e++],this.needVersion=t[e++]|t[e++]<<8,this.flags=t[e++]|t[e++]<<8,this.compression=t[e++]|t[e++]<<8,this.time=t[e++]|t[e++]<<8,this.date=t[e++]|t[e++]<<8,this.crc32=(t[e++]|t[e++]<<8|t[e++]<<16|t[e++]<<24)>>>0,this.compressedSize=(t[e++]|t[e++]<<8|t[e++]<<16|t[e++]<<24)>>>0,this.plainSize=(t[e++]|t[e++]<<8|t[e++]<<16|t[e++]<<24)>>>0,this.fileNameLength=t[e++]|t[e++]<<8,this.extraFieldLength=t[e++]|t[e++]<<8,this.fileCommentLength=t[e++]|t[e++]<<8,this.diskNumberStart=t[e++]|t[e++]<<8,this.internalFileAttributes=t[e++]|t[e++]<<8,this.externalFileAttributes=t[e++]|t[e++]<<8|t[e++]<<16|t[e++]<<24,this.relativeOffset=(t[e++]|t[e++]<<8|t[e++]<<16|t[e++]<<24)>>>0,this.filename=String.fromCharCode.apply(null,t.subarray(e,e+=this.fileNameLength)),this.extraField=t.subarray(e,e+=this.extraFieldLength),this.comment=t.subarray(e,e+this.fileCommentLength),this.length=e-this.offset},nn.Unzip.LocalFileHeader=function(t,e){this.input=t,this.offset=e,this.length,this.needVersion,this.flags,this.compression,this.time,this.date,this.crc32,this.compressedSize,this.plainSize,this.fileNameLength,this.extraFieldLength,this.filename,this.extraField},nn.Unzip.LocalFileHeader.Flags=nn.Zip.Flags,nn.Unzip.LocalFileHeader.prototype.parse=function(){var t=this.input,e=this.offset;if(t[e++]!==nn.Unzip.LocalFileHeaderSignature[0]||t[e++]!==nn.Unzip.LocalFileHeaderSignature[1]||t[e++]!==nn.Unzip.LocalFileHeaderSignature[2]||t[e++]!==nn.Unzip.LocalFileHeaderSignature[3])throw new Error("invalid local file header signature");this.needVersion=t[e++]|t[e++]<<8,this.flags=t[e++]|t[e++]<<8,this.compression=t[e++]|t[e++]<<8,this.time=t[e++]|t[e++]<<8,this.date=t[e++]|t[e++]<<8,this.crc32=(t[e++]|t[e++]<<8|t[e++]<<16|t[e++]<<24)>>>0,this.compressedSize=(t[e++]|t[e++]<<8|t[e++]<<16|t[e++]<<24)>>>0,this.plainSize=(t[e++]|t[e++]<<8|t[e++]<<16|t[e++]<<24)>>>0,this.fileNameLength=t[e++]|t[e++]<<8,this.extraFieldLength=t[e++]|t[e++]<<8,this.filename=String.fromCharCode.apply(null,t.subarray(e,e+=this.fileNameLength)),this.extraField=t.subarray(e,e+=this.extraFieldLength),this.length=e-this.offset},nn.Unzip.prototype.searchEndOfCentralDirectoryRecord=function(){var t,e=this.input;for(t=e.length-12;t>0;--t)if(e[t]===nn.Unzip.CentralDirectorySignature[0]&&e[t+1]===nn.Unzip.CentralDirectorySignature[1]&&e[t+2]===nn.Unzip.CentralDirectorySignature[2]&&e[t+3]===nn.Unzip.CentralDirectorySignature[3])return void(this.eocdrOffset=t);throw new Error("End of Central Directory Record not found")},nn.Unzip.prototype.parseEndOfCentralDirectoryRecord=function(){var t,e=this.input;if(this.eocdrOffset||this.searchEndOfCentralDirectoryRecord(),t=this.eocdrOffset,e[t++]!==nn.Unzip.CentralDirectorySignature[0]||e[t++]!==nn.Unzip.CentralDirectorySignature[1]||e[t++]!==nn.Unzip.CentralDirectorySignature[2]||e[t++]!==nn.Unzip.CentralDirectorySignature[3])throw new Error("invalid signature");this.numberOfThisDisk=e[t++]|e[t++]<<8,this.startDisk=e[t++]|e[t++]<<8,this.totalEntriesThisDisk=e[t++]|e[t++]<<8,this.totalEntries=e[t++]|e[t++]<<8,this.centralDirectorySize=(e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24)>>>0,this.centralDirectoryOffset=(e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24)>>>0,this.commentLength=e[t++]|e[t++]<<8,this.comment=e.subarray(t,t+this.commentLength)},nn.Unzip.prototype.parseFileHeader=function(){var t,e,r,n,i=[],a={};if(!this.fileHeaderList){for(void 0===this.centralDirectoryOffset&&this.parseEndOfCentralDirectoryRecord(),t=this.centralDirectoryOffset,r=0,n=this.totalEntries;r<n;++r)(e=new nn.Unzip.FileHeader(this.input,t)).parse(),t+=e.length,i[r]=e,a[e.filename]=r;if(this.centralDirectorySize<t-this.centralDirectoryOffset)throw new Error("invalid file header size");this.fileHeaderList=i,this.filenameToIndex=a}},nn.Unzip.prototype.getFileData=function(t,e){e=e||{};var r,n,i,a,o,s,l,c,u=this.input,f=this.fileHeaderList;if(f||this.parseFileHeader(),void 0===f[t])throw new Error("wrong index");if(n=f[t].relativeOffset,(r=new nn.Unzip.LocalFileHeader(this.input,n)).parse(),n+=r.length,i=r.compressedSize,0!=(r.flags&nn.Unzip.LocalFileHeader.Flags.ENCRYPT)){if(!e.password&&!this.password)throw new Error("please set password");for(s=this.createDecryptionKey(e.password||this.password),l=n,c=n+12;l<c;++l)this.decode(s,u[l]);for(l=n+=12,c=n+(i-=12);l<c;++l)u[l]=this.decode(s,u[l])}switch(r.compression){case nn.Unzip.CompressionMethod.STORE:a=this.input.subarray(n,n+i);break;case nn.Unzip.CompressionMethod.DEFLATE:a=new nn.RawInflate(this.input,{index:n,bufferSize:r.plainSize}).decompress();break;default:throw new Error("unknown compression type")}if(this.verify&&(o=nn.CRC32.calc(a),r.crc32!==o))throw new Error("wrong crc: file=0x"+r.crc32.toString(16)+", data=0x"+o.toString(16));return a},nn.Unzip.prototype.getFilenames=function(){var t,e,r,n=[];for(this.fileHeaderList||this.parseFileHeader(),t=0,e=(r=this.fileHeaderList).length;t<e;++t)n[t]=r[t].filename;return n},nn.Unzip.prototype.decompress=function(t,e){var r;if(this.filenameToIndex||this.parseFileHeader(),void 0===(r=this.filenameToIndex[t]))throw new Error(t+" not found");return this.getFileData(r,e)},nn.Unzip.prototype.setPassword=function(t){this.password=t},nn.Unzip.prototype.decode=function(t,e){return e^=this.getByte(t),this.updateKeys(t,e),e},nn.Unzip.prototype.updateKeys=nn.Zip.prototype.updateKeys,nn.Unzip.prototype.createDecryptionKey=nn.Zip.prototype.createEncryptionKey,nn.Unzip.prototype.getByte=nn.Zip.prototype.getByte,nn.Util.stringToByteArray=function(t){var e,r,n=t.split("");for(e=0,r=n.length;e<r;e++)n[e]=(255&n[e].charCodeAt(0))>>>0;return n},nn.Adler32=function(t){return"string"==typeof t&&(t=nn.Util.stringToByteArray(t)),nn.Adler32.update(1,t)},nn.Adler32.update=function(t,e){for(var r,n=65535&t,i=t>>>16&65535,a=e.length,o=0;a>0;){a-=r=a>nn.Adler32.OptimizationParameter?nn.Adler32.OptimizationParameter:a;do{i+=n+=e[o++]}while(--r);n%=65521,i%=65521}return(i<<16|n)>>>0},nn.Adler32.OptimizationParameter=1024,nn.BitStream=function(t,e){if(this.index="number"==typeof e?e:0,this.bitindex=0,this.buffer=t instanceof Uint8Array?t:new Uint8Array(nn.BitStream.DefaultBlockSize),2*this.buffer.length<=this.index)throw new Error("invalid index");this.buffer.length<=this.index&&this.expandBuffer()},nn.BitStream.DefaultBlockSize=32768,nn.BitStream.prototype.expandBuffer=function(){var t=this.buffer,e=t.length,r=new Uint8Array(e<<1);return r.set(t),this.buffer=r},nn.BitStream.prototype.writeBits=function(t,e,r){var n,i=this.buffer,a=this.index,o=this.bitindex,s=i[a];if(r&&e>1&&(t=e>8?function(t){return nn.BitStream.ReverseTable[255&t]<<24|nn.BitStream.ReverseTable[t>>>8&255]<<16|nn.BitStream.ReverseTable[t>>>16&255]<<8|nn.BitStream.ReverseTable[t>>>24&255]}(t)>>32-e:nn.BitStream.ReverseTable[t]>>8-e),e+o<8)s=s<<e|t,o+=e;else for(n=0;n<e;++n)s=s<<1|t>>e-n-1&1,8==++o&&(o=0,i[a++]=nn.BitStream.ReverseTable[s],s=0,a===i.length&&(i=this.expandBuffer()));i[a]=s,this.buffer=i,this.bitindex=o,this.index=a},nn.BitStream.prototype.finish=function(){var t=this.buffer,e=this.index;return this.bitindex>0&&(t[e]<<=8-this.bitindex,t[e]=nn.BitStream.ReverseTable[t[e]],e++),t.subarray(0,e)},nn.BitStream.ReverseTable=function(){var t,e=new Uint8Array(256);for(t=0;t<256;++t)e[t]=function(t){var e=t,r=7;for(t>>>=1;t;t>>>=1)e<<=1,e|=1&t,--r;return(e<<r&255)>>>0}(t);return e}(),nn.CRC32.calc=function(t,e,r){return nn.CRC32.update(t,0,e,r)},nn.CRC32.update=function(t,e,r,n){var i=nn.CRC32.Table,a="number"==typeof r?r:r=0,o="number"==typeof n?n:t.length;for(e^=4294967295,a=7&o;a--;++r)e=e>>>8^i[255&(e^t[r])];for(a=o>>3;a--;r+=8)e=(e=(e=(e=(e=(e=(e=(e=e>>>8^i[255&(e^t[r])])>>>8^i[255&(e^t[r+1])])>>>8^i[255&(e^t[r+2])])>>>8^i[255&(e^t[r+3])])>>>8^i[255&(e^t[r+4])])>>>8^i[255&(e^t[r+5])])>>>8^i[255&(e^t[r+6])])>>>8^i[255&(e^t[r+7])];return(4294967295^e)>>>0},nn.CRC32.single=function(t,e){return(nn.CRC32.Table[255&(t^e)]^t>>>8)>>>0},nn.CRC32.Table_=[0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117],nn.CRC32.Table=new Uint32Array(nn.CRC32.Table_),nn.Deflate=function(t,e){this.input=t,this.output=new Uint8Array(nn.Deflate.DefaultBufferSize),this.compressionType=nn.Deflate.CompressionType.DYNAMIC,this.rawDeflate;var r,n={};for(r in!e&&(e={})||"number"==typeof e.compressionType&&(this.compressionType=e.compressionType),e)n[r]=e[r];n.outputBuffer=this.output,this.rawDeflate=new nn.RawDeflate(this.input,n)},nn.Deflate.DefaultBufferSize=32768,nn.Deflate.CompressionType=nn.RawDeflate.CompressionType,nn.Deflate.compress=function(t,e){return new nn.Deflate(t,e).compress()},nn.Deflate.prototype.compress=function(){var t,e,r,n,i,a,o,s=0;switch(o=this.output,t=nn.CompressionMethod.DEFLATE){case nn.CompressionMethod.DEFLATE:e=Math.LOG2E*Math.log(nn.RawDeflate.WindowSize)-8;break;default:throw new Error("invalid compression method")}switch(r=e<<4|t,o[s++]=r,0,t){case nn.CompressionMethod.DEFLATE:switch(this.compressionType){case nn.Deflate.CompressionType.NONE:i=0;break;case nn.Deflate.CompressionType.FIXED:i=1;break;case nn.Deflate.CompressionType.DYNAMIC:i=2;break;default:throw new Error("unsupported compression type")}break;default:throw new Error("invalid compression method")}return n=i<<6|0,n|=31-(256*r+n)%31,o[s++]=n,a=nn.Adler32(this.input),this.rawDeflate.op=s,s=(o=this.rawDeflate.compress()).length,(o=new Uint8Array(o.buffer)).length<=s+4&&(this.output=new Uint8Array(o.length+4),this.output.set(o),o=this.output),(o=o.subarray(0,s+4))[s++]=a>>24&255,o[s++]=a>>16&255,o[s++]=a>>8&255,o[s++]=255&a,o},sn="undefined"==typeof btoa?require("btoa"):btoa,"object"==typeof process&&"undefined"==typeof window&&(global.atob=function(t){return Buffer.from(t,"base64").toString("binary")});const dn={check:[512,512,[],"f00c","M173.898 439.404l-166.4-166.4c-9.997-9.997-9.997-26.206 0-36.204l36.203-36.204c9.997-9.998 26.207-9.998 36.204 0L192 312.69 432.095 72.596c9.997-9.997 26.207-9.997 36.204 0l36.203 36.204c9.997 9.997 9.997 26.206 0 36.204l-294.4 294.401c-9.998 9.997-26.207 9.997-36.204-.001z"],cog:[512,512,[],"f013","M444.788 291.1l42.616 24.599c4.867 2.809 7.126 8.618 5.459 13.985-11.07 35.642-29.97 67.842-54.689 94.586a12.016 12.016 0 0 1-14.832 2.254l-42.584-24.595a191.577 191.577 0 0 1-60.759 35.13v49.182a12.01 12.01 0 0 1-9.377 11.718c-34.956 7.85-72.499 8.256-109.219.007-5.49-1.233-9.403-6.096-9.403-11.723v-49.184a191.555 191.555 0 0 1-60.759-35.13l-42.584 24.595a12.016 12.016 0 0 1-14.832-2.254c-24.718-26.744-43.619-58.944-54.689-94.586-1.667-5.366.592-11.175 5.459-13.985L67.212 291.1a193.48 193.48 0 0 1 0-70.199l-42.616-24.599c-4.867-2.809-7.126-8.618-5.459-13.985 11.07-35.642 29.97-67.842 54.689-94.586a12.016 12.016 0 0 1 14.832-2.254l42.584 24.595a191.577 191.577 0 0 1 60.759-35.13V25.759a12.01 12.01 0 0 1 9.377-11.718c34.956-7.85 72.499-8.256 109.219-.007 5.49 1.233 9.403 6.096 9.403 11.723v49.184a191.555 191.555 0 0 1 60.759 35.13l42.584-24.595a12.016 12.016 0 0 1 14.832 2.254c24.718 26.744 43.619 58.944 54.689 94.586 1.667 5.366-.592 11.175-5.459 13.985L444.788 220.9a193.485 193.485 0 0 1 0 70.2zM336 256c0-44.112-35.888-80-80-80s-80 35.888-80 80 35.888 80 80 80 80-35.888 80-80z"],exclamation:[192,512,[],"f12a","M176 432c0 44.112-35.888 80-80 80s-80-35.888-80-80 35.888-80 80-80 80 35.888 80 80zM25.26 25.199l13.6 272C39.499 309.972 50.041 320 62.83 320h66.34c12.789 0 23.331-10.028 23.97-22.801l13.6-272C167.425 11.49 156.496 0 142.77 0H49.23C35.504 0 24.575 11.49 25.26 25.199z"],"exclamation-circle":[512,512,[],"f06a","M504 256c0 136.997-111.043 248-248 248S8 392.997 8 256C8 119.083 119.043 8 256 8s248 111.083 248 248zm-248 50c-25.405 0-46 20.595-46 46s20.595 46 46 46 46-20.595 46-46-20.595-46-46-46zm-43.673-165.346l7.418 136c.347 6.364 5.609 11.346 11.982 11.346h48.546c6.373 0 11.635-4.982 11.982-11.346l7.418-136c.375-6.874-5.098-12.654-11.982-12.654h-63.383c-6.884 0-12.356 5.78-11.981 12.654z"],"exclamation-triangle":[576,512,[],"f071","M569.517 440.013C587.975 472.007 564.806 512 527.94 512H48.054c-36.937 0-59.999-40.055-41.577-71.987L246.423 23.985c18.467-32.009 64.72-31.951 83.154 0l239.94 416.028zM288 354c-25.405 0-46 20.595-46 46s20.595 46 46 46 46-20.595 46-46-20.595-46-46-46zm-43.673-165.346l7.418 136c.347 6.364 5.609 11.346 11.982 11.346h48.546c6.373 0 11.635-4.982 11.982-11.346l7.418-136c.375-6.874-5.098-12.654-11.982-12.654h-63.383c-6.884 0-12.356 5.78-11.981 12.654z"],minus:[448,512,[],"f068","M424 318.2c13.3 0 24-10.7 24-24v-76.4c0-13.3-10.7-24-24-24H24c-13.3 0-24 10.7-24 24v76.4c0 13.3 10.7 24 24 24h400z"],"minus-circle":[512,512,[],"f056","M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8zM124 296c-6.6 0-12-5.4-12-12v-56c0-6.6 5.4-12 12-12h264c6.6 0 12 5.4 12 12v56c0 6.6-5.4 12-12 12H124z"],"minus-square":[448,512,[],"f146","M400 32H48C21.5 32 0 53.5 0 80v352c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V80c0-26.5-21.5-48-48-48zM92 296c-6.6 0-12-5.4-12-12v-56c0-6.6 5.4-12 12-12h264c6.6 0 12 5.4 12 12v56c0 6.6-5.4 12-12 12H92z"],plus:[448,512,[],"f067","M448 294.2v-76.4c0-13.3-10.7-24-24-24H286.2V56c0-13.3-10.7-24-24-24h-76.4c-13.3 0-24 10.7-24 24v137.8H24c-13.3 0-24 10.7-24 24v76.4c0 13.3 10.7 24 24 24h137.8V456c0 13.3 10.7 24 24 24h76.4c13.3 0 24-10.7 24-24V318.2H424c13.3 0 24-10.7 24-24z"],"plus-circle":[512,512,[],"f055","M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8zm144 276c0 6.6-5.4 12-12 12h-92v92c0 6.6-5.4 12-12 12h-56c-6.6 0-12-5.4-12-12v-92h-92c-6.6 0-12-5.4-12-12v-56c0-6.6 5.4-12 12-12h92v-92c0-6.6 5.4-12 12-12h56c6.6 0 12 5.4 12 12v92h92c6.6 0 12 5.4 12 12v56z"],"plus-square":[448,512,[],"f0fe","M400 32H48C21.5 32 0 53.5 0 80v352c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V80c0-26.5-21.5-48-48-48zm-32 252c0 6.6-5.4 12-12 12h-92v92c0 6.6-5.4 12-12 12h-56c-6.6 0-12-5.4-12-12v-92H92c-6.6 0-12-5.4-12-12v-56c0-6.6 5.4-12 12-12h92v-92c0-6.6 5.4-12 12-12h56c6.6 0 12 5.4 12 12v92h92c6.6 0 12 5.4 12 12v56z"],question:[384,512,[],"f128","M202.021 0C122.202 0 70.503 32.703 29.914 91.026c-7.363 10.58-5.093 25.086 5.178 32.874l43.138 32.709c10.373 7.865 25.132 6.026 33.253-4.148 25.049-31.381 43.63-49.449 82.757-49.449 30.764 0 68.816 19.799 68.816 49.631 0 22.552-18.617 34.134-48.993 51.164-35.423 19.86-82.299 44.576-82.299 106.405V320c0 13.255 10.745 24 24 24h72.471c13.255 0 24-10.745 24-24v-5.773c0-42.86 125.268-44.645 125.268-160.627C377.504 66.256 286.902 0 202.021 0zM192 373.459c-38.196 0-69.271 31.075-69.271 69.271 0 38.195 31.075 69.27 69.271 69.27s69.271-31.075 69.271-69.271-31.075-69.27-69.271-69.27z"],save:[448,512,[],"f0c7","M433.941 129.941l-83.882-83.882A48 48 0 0 0 316.118 32H48C21.49 32 0 53.49 0 80v352c0 26.51 21.49 48 48 48h352c26.51 0 48-21.49 48-48V163.882a48 48 0 0 0-14.059-33.941zM224 416c-35.346 0-64-28.654-64-64 0-35.346 28.654-64 64-64s64 28.654 64 64c0 35.346-28.654 64-64 64zm96-304.52V212c0 6.627-5.373 12-12 12H76c-6.627 0-12-5.373-12-12V108c0-6.627 5.373-12 12-12h228.52c3.183 0 6.235 1.264 8.485 3.515l3.48 3.48A11.996 11.996 0 0 1 320 111.48z"],search:[512,512,[],"f002","M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"],share:[512,512,[],"f064","M503.691 189.836L327.687 37.851C312.281 24.546 288 35.347 288 56.015v80.053C127.371 137.907 0 170.1 0 322.326c0 61.441 39.581 122.309 83.333 154.132 13.653 9.931 33.111-2.533 28.077-18.631C66.066 312.814 132.917 274.316 288 272.085V360c0 20.7 24.3 31.453 39.687 18.164l176.004-152c11.071-9.562 11.086-26.753 0-36.328z"],spinner:[512,512,[],"f110","M304 48c0 26.51-21.49 48-48 48s-48-21.49-48-48 21.49-48 48-48 48 21.49 48 48zm-48 368c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48-21.49-48-48-48zm208-208c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48-21.49-48-48-48zM96 256c0-26.51-21.49-48-48-48S0 229.49 0 256s21.49 48 48 48 48-21.49 48-48zm12.922 99.078c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48c0-26.509-21.491-48-48-48zm294.156 0c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48c0-26.509-21.49-48-48-48zM108.922 60.922c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48-21.491-48-48-48z"],square:[448,512,[],"f0c8","M400 32H48C21.5 32 0 53.5 0 80v352c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V80c0-26.5-21.5-48-48-48z"],"square-full":[512,512,[],"f45c","M512 512H0V0h512v512z"],times:[384,512,[],"f00d","M323.1 441l53.9-53.9c9.4-9.4 9.4-24.5 0-33.9L279.8 256l97.2-97.2c9.4-9.4 9.4-24.5 0-33.9L323.1 71c-9.4-9.4-24.5-9.4-33.9 0L192 168.2 94.8 71c-9.4-9.4-24.5-9.4-33.9 0L7 124.9c-9.4 9.4-9.4 24.5 0 33.9l97.2 97.2L7 353.2c-9.4 9.4-9.4 24.5 0 33.9L60.9 441c9.4 9.4 24.5 9.4 33.9 0l97.2-97.2 97.2 97.2c9.3 9.3 24.5 9.3 33.9 0z"],"times-circle":[512,512,[],"f057","M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8zm121.6 313.1c4.7 4.7 4.7 12.3 0 17L338 377.6c-4.7 4.7-12.3 4.7-17 0L256 312l-65.1 65.6c-4.7 4.7-12.3 4.7-17 0L134.4 338c-4.7-4.7-4.7-12.3 0-17l65.6-65-65.6-65.1c-4.7-4.7-4.7-12.3 0-17l39.6-39.6c4.7-4.7 12.3-4.7 17 0l65 65.7 65.1-65.6c4.7-4.7 12.3-4.7 17 0l39.6 39.6c4.7 4.7 4.7 12.3 0 17L312 256l65.6 65.1z"],wrench:[512,512,[],"f0ad","M481.156 200c9.3 0 15.12 10.155 10.325 18.124C466.295 259.992 420.419 288 368 288c-79.222 0-143.501-63.974-143.997-143.079C223.505 65.469 288.548-.001 368.002 0c52.362.001 98.196 27.949 123.4 69.743C496.24 77.766 490.523 88 481.154 88H376l-40 56 40 56h105.156zm-171.649 93.003L109.255 493.255c-24.994 24.993-65.515 24.994-90.51 0-24.993-24.994-24.993-65.516 0-90.51L218.991 202.5c16.16 41.197 49.303 74.335 90.516 90.503zM104 432c0-13.255-10.745-24-24-24s-24 10.745-24 24 10.745 24 24 24 24-10.745 24-24z"]};var gn={Huffman:{},Util:{},CRC32:{},CompressionMethod:{DEFLATE:8,RESERVED:15},Zip:function(t){t=t||{},this.files=[],this.comment=t.comment,this.password}};gn.Zip.CompressionMethod={STORE:0,DEFLATE:8},gn.Zip.OperatingSystem={MSDOS:0,UNIX:3,MACINTOSH:7},gn.Zip.Flags={ENCRYPT:1,DESCRIPTOR:8,UTF8:2048},gn.Zip.FileHeaderSignature=[80,75,1,2],gn.Zip.LocalFileHeaderSignature=[80,75,3,4],gn.Zip.CentralDirectorySignature=[80,75,5,6],gn.Zip.prototype.addFile=function(t,e){(e=e||{}).filename;var r,n=t.length,i=0;if(t instanceof Array&&(t=new Uint8Array(t)),"number"!=typeof e.compressionMethod&&(e.compressionMethod=gn.Zip.CompressionMethod.DEFLATE),e.compress)switch(e.compressionMethod){case gn.Zip.CompressionMethod.STORE:break;case gn.Zip.CompressionMethod.DEFLATE:i=gn.CRC32.calc(t),t=this.deflateWithOption(t,e),r=!0;break;default:throw new Error("unknown compression method:"+e.compressionMethod)}this.files.push({buffer:t,option:e,compressed:r,encrypted:!1,size:n,crc32:i})},gn.Zip.prototype.setPassword=function(t){this.password=t},gn.Zip.prototype.compress=function(){var t,e,r,n,i,a,o,s,l,c,u,f,h,p,d,g,m,w,y,b,v,S,R,E,x,C,D=this.files,k=0,L=0;for(R=0,E=D.length;R<E;++R){if(p=(t=D[R]).option.filename?t.option.filename.length:0,d=t.option.extraField?t.option.extraField.length:0,g=t.option.comment?t.option.comment.length:0,!t.compressed)switch(t.crc32=gn.CRC32.calc(t.buffer),t.option.compressionMethod){case gn.Zip.CompressionMethod.STORE:break;case gn.Zip.CompressionMethod.DEFLATE:t.buffer=this.deflateWithOption(t.buffer,t.option),t.compressed=!0;break;default:throw new Error("unknown compression method:"+t.option.compressionMethod)}if(void 0!==t.option.password||void 0!==this.password){for(S=this.createEncryptionKey(t.option.password||this.password),b=t.buffer,(v=new Uint8Array(b.length+12)).set(b,12),b=v,x=0;x<12;++x)b[x]=this.encode(S,11===R?255&t.crc32:256*Math.random()|0);for(C=b.length;x<C;++x)b[x]=this.encode(S,b[x]);t.buffer=b}k+=30+p+t.buffer.length,L+=46+p+g}for(a=22+(this.comment?this.comment.length:0),e=new Uint8Array(k+L+a),r=0,i=(n=k)+L,R=0,E=D.length;R<E;++R)p=(t=D[R]).option.filename?t.option.filename.length:0,d=0,g=t.option.comment?t.option.comment.length:0,o=r,e[r++]=gn.Zip.LocalFileHeaderSignature[0],e[r++]=gn.Zip.LocalFileHeaderSignature[1],e[r++]=gn.Zip.LocalFileHeaderSignature[2],e[r++]=gn.Zip.LocalFileHeaderSignature[3],e[n++]=gn.Zip.FileHeaderSignature[0],e[n++]=gn.Zip.FileHeaderSignature[1],e[n++]=gn.Zip.FileHeaderSignature[2],e[n++]=gn.Zip.FileHeaderSignature[3],20,e[n++]=20,e[n++]=t.option.os||gn.Zip.OperatingSystem.MSDOS,e[r++]=e[n++]=20,e[r++]=e[n++]=0,s=0,(t.option.password||this.password)&&(s|=gn.Zip.Flags.ENCRYPT),e[r++]=e[n++]=255&s,e[r++]=e[n++]=s>>8&255,l=t.option.compressionMethod,e[r++]=e[n++]=255&l,e[r++]=e[n++]=l>>8&255,c=t.option.date||new Date,e[r++]=e[n++]=(7&c.getMinutes())<<5|c.getSeconds()/2|0,e[r++]=e[n++]=c.getHours()<<3|c.getMinutes()>>3,e[r++]=e[n++]=(c.getMonth()+1&7)<<5|c.getDate(),e[r++]=e[n++]=(c.getFullYear()-1980&127)<<1|c.getMonth()+1>>3,u=t.crc32,e[r++]=e[n++]=255&u,e[r++]=e[n++]=u>>8&255,e[r++]=e[n++]=u>>16&255,e[r++]=e[n++]=u>>24&255,f=t.buffer.length,e[r++]=e[n++]=255&f,e[r++]=e[n++]=f>>8&255,e[r++]=e[n++]=f>>16&255,e[r++]=e[n++]=f>>24&255,h=t.size,e[r++]=e[n++]=255&h,e[r++]=e[n++]=h>>8&255,e[r++]=e[n++]=h>>16&255,e[r++]=e[n++]=h>>24&255,e[r++]=e[n++]=255&p,e[r++]=e[n++]=p>>8&255,e[r++]=e[n++]=255&d,e[r++]=e[n++]=d>>8&255,e[n++]=255&g,e[n++]=g>>8&255,e[n++]=0,e[n++]=0,e[n++]=0,e[n++]=0,e[n++]=0,e[n++]=0,e[n++]=0,e[n++]=0,e[n++]=255&o,e[n++]=o>>8&255,e[n++]=o>>16&255,e[n++]=o>>24&255,(m=t.option.filename)&&(e.set(m,r),e.set(m,n),r+=p,n+=p),(w=t.option.extraField)&&(e.set(w,r),e.set(w,n),r+=d,n+=d),(y=t.option.comment)&&(e.set(y,n),n+=g),e.set(t.buffer,r),r+=t.buffer.length;return e[i++]=gn.Zip.CentralDirectorySignature[0],e[i++]=gn.Zip.CentralDirectorySignature[1],e[i++]=gn.Zip.CentralDirectorySignature[2],e[i++]=gn.Zip.CentralDirectorySignature[3],e[i++]=0,e[i++]=0,e[i++]=0,e[i++]=0,e[i++]=255&E,e[i++]=E>>8&255,e[i++]=255&E,e[i++]=E>>8&255,e[i++]=255&L,e[i++]=L>>8&255,e[i++]=L>>16&255,e[i++]=L>>24&255,e[i++]=255&k,e[i++]=k>>8&255,e[i++]=k>>16&255,e[i++]=k>>24&255,g=this.comment?this.comment.length:0,e[i++]=255&g,e[i++]=g>>8&255,this.comment&&(e.set(this.comment,i),i+=g),e},gn.Zip.prototype.deflateWithOption=function(t,e){return new gn.RawDeflate(t,e.deflateOption).compress()},gn.Zip.prototype.getByte=function(t){var e=65535&t[2]|2;return e*(1^e)>>8&255},gn.Zip.prototype.encode=function(t,e){var r=this.getByte(t);return this.updateKeys(t,e),r^e},gn.Zip.prototype.updateKeys=function(t,e){t[0]=gn.CRC32.single(t[0],e),t[1]=1+(6681*(20173*(t[1]+(255&t[0]))>>>0)>>>0)>>>0,t[2]=gn.CRC32.single(t[2],t[1]>>>24)},gn.Zip.prototype.createEncryptionKey=function(t){var e,r,n=[305419896,591751049,878082192];for(n=new Uint32Array(n),e=0,r=t.length;e<r;++e)this.updateKeys(n,255&t[e]);return n},gn.Huffman.buildHuffmanTable=function(t){var e,r,n,i,a,o,s,l,c,u,f,h=t.length,p=0,d=Number.POSITIVE_INFINITY;for(l=0,c=h;l<c;++l)t[l]>p&&(p=t[l]),t[l]<d&&(d=t[l]);for(e=1<<p,r=new Uint32Array(e),n=1,i=0,a=2;n<=p;){for(l=0;l<h;++l)if(t[l]===n){for(o=0,s=i,u=0;u<n;++u)o=o<<1|1&s,s>>=1;for(f=n<<16|l,u=o;u<e;u+=a)r[u]=f;++i}++n,i<<=1,a<<=1}return[r,p,d]};var mn=gn.Huffman.buildHuffmanTable;gn.RawInflate=function(t,e){switch(this.buffer,this.blocks=[],this.bufferSize=32768,this.totalpos=0,this.ip=0,this.bitsbuf=0,this.bitsbuflen=0,this.input=new Uint8Array(t),this.output,this.op,this.bfinal=!1,this.bufferType=gn.RawInflate.BufferType.ADAPTIVE,this.resize=!1,!e&&(e={})||(e.index&&(this.ip=e.index),e.bufferSize&&(this.bufferSize=e.bufferSize),e.bufferType&&(this.bufferType=e.bufferType),e.resize&&(this.resize=e.resize)),this.bufferType){case gn.RawInflate.BufferType.BLOCK:this.op=gn.RawInflate.MaxBackwardLength,this.output=new Uint8Array(gn.RawInflate.MaxBackwardLength+this.bufferSize+gn.RawInflate.MaxCopyLength);break;case gn.RawInflate.BufferType.ADAPTIVE:this.op=0,this.output=new Uint8Array(this.bufferSize);break;default:throw new Error("invalid inflate mode")}},gn.RawInflate.BufferType={BLOCK:0,ADAPTIVE:1},gn.RawInflate.prototype.decompress=function(){for(;!this.bfinal;)this.parseBlock();switch(this.bufferType){case gn.RawInflate.BufferType.BLOCK:return this.concatBufferBlock();case gn.RawInflate.BufferType.ADAPTIVE:return this.concatBufferDynamic();default:throw new Error("invalid inflate mode")}},gn.RawInflate.MaxBackwardLength=32768,gn.RawInflate.MaxCopyLength=258,gn.RawInflate.Order=new Uint16Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),gn.RawInflate.LengthCodeTable=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,258,258]),gn.RawInflate.LengthExtraTable=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0]),gn.RawInflate.DistCodeTable=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577]),gn.RawInflate.DistExtraTable=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),gn.RawInflate.FixedLiteralLengthTable=function(){var t,e,r=new Uint8Array(288);for(t=0,e=r.length;t<e;++t)r[t]=t<=143?8:t<=255?9:t<=279?7:8;return mn(r)}(),gn.RawInflate.FixedDistanceTable=function(){var t,e,r=new Uint8Array(30);for(t=0,e=r.length;t<e;++t)r[t]=5;return mn(r)}(),gn.RawInflate.prototype.parseBlock=function(){var t=this.readBits(3);switch(1&t&&(this.bfinal=!0),t>>>=1){case 0:this.parseUncompressedBlock();break;case 1:this.parseFixedHuffmanBlock();break;case 2:this.parseDynamicHuffmanBlock();break;default:throw new Error("unknown BTYPE: "+t)}},gn.RawInflate.prototype.readBits=function(t){var e,r=this.bitsbuf,n=this.bitsbuflen,i=this.input,a=this.ip;if(a+(t-n+7>>3)>=i.length)throw new Error("input buffer is broken");for(;n<t;)r|=i[a++]<<n,n+=8;return e=r&(1<<t)-1,r>>>=t,n-=t,this.bitsbuf=r,this.bitsbuflen=n,this.ip=a,e},gn.RawInflate.prototype.readCodeByTable=function(t){for(var e,r,n=this.bitsbuf,i=this.bitsbuflen,a=this.input,o=this.ip,s=a.length,l=t[0],c=t[1];i<c&&!(o>=s);)n|=a[o++]<<i,i+=8;if((r=(e=l[n&(1<<c)-1])>>>16)>i)throw new Error("invalid code length: "+r);return this.bitsbuf=n>>r,this.bitsbuflen=i-r,this.ip=o,65535&e},gn.RawInflate.prototype.parseUncompressedBlock=function(){var t,e,r=this.input,n=this.ip,i=this.output,a=this.op,o=r.length,s=i.length;if(this.bitsbuf=0,this.bitsbuflen=0,n+1>=o)throw new Error("invalid uncompressed block header: LEN");if(t=r[n++]|r[n++]<<8,n+1>=o)throw new Error("invalid uncompressed block header: NLEN");if(t===~(r[n++]|r[n++]<<8))throw new Error("invalid uncompressed block header: length verify");if(n+t>r.length)throw new Error("input buffer is broken");switch(this.bufferType){case gn.RawInflate.BufferType.BLOCK:for(;a+t>i.length;)t-=e=s-a,i.set(r.subarray(n,n+e),a),a+=e,n+=e,this.op=a,i=this.expandBufferBlock(),a=this.op;break;case gn.RawInflate.BufferType.ADAPTIVE:for(;a+t>i.length;)i=this.expandBufferAdaptive({fixRatio:2});break;default:throw new Error("invalid inflate mode")}i.set(r.subarray(n,n+t),a),a+=t,n+=t,this.ip=n,this.op=a,this.output=i},gn.RawInflate.prototype.parseFixedHuffmanBlock=function(){switch(this.bufferType){case gn.RawInflate.BufferType.ADAPTIVE:this.decodeHuffmanAdaptive(gn.RawInflate.FixedLiteralLengthTable,gn.RawInflate.FixedDistanceTable);break;case gn.RawInflate.BufferType.BLOCK:this.decodeHuffmanBlock(gn.RawInflate.FixedLiteralLengthTable,gn.RawInflate.FixedDistanceTable);break;default:throw new Error("invalid inflate mode")}},gn.RawInflate.prototype.parseDynamicHuffmanBlock=function(){var t,e,r,n,i,a,o,s,l,c=this.readBits(5)+257,u=this.readBits(5)+1,f=this.readBits(4)+4,h=new Uint8Array(gn.RawInflate.Order.length);for(s=0;s<f;++s)h[gn.RawInflate.Order[s]]=this.readBits(3);for(t=mn(h),n=new Uint8Array(c+u),s=0,l=c+u;s<l;)switch(i=this.readCodeByTable(t)){case 16:for(o=3+this.readBits(2);o--;)n[s++]=a;break;case 17:for(o=3+this.readBits(3);o--;)n[s++]=0;a=0;break;case 18:for(o=11+this.readBits(7);o--;)n[s++]=0;a=0;break;default:n[s++]=i,a=i}switch(e=mn(n.subarray(0,c)),r=mn(n.subarray(c)),this.bufferType){case gn.RawInflate.BufferType.ADAPTIVE:this.decodeHuffmanAdaptive(e,r);break;case gn.RawInflate.BufferType.BLOCK:this.decodeHuffmanBlock(e,r);break;default:throw new Error("invalid inflate mode")}},gn.RawInflate.prototype.decodeHuffmanBlock=function(t,e){var r=this.output,n=this.op;this.currentLitlenTable=t;for(var i,a,o,s,l=r.length-gn.RawInflate.MaxCopyLength,c=gn.RawInflate.LengthCodeTable,u=gn.RawInflate.LengthExtraTable,f=gn.RawInflate.DistCodeTable,h=gn.RawInflate.DistExtraTable;256!==(i=this.readCodeByTable(t));)if(i<256)n>=l&&(this.op=n,r=this.expandBufferBlock(),n=this.op),r[n++]=i;else for(s=c[a=i-257],u[a]>0&&(s+=this.readBits(u[a])),o=f[i=this.readCodeByTable(e)],h[i]>0&&(o+=this.readBits(h[i])),n>=l&&(this.op=n,r=this.expandBufferBlock(),n=this.op);s--;)r[n]=r[n++-o];for(;this.bitsbuflen>=8;)this.bitsbuflen-=8,this.ip--;this.op=n},gn.RawInflate.prototype.decodeHuffmanAdaptive=function(t,e){var r=this.output,n=this.op;this.currentLitlenTable=t;for(var i,a,o,s,l=r.length,c=gn.RawInflate.LengthCodeTable,u=gn.RawInflate.LengthExtraTable,f=gn.RawInflate.DistCodeTable,h=gn.RawInflate.DistExtraTable;256!==(i=this.readCodeByTable(t));)if(i<256)n>=l&&(l=(r=this.expandBufferAdaptive()).length),r[n++]=i;else for(s=c[a=i-257],u[a]>0&&(s+=this.readBits(u[a])),o=f[i=this.readCodeByTable(e)],h[i]>0&&(o+=this.readBits(h[i])),n+s>l&&(l=(r=this.expandBufferAdaptive()).length);s--;)r[n]=r[n++-o];for(;this.bitsbuflen>=8;)this.bitsbuflen-=8,this.ip--;this.op=n},gn.RawInflate.prototype.expandBufferBlock=function(t){var e=new Uint8Array(this.op-gn.RawInflate.MaxBackwardLength),r=this.op-gn.RawInflate.MaxBackwardLength,n=this.output;return e.set(n.subarray(gn.RawInflate.MaxBackwardLength,e.length)),this.blocks.push(e),this.totalpos+=e.length,n.set(n.subarray(r,r+gn.RawInflate.MaxBackwardLength)),this.op=gn.RawInflate.MaxBackwardLength,n},gn.RawInflate.prototype.expandBufferAdaptive=function(t){var e,r,n,i=this.input.length/this.ip+1|0,a=this.input,o=this.output;return t&&("number"==typeof t.fixRatio&&(i=t.fixRatio),"number"==typeof t.addRatio&&(i+=t.addRatio)),r=i<2?(n=(a.length-this.ip)/this.currentLitlenTable[2]/2*258|0)<o.length?o.length+n:o.length<<1:o.length*i,(e=new Uint8Array(r)).set(o),this.output=e,this.output},gn.RawInflate.prototype.concatBufferBlock=function(){var t,e,r,n,i,a=0,o=this.totalpos+(this.op-gn.RawInflate.MaxBackwardLength),s=this.output,l=this.blocks,c=new Uint8Array(o);if(0===l.length)return this.output.subarray(gn.RawInflate.MaxBackwardLength,this.op);for(e=0,r=l.length;e<r;++e)for(n=0,i=(t=l[e]).length;n<i;++n)c[a++]=t[n];for(e=gn.RawInflate.MaxBackwardLength,r=this.op;e<r;++e)c[a++]=s[e];return this.blocks=[],this.buffer=c,this.buffer},gn.RawInflate.prototype.concatBufferDynamic=function(){var t,e=this.op;return this.resize?(t=new Uint8Array(e)).set(this.output.subarray(0,e)):t=this.output.subarray(0,e),this.buffer=t,this.buffer};mn=gn.Huffman.buildHuffmanTable;let wn;function yn(t){if(void 0===t)return;let e=(bn(t)||t.google_url?t.name:t).toLowerCase(),r=e.indexOf("?");return r>0&&(e=e.substr(0,r)),e.endsWith(".gz")?e=e.substr(0,e.length-3):(e.endsWith(".txt")||e.endsWith(".tab")||e.endsWith(".bgz"))&&(e=e.substr(0,e.length-4)),r=e.lastIndexOf("."),r<0?e:e.substr(1+r)}function bn(t){return t instanceof File}gn.RawInflateStream=function(t,e,r){this.blocks=[],this.bufferSize=r||65e3,this.totalpos=0,this.ip=void 0===e?0:e,this.bitsbuf=0,this.bitsbuflen=0,this.input=new Uint8Array(t),this.output=new Uint8Array(this.bufferSize),this.op=0,this.bfinal=!1,this.blockLength,this.resize=!1,this.litlenTable,this.distTable,this.sp=0,this.status=gn.RawInflateStream.Status.INITIALIZED,this.ip_,this.bitsbuflen_,this.bitsbuf_},gn.RawInflateStream.BlockType={UNCOMPRESSED:0,FIXED:1,DYNAMIC:2},gn.RawInflateStream.Status={INITIALIZED:0,BLOCK_HEADER_START:1,BLOCK_HEADER_END:2,BLOCK_BODY_START:3,BLOCK_BODY_END:4,DECODE_BLOCK_START:5,DECODE_BLOCK_END:6},gn.RawInflateStream.prototype.decompress=function(t,e){var r=!1;for(void 0!==t&&(this.input=t),void 0!==e&&(this.ip=e);!r;)switch(this.status){case gn.RawInflateStream.Status.INITIALIZED:case gn.RawInflateStream.Status.BLOCK_HEADER_START:this.readBlockHeader()<0&&(r=!0);break;case gn.RawInflateStream.Status.BLOCK_HEADER_END:case gn.RawInflateStream.Status.BLOCK_BODY_START:switch(this.currentBlockType){case gn.RawInflateStream.BlockType.UNCOMPRESSED:this.readUncompressedBlockHeader()<0&&(r=!0);break;case gn.RawInflateStream.BlockType.FIXED:this.parseFixedHuffmanBlock()<0&&(r=!0);break;case gn.RawInflateStream.BlockType.DYNAMIC:this.parseDynamicHuffmanBlock()<0&&(r=!0)}break;case gn.RawInflateStream.Status.BLOCK_BODY_END:case gn.RawInflateStream.Status.DECODE_BLOCK_START:switch(this.currentBlockType){case gn.RawInflateStream.BlockType.UNCOMPRESSED:this.parseUncompressedBlock()<0&&(r=!0);break;case gn.RawInflateStream.BlockType.FIXED:case gn.RawInflateStream.BlockType.DYNAMIC:this.decodeHuffman()<0&&(r=!0)}break;case gn.RawInflateStream.Status.DECODE_BLOCK_END:this.bfinal?r=!0:this.status=gn.RawInflateStream.Status.INITIALIZED}return this.concatBuffer()},gn.RawInflateStream.MaxBackwardLength=32768,gn.RawInflateStream.MaxCopyLength=258,gn.RawInflateStream.Order=new Uint16Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),gn.RawInflateStream.LengthCodeTable=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,258,258]),gn.RawInflateStream.LengthExtraTable=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0]),gn.RawInflateStream.DistCodeTable=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577]),gn.RawInflateStream.DistExtraTable=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),gn.RawInflateStream.FixedLiteralLengthTable=function(){var t,e,r=new Uint8Array(288);for(t=0,e=r.length;t<e;++t)r[t]=t<=143?8:t<=255?9:t<=279?7:8;return mn(r)}(),gn.RawInflateStream.FixedDistanceTable=function(){var t,e,r=new Uint8Array(30);for(t=0,e=r.length;t<e;++t)r[t]=5;return mn(r)}(),gn.RawInflateStream.prototype.readBlockHeader=function(){var t;if(this.status=gn.RawInflateStream.Status.BLOCK_HEADER_START,this.save_(),(t=this.readBits(3))<0)return this.restore_(),-1;switch(1&t&&(this.bfinal=!0),t>>>=1){case 0:this.currentBlockType=gn.RawInflateStream.BlockType.UNCOMPRESSED;break;case 1:this.currentBlockType=gn.RawInflateStream.BlockType.FIXED;break;case 2:this.currentBlockType=gn.RawInflateStream.BlockType.DYNAMIC;break;default:throw new Error("unknown BTYPE: "+t)}this.status=gn.RawInflateStream.Status.BLOCK_HEADER_END},gn.RawInflateStream.prototype.readBits=function(t){for(var e,r=this.bitsbuf,n=this.bitsbuflen,i=this.input,a=this.ip;n<t;){if(i.length<=a)return-1;r|=(e=i[a++])<<n,n+=8}return e=r&(1<<t)-1,r>>>=t,n-=t,this.bitsbuf=r,this.bitsbuflen=n,this.ip=a,e},gn.RawInflateStream.prototype.readCodeByTable=function(t){for(var e,r,n=this.bitsbuf,i=this.bitsbuflen,a=this.input,o=this.ip,s=t[0],l=t[1];i<l;){if(a.length<=o)return-1;n|=a[o++]<<i,i+=8}if((r=(e=s[n&(1<<l)-1])>>>16)>i)throw new Error("invalid code length: "+r);return this.bitsbuf=n>>r,this.bitsbuflen=i-r,this.ip=o,65535&e},gn.RawInflateStream.prototype.readUncompressedBlockHeader=function(){var t,e=this.input,r=this.ip;if(this.status=gn.RawInflateStream.Status.BLOCK_BODY_START,r+4>=e.length)return-1;if((t=e[r++]|e[r++]<<8)===~(e[r++]|e[r++]<<8))throw new Error("invalid uncompressed block header: length verify");this.bitsbuf=0,this.bitsbuflen=0,this.ip=r,this.blockLength=t,this.status=gn.RawInflateStream.Status.BLOCK_BODY_END},gn.RawInflateStream.prototype.parseUncompressedBlock=function(){var t=this.input,e=this.ip,r=this.output,n=this.op,i=this.blockLength;for(this.status=gn.RawInflateStream.Status.DECODE_BLOCK_START;i--;){if(n===r.length&&(r=this.expandBuffer({fixRatio:2})),e>=t.length)return this.ip=e,this.op=n,this.blockLength=i+1,-1;r[n++]=t[e++]}return i<0&&(this.status=gn.RawInflateStream.Status.DECODE_BLOCK_END),this.ip=e,this.op=n,0},gn.RawInflateStream.prototype.parseFixedHuffmanBlock=function(){return this.status=gn.RawInflateStream.Status.BLOCK_BODY_START,this.litlenTable=gn.RawInflateStream.FixedLiteralLengthTable,this.distTable=gn.RawInflateStream.FixedDistanceTable,this.status=gn.RawInflateStream.Status.BLOCK_BODY_END,0},gn.RawInflateStream.prototype.save_=function(){this.ip_=this.ip,this.bitsbuflen_=this.bitsbuflen,this.bitsbuf_=this.bitsbuf},gn.RawInflateStream.prototype.restore_=function(){this.ip=this.ip_,this.bitsbuflen=this.bitsbuflen_,this.bitsbuf=this.bitsbuf_},gn.RawInflateStream.prototype.parseDynamicHuffmanBlock=function(){var t,e,r,n,i=new Uint8Array(gn.RawInflateStream.Order.length);if(this.status=gn.RawInflateStream.Status.BLOCK_BODY_START,this.save_(),t=this.readBits(5)+257,e=this.readBits(5)+1,r=this.readBits(4)+4,t<0||e<0||r<0)return this.restore_(),-1;try{(function(){var a,o,s,l,c,u,f=0;for(c=0;c<r;++c){if((a=this.readBits(3))<0)throw new Error("not enough input");i[gn.RawInflateStream.Order[c]]=a}for(n=mn(i),l=new Uint8Array(t+e),c=0,u=t+e;c<u;){if((o=this.readCodeByTable(n))<0)throw new Error("not enough input");switch(o){case 16:if((a=this.readBits(2))<0)throw new Error("not enough input");for(s=3+a;s--;)l[c++]=f;break;case 17:if((a=this.readBits(3))<0)throw new Error("not enough input");for(s=3+a;s--;)l[c++]=0;f=0;break;case 18:if((a=this.readBits(7))<0)throw new Error("not enough input");for(s=11+a;s--;)l[c++]=0;f=0;break;default:l[c++]=o,f=o}}this.litlenTable=mn(l.subarray(0,t)),this.distTable=mn(l.subarray(t))}).call(this)}catch(t){return this.restore_(),-1}return this.status=gn.RawInflateStream.Status.BLOCK_BODY_END,0},gn.RawInflateStream.prototype.decodeHuffman=function(){var t,e,r,n,i,a=this.output,o=this.op,s=this.litlenTable,l=this.distTable,c=a.length;for(this.status=gn.RawInflateStream.Status.DECODE_BLOCK_START;;){if(this.save_(),(t=this.readCodeByTable(s))<0)return this.op=o,this.restore_(),-1;if(256===t)break;if(t<256)o===c&&(c=(a=this.expandBuffer()).length),a[o++]=t;else{if(e=t-257,n=gn.RawInflateStream.LengthCodeTable[e],gn.RawInflateStream.LengthExtraTable[e]>0){if((i=this.readBits(gn.RawInflateStream.LengthExtraTable[e]))<0)return this.op=o,this.restore_(),-1;n+=i}if((t=this.readCodeByTable(l))<0)return this.op=o,this.restore_(),-1;if(r=gn.RawInflateStream.DistCodeTable[t],gn.RawInflateStream.DistExtraTable[t]>0){if((i=this.readBits(gn.RawInflateStream.DistExtraTable[t]))<0)return this.op=o,this.restore_(),-1;r+=i}for(o+n>=c&&(c=(a=this.expandBuffer()).length);n--;)a[o]=a[o++-r];if(this.ip===this.input.length)return this.op=o,-1}}for(;this.bitsbuflen>=8;)this.bitsbuflen-=8,this.ip--;this.op=o,this.status=gn.RawInflateStream.Status.DECODE_BLOCK_END},gn.RawInflateStream.prototype.expandBuffer=function(t){var e,r,n,i=this.input.length/this.ip+1|0,a=this.input,o=this.output;return t&&("number"==typeof t.fixRatio&&(i=t.fixRatio),"number"==typeof t.addRatio&&(i+=t.addRatio)),r=i<2?(n=(a.length-this.ip)/this.litlenTable[2]/2*258|0)<o.length?o.length+n:o.length<<1:o.length*i,(e=new Uint8Array(r)).set(o),this.output=e,this.output},gn.RawInflateStream.prototype.concatBuffer=function(){var t,e,r=this.op;return t=this.resize?new Uint8Array(this.output.subarray(this.sp,r)):this.output.subarray(this.sp,r),this.sp=r,r>gn.RawInflateStream.MaxBackwardLength+this.bufferSize&&(this.op=this.sp=gn.RawInflateStream.MaxBackwardLength,e=this.output,this.output=new Uint8Array(this.bufferSize+gn.RawInflateStream.MaxBackwardLength),this.output.set(e.subarray(r-gn.RawInflateStream.MaxBackwardLength,r))),t},gn.Inflate=function(t,e){var r,n;switch(this.input=t,this.ip=0,this.rawinflate,this.verify,!e&&(e={})||(e.index&&(this.ip=e.index),e.verify&&(this.verify=e.verify)),r=t[this.ip++],n=t[this.ip++],15&r){case gn.CompressionMethod.DEFLATE:this.method=gn.CompressionMethod.DEFLATE;break;default:throw new Error("unsupported compression method")}if(((r<<8)+n)%31!=0)throw new Error("invalid fcheck flag:"+((r<<8)+n)%31);if(32&n)throw new Error("fdict flag is not supported");this.rawinflate=new gn.RawInflate(t,{index:this.ip,bufferSize:e.bufferSize,bufferType:e.bufferType,resize:e.resize})},gn.Inflate.BufferType=gn.RawInflate.BufferType,gn.Inflate.prototype.decompress=function(){var t,e=this.input;if(t=this.rawinflate.decompress(),this.ip=this.rawinflate.ip,this.verify&&(e[this.ip++]<<24|e[this.ip++]<<16|e[this.ip++]<<8|e[this.ip++])>>>0!==gn.Adler32(t))throw new Error("invalid adler-32 checksum");return t},gn.InflateStream=function(t){this.input=void 0===t?new Uint8Array:t,this.ip=0,this.rawinflate=new gn.RawInflateStream(this.input,this.ip),this.method,this.output=this.rawinflate.output},gn.InflateStream.prototype.decompress=function(t){var e;if(void 0!==t){var r=new Uint8Array(this.input.length+t.length);r.set(this.input,0),r.set(t,this.input.length),this.input=r}return void 0===this.method&&this.readHeader()<0?new Uint8Array:(e=this.rawinflate.decompress(this.input,this.ip),0!==this.rawinflate.ip&&(this.input=this.input.subarray(this.rawinflate.ip),this.ip=0),e)},gn.InflateStream.prototype.readHeader=function(){var t=this.ip,e=this.input,r=e[t++],n=e[t++];if(void 0===r||void 0===n)return-1;switch(15&r){case gn.CompressionMethod.DEFLATE:this.method=gn.CompressionMethod.DEFLATE;break;default:throw new Error("unsupported compression method")}if(((r<<8)+n)%31!=0)throw new Error("invalid fcheck flag:"+((r<<8)+n)%31);if(32&n)throw new Error("fdict flag is not supported");this.ip=t},gn.Gunzip=function(t,e){this.input=t,this.ip=0,this.member=[],this.decompressed=!1},gn.Gunzip.prototype.getMembers=function(){return this.decompressed||this.decompress(),this.member.slice()},gn.Gunzip.prototype.decompress=function(){for(var t=this.input.length;this.ip<t;)this.decodeMember();return this.decompressed=!0,this.concatMember()},gn.Gunzip.prototype.decodeMember=function(){var t,e,r,n,i,a,o,s,l,c=new gn.GunzipMember,u=this.input,f=this.ip;if(c.id1=u[f++],c.id2=u[f++],31!==c.id1||139!==c.id2)throw new Error("invalid file signature:"+c.id1+","+c.id2);switch(c.cm=u[f++],c.cm){case 8:break;default:throw new Error("unknown compression method: "+c.cm)}if(c.flg=u[f++],s=u[f++]|u[f++]<<8|u[f++]<<16|u[f++]<<24,c.mtime=new Date(1e3*s),c.xfl=u[f++],c.os=u[f++],(c.flg&gn.Gzip.FlagsMask.FEXTRA)>0&&(c.xlen=u[f++]|u[f++]<<8,f=this.decodeSubField(f,c.xlen)),(c.flg&gn.Gzip.FlagsMask.FNAME)>0){for(o=[],a=0;(i=u[f++])>0;)o[a++]=String.fromCharCode(i);c.name=o.join("")}if((c.flg&gn.Gzip.FlagsMask.FCOMMENT)>0){for(o=[],a=0;(i=u[f++])>0;)o[a++]=String.fromCharCode(i);c.comment=o.join("")}if((c.flg&gn.Gzip.FlagsMask.FHCRC)>0&&(c.crc16=65535&gn.CRC32.calc(u,0,f),c.crc16!==(u[f++]|u[f++]<<8)))throw new Error("invalid header crc16");if(t=u[u.length-4]|u[u.length-3]<<8|u[u.length-2]<<16|u[u.length-1]<<24,u.length-f-4-4<512*t&&(n=t),e=new gn.RawInflate(u,{index:f,bufferSize:n}),c.data=r=e.decompress(),f=e.ip,c.crc32=l=(u[f++]|u[f++]<<8|u[f++]<<16|u[f++]<<24)>>>0,gn.CRC32.calc(r)!==l)throw new Error("invalid CRC-32 checksum: 0x"+gn.CRC32.calc(r).toString(16)+" / 0x"+l.toString(16));if(c.isize=t=(u[f++]|u[f++]<<8|u[f++]<<16|u[f++]<<24)>>>0,(4294967295&r.length)!==t)throw new Error("invalid input size: "+(4294967295&r.length)+" / "+t);this.member.push(c),this.ip=f},gn.Gunzip.prototype.decodeSubField=function(t,e){return t+e},gn.Gunzip.prototype.concatMember=function(){var t,e,r,n=this.member,i=0,a=0;for(t=0,e=n.length;t<e;++t)a+=n[t].data.length;for(r=new Uint8Array(a),t=0;t<e;++t)r.set(n[t].data,i),i+=n[t].data.length;return r},gn.GunzipMember=function(){this.id1,this.id2,this.cm,this.flg,this.mtime,this.xfl,this.os,this.crc16,this.xlen,this.crc32,this.isize,this.name,this.comment,this.data},gn.GunzipMember.prototype.getName=function(){return this.name},gn.GunzipMember.prototype.getData=function(){return this.data},gn.GunzipMember.prototype.getMtime=function(){return this.mtime},gn.Gzip=function(t,e){this.input=t,this.ip=0,this.output,this.op=0,this.flags={},this.filename,this.comment,this.deflateOptions,e&&(e.flags&&(this.flags=e.flags),"string"==typeof e.filename&&(this.filename=e.filename),"string"==typeof e.comment&&(this.comment=e.comment),e.deflateOptions&&(this.deflateOptions=e.deflateOptions)),this.deflateOptions||(this.deflateOptions={})},gn.Gzip.DefaultBufferSize=32768,gn.Gzip.prototype.compress=function(){var t,e,r,n,i,a,o,s,l=new Uint8Array(gn.Gzip.DefaultBufferSize),c=0,u=this.input,f=this.ip,h=this.filename,p=this.comment;if(l[c++]=31,l[c++]=139,l[c++]=8,t=0,this.flags.fname&&(t|=gn.Gzip.FlagsMask.FNAME),this.flags.fcomment&&(t|=gn.Gzip.FlagsMask.FCOMMENT),this.flags.fhcrc&&(t|=gn.Gzip.FlagsMask.FHCRC),l[c++]=t,e=(Date.now?Date.now():+new Date)/1e3|0,l[c++]=255&e,l[c++]=e>>>8&255,l[c++]=e>>>16&255,l[c++]=e>>>24&255,l[c++]=0,l[c++]=gn.Gzip.OperatingSystem.UNKNOWN,void 0!==this.flags.fname){for(o=0,s=h.length;o<s;++o)(a=h.charCodeAt(o))>255&&(l[c++]=a>>>8&255),l[c++]=255&a;l[c++]=0}if(this.flags.comment){for(o=0,s=p.length;o<s;++o)(a=p.charCodeAt(o))>255&&(l[c++]=a>>>8&255),l[c++]=255&a;l[c++]=0}return this.flags.fhcrc&&(r=65535&gn.CRC32.calc(l,0,c),l[c++]=255&r,l[c++]=r>>>8&255),this.deflateOptions.outputBuffer=l,this.deflateOptions.outputIndex=c,l=(i=new gn.RawDeflate(u,this.deflateOptions)).compress(),(c=i.op)+8>l.buffer.byteLength?(this.output=new Uint8Array(c+8),this.output.set(new Uint8Array(l.buffer)),l=this.output):l=new Uint8Array(l.buffer),n=gn.CRC32.calc(u),l[c++]=255&n,l[c++]=n>>>8&255,l[c++]=n>>>16&255,l[c++]=n>>>24&255,s=u.length,l[c++]=255&s,l[c++]=s>>>8&255,l[c++]=s>>>16&255,l[c++]=s>>>24&255,this.ip=f,c<l.length&&(this.output=l=l.subarray(0,c)),l},gn.Gzip.OperatingSystem={FAT:0,AMIGA:1,VMS:2,UNIX:3,VM_CMS:4,ATARI_TOS:5,HPFS:6,MACINTOSH:7,Z_SYSTEM:8,CP_M:9,TOPS_20:10,NTFS:11,QDOS:12,ACORN_RISCOS:13,UNKNOWN:255},gn.Gzip.FlagsMask={FTEXT:1,FHCRC:2,FEXTRA:4,FNAME:8,FCOMMENT:16},gn.Heap=function(t){this.buffer=new Uint16Array(2*t),this.length=0},gn.Heap.prototype.getParent=function(t){return 2*((t-2)/4|0)},gn.Heap.prototype.getChild=function(t){return 2*t+2},gn.Heap.prototype.push=function(t,e){var r,n,i,a=this.buffer;for(r=this.length,a[this.length++]=e,a[this.length++]=t;r>0&&(n=this.getParent(r),a[r]>a[n]);)i=a[r],a[r]=a[n],a[n]=i,i=a[r+1],a[r+1]=a[n+1],a[n+1]=i,r=n;return this.length},gn.Heap.prototype.pop=function(){var t,e,r,n,i,a=this.buffer;for(e=a[0],t=a[1],this.length-=2,a[0]=a[this.length],a[1]=a[this.length+1],i=0;!((n=this.getChild(i))>=this.length)&&(n+2<this.length&&a[n+2]>a[n]&&(n+=2),a[n]>a[i]);)r=a[i],a[i]=a[n],a[n]=r,r=a[i+1],a[i+1]=a[n+1],a[n+1]=r,i=n;return{index:t,value:e,length:this.length}},gn.RawDeflate=function(t,e){this.compressionType=gn.RawDeflate.CompressionType.DYNAMIC,this.lazy=0,this.freqsLitLen,this.freqsDist,this.input=t instanceof Array?new Uint8Array(t):t,this.output,this.op=0,e&&(e.lazy&&(this.lazy=e.lazy),"number"==typeof e.compressionType&&(this.compressionType=e.compressionType),e.outputBuffer&&(this.output=e.outputBuffer instanceof Array?new Uint8Array(e.outputBuffer):e.outputBuffer),"number"==typeof e.outputIndex&&(this.op=e.outputIndex)),this.output||(this.output=new Uint8Array(32768))},gn.RawDeflate.CompressionType={NONE:0,FIXED:1,DYNAMIC:2,RESERVED:3},gn.RawDeflate.Lz77MinLength=3,gn.RawDeflate.Lz77MaxLength=258,gn.RawDeflate.WindowSize=32768,gn.RawDeflate.MaxCodeLength=16,gn.RawDeflate.HUFMAX=286,gn.RawDeflate.FixedHuffmanTable=function(){var t,e=[];for(t=0;t<288;t++)switch(!0){case t<=143:e.push([t+48,8]);break;case t<=255:e.push([t-144+400,9]);break;case t<=279:e.push([t-256+0,7]);break;case t<=287:e.push([t-280+192,8]);break;default:throw"invalid literal: "+t}return e}(),gn.RawDeflate.prototype.compress=function(){var t,e,r,n=this.input;switch(this.compressionType){case gn.RawDeflate.CompressionType.NONE:for(e=0,r=n.length;e<r;)e+=(t=n.subarray(e,e+65535)).length,this.makeNocompressBlock(t,e===r);break;case gn.RawDeflate.CompressionType.FIXED:this.output=this.makeFixedHuffmanBlock(n,!0),this.op=this.output.length;break;case gn.RawDeflate.CompressionType.DYNAMIC:this.output=this.makeDynamicHuffmanBlock(n,!0),this.op=this.output.length;break;default:throw"invalid compression type"}return this.output},gn.RawDeflate.prototype.makeNocompressBlock=function(t,e){var r,n,i,a,o=this.output,s=this.op;for(o=new Uint8Array(this.output.buffer);o.length<=s+t.length+5;)o=new Uint8Array(o.length<<1);return o.set(this.output),r=e?1:0,n=gn.RawDeflate.CompressionType.NONE,o[s++]=r|n<<1,a=65536+~(i=t.length)&65535,o[s++]=255&i,o[s++]=i>>>8&255,o[s++]=255&a,o[s++]=a>>>8&255,o.set(t,s),s+=t.length,o=o.subarray(0,s),this.op=s,this.output=o,o},gn.RawDeflate.prototype.makeFixedHuffmanBlock=function(t,e){var r,n,i,a=new gn.BitStream(new Uint8Array(this.output.buffer),this.op);return r=e?1:0,n=gn.RawDeflate.CompressionType.FIXED,a.writeBits(r,1,!0),a.writeBits(n,2,!0),i=this.lz77(t),this.fixedHuffman(i,a),a.finish()},gn.RawDeflate.prototype.makeDynamicHuffmanBlock=function(t,e){var r,n,i,a,o,s,l,c,u,f,h,p,d,g,m,w,y,b=new gn.BitStream(new Uint8Array(this.output.buffer),this.op),v=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],S=new Array(19);for(r=e?1:0,n=gn.RawDeflate.CompressionType.DYNAMIC,b.writeBits(r,1,!0),b.writeBits(n,2,!0),i=this.lz77(t),l=this.getLengths_(this.freqsLitLen,15),c=this.getCodesFromLengths_(l),u=this.getLengths_(this.freqsDist,7),f=this.getCodesFromLengths_(u),a=286;a>257&&0===l[a-1];a--);for(o=30;o>1&&0===u[o-1];o--);for(h=this.getTreeSymbols_(a,l,o,u),p=this.getLengths_(h.freqs,7),w=0;w<19;w++)S[w]=p[v[w]];for(s=19;s>4&&0===S[s-1];s--);for(d=this.getCodesFromLengths_(p),b.writeBits(a-257,5,!0),b.writeBits(o-1,5,!0),b.writeBits(s-4,4,!0),w=0;w<s;w++)b.writeBits(S[w],3,!0);for(w=0,y=h.codes.length;w<y;w++)if(g=h.codes[w],b.writeBits(d[g],p[g],!0),g>=16){switch(w++,g){case 16:m=2;break;case 17:m=3;break;case 18:m=7;break;default:throw"invalid code: "+g}b.writeBits(h.codes[w],m,!0)}return this.dynamicHuffman(i,[c,l],[f,u],b),b.finish()},gn.RawDeflate.prototype.dynamicHuffman=function(t,e,r,n){var i,a,o,s,l,c,u,f;for(l=e[0],c=e[1],u=r[0],f=r[1],i=0,a=t.length;i<a;++i)if(o=t[i],n.writeBits(l[o],c[o],!0),o>256)n.writeBits(t[++i],t[++i],!0),s=t[++i],n.writeBits(u[s],f[s],!0),n.writeBits(t[++i],t[++i],!0);else if(256===o)break;return n},gn.RawDeflate.prototype.fixedHuffman=function(t,e){var r,n,i;for(r=0,n=t.length;r<n;r++)if(i=t[r],gn.BitStream.prototype.writeBits.apply(e,gn.RawDeflate.FixedHuffmanTable[i]),i>256)e.writeBits(t[++r],t[++r],!0),e.writeBits(t[++r],5),e.writeBits(t[++r],t[++r],!0);else if(256===i)break;return e},gn.RawDeflate.Lz77Match=function(t,e){this.length=t,this.backwardDistance=e},gn.RawDeflate.Lz77Match.LengthCodeTable=function(t){return new Uint32Array(t)}(function(){var t,e,r=[];for(t=3;t<=258;t++)e=n(t),r[t]=e[2]<<24|e[1]<<16|e[0];function n(t){switch(!0){case 3===t:return[257,t-3,0];case 4===t:return[258,t-4,0];case 5===t:return[259,t-5,0];case 6===t:return[260,t-6,0];case 7===t:return[261,t-7,0];case 8===t:return[262,t-8,0];case 9===t:return[263,t-9,0];case 10===t:return[264,t-10,0];case t<=12:return[265,t-11,1];case t<=14:return[266,t-13,1];case t<=16:return[267,t-15,1];case t<=18:return[268,t-17,1];case t<=22:return[269,t-19,2];case t<=26:return[270,t-23,2];case t<=30:return[271,t-27,2];case t<=34:return[272,t-31,2];case t<=42:return[273,t-35,3];case t<=50:return[274,t-43,3];case t<=58:return[275,t-51,3];case t<=66:return[276,t-59,3];case t<=82:return[277,t-67,4];case t<=98:return[278,t-83,4];case t<=114:return[279,t-99,4];case t<=130:return[280,t-115,4];case t<=162:return[281,t-131,5];case t<=194:return[282,t-163,5];case t<=226:return[283,t-195,5];case t<=257:return[284,t-227,5];case 258===t:return[285,t-258,0];default:throw"invalid length: "+t}}return r}()),gn.RawDeflate.Lz77Match.prototype.getDistanceCode_=function(t){var e;switch(!0){case 1===t:e=[0,t-1,0];break;case 2===t:e=[1,t-2,0];break;case 3===t:e=[2,t-3,0];break;case 4===t:e=[3,t-4,0];break;case t<=6:e=[4,t-5,1];break;case t<=8:e=[5,t-7,1];break;case t<=12:e=[6,t-9,2];break;case t<=16:e=[7,t-13,2];break;case t<=24:e=[8,t-17,3];break;case t<=32:e=[9,t-25,3];break;case t<=48:e=[10,t-33,4];break;case t<=64:e=[11,t-49,4];break;case t<=96:e=[12,t-65,5];break;case t<=128:e=[13,t-97,5];break;case t<=192:e=[14,t-129,6];break;case t<=256:e=[15,t-193,6];break;case t<=384:e=[16,t-257,7];break;case t<=512:e=[17,t-385,7];break;case t<=768:e=[18,t-513,8];break;case t<=1024:e=[19,t-769,8];break;case t<=1536:e=[20,t-1025,9];break;case t<=2048:e=[21,t-1537,9];break;case t<=3072:e=[22,t-2049,10];break;case t<=4096:e=[23,t-3073,10];break;case t<=6144:e=[24,t-4097,11];break;case t<=8192:e=[25,t-6145,11];break;case t<=12288:e=[26,t-8193,12];break;case t<=16384:e=[27,t-12289,12];break;case t<=24576:e=[28,t-16385,13];break;case t<=32768:e=[29,t-24577,13];break;default:throw"invalid distance"}return e},gn.RawDeflate.Lz77Match.prototype.toLz77Array=function(){var t,e=this.length,r=this.backwardDistance,n=[],i=0;return t=gn.RawDeflate.Lz77Match.LengthCodeTable[e],n[i++]=65535&t,n[i++]=t>>16&255,n[i++]=t>>24,t=this.getDistanceCode_(r),n[i++]=t[0],n[i++]=t[1],n[i++]=t[2],n},gn.RawDeflate.prototype.lz77=function(t){var e,r,n,i,a,o,s,l,c,u={},f=gn.RawDeflate.WindowSize,h=new Uint16Array(2*t.length),p=0,d=0,g=new Uint32Array(286),m=new Uint32Array(30),w=this.lazy;function y(t,e){var r,n,i=t.toLz77Array();for(r=0,n=i.length;r<n;++r)h[p++]=i[r];g[i[0]]++,m[i[3]]++,d=t.length+e-1,l=null}for(g[256]=1,e=0,r=t.length;e<r;++e){for(a=0,n=0,i=gn.RawDeflate.Lz77MinLength;n<i&&e+n!==r;++n)a=a<<8|t[e+n];if(void 0===u[a]&&(u[a]=[]),o=u[a],d-- >0)o.push(e);else{for(;o.length>0&&e-o[0]>f;)o.shift();if(e+gn.RawDeflate.Lz77MinLength>=r){for(l&&y(l,-1),n=0,i=r-e;n<i;++n)c=t[e+n],h[p++]=c,++g[c];break}o.length>0?(s=this.searchLongestMatch_(t,e,o),l?l.length<s.length?(c=t[e-1],h[p++]=c,++g[c],y(s,0)):y(l,-1):s.length<w?l=s:y(s,0)):l?y(l,-1):(c=t[e],h[p++]=c,++g[c]),o.push(e)}}return h[p++]=256,g[256]++,this.freqsLitLen=g,this.freqsDist=m,h.subarray(0,p)},gn.RawDeflate.prototype.searchLongestMatch_=function(t,e,r){var n,i,a,o,s,l,c=0,u=t.length;t:for(o=0,l=r.length;o<l;o++){if(n=r[l-o-1],a=gn.RawDeflate.Lz77MinLength,c>gn.RawDeflate.Lz77MinLength){for(s=c;s>gn.RawDeflate.Lz77MinLength;s--)if(t[n+s-1]!==t[e+s-1])continue t;a=c}for(;a<gn.RawDeflate.Lz77MaxLength&&e+a<u&&t[n+a]===t[e+a];)++a;if(a>c&&(i=n,c=a),a===gn.RawDeflate.Lz77MaxLength)break}return new gn.RawDeflate.Lz77Match(c,e-i)},gn.RawDeflate.prototype.getTreeSymbols_=function(t,e,r,n){var i,a,o,s,l,c,u=new Uint32Array(t+r),f=new Uint32Array(316),h=new Uint8Array(19);for(a=0,i=0;i<t;i++)u[a++]=e[i];for(i=0;i<r;i++)u[a++]=n[i];for(l=0,i=0,s=u.length;i<s;i+=a){for(a=1;i+a<s&&u[i+a]===u[i];++a);if(o=a,0===u[i])if(o<3)for(;o-- >0;)f[l++]=0,h[0]++;else for(;o>0;)(c=o<138?o:138)>o-3&&c<o&&(c=o-3),c<=10?(f[l++]=17,f[l++]=c-3,h[17]++):(f[l++]=18,f[l++]=c-11,h[18]++),o-=c;else if(f[l++]=u[i],h[u[i]]++,--o<3)for(;o-- >0;)f[l++]=u[i],h[u[i]]++;else for(;o>0;)(c=o<6?o:6)>o-3&&c<o&&(c=o-3),f[l++]=16,f[l++]=c-3,h[16]++,o-=c}return{codes:f.subarray(0,l),freqs:h}},gn.RawDeflate.prototype.getLengths_=function(t,e){var r,n,i,a,o,s=t.length,l=new gn.Heap(2*gn.RawDeflate.HUFMAX),c=new Uint8Array(s);for(a=0;a<s;++a)t[a]>0&&l.push(a,t[a]);if(r=new Array(l.length/2),n=new Uint32Array(l.length/2),1===r.length)return c[l.pop().index]=1,c;for(a=0,o=l.length/2;a<o;++a)r[a]=l.pop(),n[a]=r[a].value;for(i=this.reversePackageMerge_(n,n.length,e),a=0,o=r.length;a<o;++a)c[r[a].index]=i[a];return c},gn.RawDeflate.prototype.reversePackageMerge_=function(t,e,r){var n,i,a,o,s,l=new Uint16Array(r),c=new Uint8Array(r),u=new Uint8Array(e),f=new Array(r),h=new Array(r),p=new Array(r),d=(1<<r)-e,g=1<<r-1;function m(t){var r=h[t][p[t]];r===e?(m(t+1),m(t+1)):--u[r],++p[t]}for(l[r-1]=e,i=0;i<r;++i)d<g?c[i]=0:(c[i]=1,d-=g),d<<=1,l[r-2-i]=(l[r-1-i]/2|0)+e;for(l[0]=c[0],f[0]=new Array(l[0]),h[0]=new Array(l[0]),i=1;i<r;++i)l[i]>2*l[i-1]+c[i]&&(l[i]=2*l[i-1]+c[i]),f[i]=new Array(l[i]),h[i]=new Array(l[i]);for(n=0;n<e;++n)u[n]=r;for(a=0;a<l[r-1];++a)f[r-1][a]=t[a],h[r-1][a]=a;for(n=0;n<r;++n)p[n]=0;for(1===c[r-1]&&(--u[0],++p[r-1]),i=r-2;i>=0;--i){for(n=0,o=0,s=p[i+1],a=0;a<l[i];a++)(o=f[i+1][s]+f[i+1][s+1])>t[n]?(f[i][a]=o,h[i][a]=e,s+=2):(f[i][a]=t[n],h[i][a]=n,++n);p[i]=0,1===c[i]&&m(i)}return u},gn.RawDeflate.prototype.getCodesFromLengths_=function(t){var e,r,n,i,a=new Uint16Array(t.length),o=[],s=[],l=0;for(e=0,r=t.length;e<r;e++)o[t[e]]=1+(0|o[t[e]]);for(e=1,r=gn.RawDeflate.MaxCodeLength;e<=r;e++)s[e]=l,l+=0|o[e],l<<=1;for(e=0,r=t.length;e<r;e++)for(l=s[t[e]],s[t[e]]+=1,a[e]=0,n=0,i=t[e];n<i;n++)a[e]=a[e]<<1|1&l,l>>>=1;return a},gn.Unzip=function(t,e){e=e||{},this.input=t instanceof Array?new Uint8Array(t):t,this.ip=0,this.eocdrOffset,this.numberOfThisDisk,this.startDisk,this.totalEntriesThisDisk,this.totalEntries,this.centralDirectorySize,this.centralDirectoryOffset,this.commentLength,this.comment,this.fileHeaderList,this.filenameToIndex,this.verify=e.verify||!1,this.password=e.password},gn.Unzip.CompressionMethod=gn.Zip.CompressionMethod,gn.Unzip.FileHeaderSignature=gn.Zip.FileHeaderSignature,gn.Unzip.LocalFileHeaderSignature=gn.Zip.LocalFileHeaderSignature,gn.Unzip.CentralDirectorySignature=gn.Zip.CentralDirectorySignature,gn.Unzip.FileHeader=function(t,e){this.input=t,this.offset=e,this.length,this.version,this.os,this.needVersion,this.flags,this.compression,this.time,this.date,this.crc32,this.compressedSize,this.plainSize,this.fileNameLength,this.extraFieldLength,this.fileCommentLength,this.diskNumberStart,this.internalFileAttributes,this.externalFileAttributes,this.relativeOffset,this.filename,this.extraField,this.comment},gn.Unzip.FileHeader.prototype.parse=function(){var t=this.input,e=this.offset;if(t[e++]!==gn.Unzip.FileHeaderSignature[0]||t[e++]!==gn.Unzip.FileHeaderSignature[1]||t[e++]!==gn.Unzip.FileHeaderSignature[2]||t[e++]!==gn.Unzip.FileHeaderSignature[3])throw new Error("invalid file header signature");this.version=t[e++],this.os=t[e++],this.needVersion=t[e++]|t[e++]<<8,this.flags=t[e++]|t[e++]<<8,this.compression=t[e++]|t[e++]<<8,this.time=t[e++]|t[e++]<<8,this.date=t[e++]|t[e++]<<8,this.crc32=(t[e++]|t[e++]<<8|t[e++]<<16|t[e++]<<24)>>>0,this.compressedSize=(t[e++]|t[e++]<<8|t[e++]<<16|t[e++]<<24)>>>0,this.plainSize=(t[e++]|t[e++]<<8|t[e++]<<16|t[e++]<<24)>>>0,this.fileNameLength=t[e++]|t[e++]<<8,this.extraFieldLength=t[e++]|t[e++]<<8,this.fileCommentLength=t[e++]|t[e++]<<8,this.diskNumberStart=t[e++]|t[e++]<<8,this.internalFileAttributes=t[e++]|t[e++]<<8,this.externalFileAttributes=t[e++]|t[e++]<<8|t[e++]<<16|t[e++]<<24,this.relativeOffset=(t[e++]|t[e++]<<8|t[e++]<<16|t[e++]<<24)>>>0,this.filename=String.fromCharCode.apply(null,t.subarray(e,e+=this.fileNameLength)),this.extraField=t.subarray(e,e+=this.extraFieldLength),this.comment=t.subarray(e,e+this.fileCommentLength),this.length=e-this.offset},gn.Unzip.LocalFileHeader=function(t,e){this.input=t,this.offset=e,this.length,this.needVersion,this.flags,this.compression,this.time,this.date,this.crc32,this.compressedSize,this.plainSize,this.fileNameLength,this.extraFieldLength,this.filename,this.extraField},gn.Unzip.LocalFileHeader.Flags=gn.Zip.Flags,gn.Unzip.LocalFileHeader.prototype.parse=function(){var t=this.input,e=this.offset;if(t[e++]!==gn.Unzip.LocalFileHeaderSignature[0]||t[e++]!==gn.Unzip.LocalFileHeaderSignature[1]||t[e++]!==gn.Unzip.LocalFileHeaderSignature[2]||t[e++]!==gn.Unzip.LocalFileHeaderSignature[3])throw new Error("invalid local file header signature");this.needVersion=t[e++]|t[e++]<<8,this.flags=t[e++]|t[e++]<<8,this.compression=t[e++]|t[e++]<<8,this.time=t[e++]|t[e++]<<8,this.date=t[e++]|t[e++]<<8,this.crc32=(t[e++]|t[e++]<<8|t[e++]<<16|t[e++]<<24)>>>0,this.compressedSize=(t[e++]|t[e++]<<8|t[e++]<<16|t[e++]<<24)>>>0,this.plainSize=(t[e++]|t[e++]<<8|t[e++]<<16|t[e++]<<24)>>>0,this.fileNameLength=t[e++]|t[e++]<<8,this.extraFieldLength=t[e++]|t[e++]<<8,this.filename=String.fromCharCode.apply(null,t.subarray(e,e+=this.fileNameLength)),this.extraField=t.subarray(e,e+=this.extraFieldLength),this.length=e-this.offset},gn.Unzip.prototype.searchEndOfCentralDirectoryRecord=function(){var t,e=this.input;for(t=e.length-12;t>0;--t)if(e[t]===gn.Unzip.CentralDirectorySignature[0]&&e[t+1]===gn.Unzip.CentralDirectorySignature[1]&&e[t+2]===gn.Unzip.CentralDirectorySignature[2]&&e[t+3]===gn.Unzip.CentralDirectorySignature[3])return void(this.eocdrOffset=t);throw new Error("End of Central Directory Record not found")},gn.Unzip.prototype.parseEndOfCentralDirectoryRecord=function(){var t,e=this.input;if(this.eocdrOffset||this.searchEndOfCentralDirectoryRecord(),t=this.eocdrOffset,e[t++]!==gn.Unzip.CentralDirectorySignature[0]||e[t++]!==gn.Unzip.CentralDirectorySignature[1]||e[t++]!==gn.Unzip.CentralDirectorySignature[2]||e[t++]!==gn.Unzip.CentralDirectorySignature[3])throw new Error("invalid signature");this.numberOfThisDisk=e[t++]|e[t++]<<8,this.startDisk=e[t++]|e[t++]<<8,this.totalEntriesThisDisk=e[t++]|e[t++]<<8,this.totalEntries=e[t++]|e[t++]<<8,this.centralDirectorySize=(e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24)>>>0,this.centralDirectoryOffset=(e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24)>>>0,this.commentLength=e[t++]|e[t++]<<8,this.comment=e.subarray(t,t+this.commentLength)},gn.Unzip.prototype.parseFileHeader=function(){var t,e,r,n,i=[],a={};if(!this.fileHeaderList){for(void 0===this.centralDirectoryOffset&&this.parseEndOfCentralDirectoryRecord(),t=this.centralDirectoryOffset,r=0,n=this.totalEntries;r<n;++r)(e=new gn.Unzip.FileHeader(this.input,t)).parse(),t+=e.length,i[r]=e,a[e.filename]=r;if(this.centralDirectorySize<t-this.centralDirectoryOffset)throw new Error("invalid file header size");this.fileHeaderList=i,this.filenameToIndex=a}},gn.Unzip.prototype.getFileData=function(t,e){e=e||{};var r,n,i,a,o,s,l,c,u=this.input,f=this.fileHeaderList;if(f||this.parseFileHeader(),void 0===f[t])throw new Error("wrong index");if(n=f[t].relativeOffset,(r=new gn.Unzip.LocalFileHeader(this.input,n)).parse(),n+=r.length,i=r.compressedSize,0!=(r.flags&gn.Unzip.LocalFileHeader.Flags.ENCRYPT)){if(!e.password&&!this.password)throw new Error("please set password");for(s=this.createDecryptionKey(e.password||this.password),l=n,c=n+12;l<c;++l)this.decode(s,u[l]);for(l=n+=12,c=n+(i-=12);l<c;++l)u[l]=this.decode(s,u[l])}switch(r.compression){case gn.Unzip.CompressionMethod.STORE:a=this.input.subarray(n,n+i);break;case gn.Unzip.CompressionMethod.DEFLATE:a=new gn.RawInflate(this.input,{index:n,bufferSize:r.plainSize}).decompress();break;default:throw new Error("unknown compression type")}if(this.verify&&(o=gn.CRC32.calc(a),r.crc32!==o))throw new Error("wrong crc: file=0x"+r.crc32.toString(16)+", data=0x"+o.toString(16));return a},gn.Unzip.prototype.getFilenames=function(){var t,e,r,n=[];for(this.fileHeaderList||this.parseFileHeader(),t=0,e=(r=this.fileHeaderList).length;t<e;++t)n[t]=r[t].filename;return n},gn.Unzip.prototype.decompress=function(t,e){var r;if(this.filenameToIndex||this.parseFileHeader(),void 0===(r=this.filenameToIndex[t]))throw new Error(t+" not found");return this.getFileData(r,e)},gn.Unzip.prototype.setPassword=function(t){this.password=t},gn.Unzip.prototype.decode=function(t,e){return e^=this.getByte(t),this.updateKeys(t,e),e},gn.Unzip.prototype.updateKeys=gn.Zip.prototype.updateKeys,gn.Unzip.prototype.createDecryptionKey=gn.Zip.prototype.createEncryptionKey,gn.Unzip.prototype.getByte=gn.Zip.prototype.getByte,gn.Util.stringToByteArray=function(t){var e,r,n=t.split("");for(e=0,r=n.length;e<r;e++)n[e]=(255&n[e].charCodeAt(0))>>>0;return n},gn.Adler32=function(t){return"string"==typeof t&&(t=gn.Util.stringToByteArray(t)),gn.Adler32.update(1,t)},gn.Adler32.update=function(t,e){for(var r,n=65535&t,i=t>>>16&65535,a=e.length,o=0;a>0;){a-=r=a>gn.Adler32.OptimizationParameter?gn.Adler32.OptimizationParameter:a;do{i+=n+=e[o++]}while(--r);n%=65521,i%=65521}return(i<<16|n)>>>0},gn.Adler32.OptimizationParameter=1024,gn.BitStream=function(t,e){if(this.index="number"==typeof e?e:0,this.bitindex=0,this.buffer=t instanceof Uint8Array?t:new Uint8Array(gn.BitStream.DefaultBlockSize),2*this.buffer.length<=this.index)throw new Error("invalid index");this.buffer.length<=this.index&&this.expandBuffer()},gn.BitStream.DefaultBlockSize=32768,gn.BitStream.prototype.expandBuffer=function(){var t=this.buffer,e=t.length,r=new Uint8Array(e<<1);return r.set(t),this.buffer=r},gn.BitStream.prototype.writeBits=function(t,e,r){var n,i=this.buffer,a=this.index,o=this.bitindex,s=i[a];if(r&&e>1&&(t=e>8?function(t){return gn.BitStream.ReverseTable[255&t]<<24|gn.BitStream.ReverseTable[t>>>8&255]<<16|gn.BitStream.ReverseTable[t>>>16&255]<<8|gn.BitStream.ReverseTable[t>>>24&255]}(t)>>32-e:gn.BitStream.ReverseTable[t]>>8-e),e+o<8)s=s<<e|t,o+=e;else for(n=0;n<e;++n)s=s<<1|t>>e-n-1&1,8==++o&&(o=0,i[a++]=gn.BitStream.ReverseTable[s],s=0,a===i.length&&(i=this.expandBuffer()));i[a]=s,this.buffer=i,this.bitindex=o,this.index=a},gn.BitStream.prototype.finish=function(){var t=this.buffer,e=this.index;return this.bitindex>0&&(t[e]<<=8-this.bitindex,t[e]=gn.BitStream.ReverseTable[t[e]],e++),t.subarray(0,e)},gn.BitStream.ReverseTable=function(){var t,e=new Uint8Array(256);for(t=0;t<256;++t)e[t]=function(t){var e=t,r=7;for(t>>>=1;t;t>>>=1)e<<=1,e|=1&t,--r;return(e<<r&255)>>>0}(t);return e}(),gn.CRC32.calc=function(t,e,r){return gn.CRC32.update(t,0,e,r)},gn.CRC32.update=function(t,e,r,n){var i=gn.CRC32.Table,a="number"==typeof r?r:r=0,o="number"==typeof n?n:t.length;for(e^=4294967295,a=7&o;a--;++r)e=e>>>8^i[255&(e^t[r])];for(a=o>>3;a--;r+=8)e=(e=(e=(e=(e=(e=(e=(e=e>>>8^i[255&(e^t[r])])>>>8^i[255&(e^t[r+1])])>>>8^i[255&(e^t[r+2])])>>>8^i[255&(e^t[r+3])])>>>8^i[255&(e^t[r+4])])>>>8^i[255&(e^t[r+5])])>>>8^i[255&(e^t[r+6])])>>>8^i[255&(e^t[r+7])];return(4294967295^e)>>>0},gn.CRC32.single=function(t,e){return(gn.CRC32.Table[255&(t^e)]^t>>>8)>>>0},gn.CRC32.Table_=[0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117],gn.CRC32.Table=new Uint32Array(gn.CRC32.Table_),gn.Deflate=function(t,e){this.input=t,this.output=new Uint8Array(gn.Deflate.DefaultBufferSize),this.compressionType=gn.Deflate.CompressionType.DYNAMIC,this.rawDeflate;var r,n={};for(r in!e&&(e={})||"number"==typeof e.compressionType&&(this.compressionType=e.compressionType),e)n[r]=e[r];n.outputBuffer=this.output,this.rawDeflate=new gn.RawDeflate(this.input,n)},gn.Deflate.DefaultBufferSize=32768,gn.Deflate.CompressionType=gn.RawDeflate.CompressionType,gn.Deflate.compress=function(t,e){return new gn.Deflate(t,e).compress()},gn.Deflate.prototype.compress=function(){var t,e,r,n,i,a,o,s=0;switch(o=this.output,t=gn.CompressionMethod.DEFLATE){case gn.CompressionMethod.DEFLATE:e=Math.LOG2E*Math.log(gn.RawDeflate.WindowSize)-8;break;default:throw new Error("invalid compression method")}switch(r=e<<4|t,o[s++]=r,0,t){case gn.CompressionMethod.DEFLATE:switch(this.compressionType){case gn.Deflate.CompressionType.NONE:i=0;break;case gn.Deflate.CompressionType.FIXED:i=1;break;case gn.Deflate.CompressionType.DYNAMIC:i=2;break;default:throw new Error("unsupported compression type")}break;default:throw new Error("invalid compression method")}return n=i<<6|0,n|=31-(256*r+n)%31,o[s++]=n,a=gn.Adler32(this.input),this.rawDeflate.op=s,s=(o=this.rawDeflate.compress()).length,(o=new Uint8Array(o.buffer)).length<=s+4&&(this.output=new Uint8Array(o.length+4),this.output.set(o),o=this.output),(o=o.subarray(0,s+4))[s++]=a>>24&255,o[s++]=a>>16&255,o[s++]=a>>8&255,o[s++]=255&a,o},wn="undefined"==typeof btoa?require("btoa"):btoa;const vn=new Set(["narrowpeak","broadpeak","regionpeak","peaks","bedgraph","wig","gff3","gff","gtf","fusionjuncspan","refflat","seg","aed","bed","vcf","bb","bigbed","bw","bigwig","bam","tdf","refgene","genepred","genepredext","bedpe","bp","snp","rmsk","cram","gwas"]);function Sn(t){var e,r;if((t=t.toLowerCase()).endsWith("refgene.txt.gz")||t.endsWith("refgene.txt.bgz")||t.endsWith("refgene.txt")||t.endsWith("refgene.sorted.txt.gz")||t.endsWith("refgene.sorted.txt.bgz"))return"refgene";switch((e=t.indexOf("?"))>0&&(t=t.substr(0,e)),t.endsWith(".gz")&&(t=t.substr(0,t.length-3)),(t.endsWith(".txt")||t.endsWith(".tab")||t.endsWith(".bgz"))&&(t=t.substr(0,t.length-4)),r=(e=t.lastIndexOf("."))<0?t:t.substr(e+1)){case"bw":return"bigwig";case"bb":return"bigbed";default:return vn.has(r)?r:void 0}}"object"==typeof process&&"undefined"==typeof window&&(global.atob=function(t){return Buffer.from(t,"base64").toString("binary")});const Rn={strictMode:!1,key:["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],q:{name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/}};function En(t){return t.indexOf("drive.google.com")>=0||t.indexOf("www.googleapis.com/drive")>0}function xn(t){var e=Cn(t);return e?"https://www.googleapis.com/drive/v3/files/"+e+"?alt=media&supportsTeamDrives=true":t}function Cn(t){var e,r;if(t.includes("/open?id=")){if(e=t.indexOf("/open?id=")+9,r=t.indexOf("&"),e>0&&r>e)return t.substring(e,r);if(e>0)return t.substring(e)}else if(t.includes("/file/d/"))return e=t.indexOf("/file/d/")+8,r=t.lastIndexOf("/"),t.substring(e,r)}async function Dn(t){if("undefined"==typeof gapi)throw Error("Google authentication requires the 'gapi' library");if(!gapi.auth2)throw Error("Google 'auth2' has not been initialized");let e=gapi.auth2.getAuthInstance().currentUser.get();if(e.isSignedIn()){e.hasGrantedScopes(t)||await e.grant({scope:t});const{access_token:r,expires_at:n}=e.getAuthResponse();if(Date.now()<n-3e5)return{access_token:r,expires_at:n};{const{access_token:t,expires_at:r}=e.reloadAuthResponse();return{access_token:t,expires_at:r}}}{e=await async function(t){const e=new gapi.auth2.SigninOptionsBuilder;return e.setPrompt("select_account"),e.setScope(t),gapi.auth2.getAuthInstance().signIn(e)}(t);const{access_token:r,expires_at:n}=e.getAuthResponse();return{access_token:r,expires_at:n}}}async function kn(t,e){if("undefined"==typeof gapi)throw Error("Google authentication requires the 'gapi' library");"undefined"!=typeof google&&google.picker||await async function(){return new Promise((function(t,e){gapi.load("picker",{callback:t,onerror:e})}))}();const{access_token:r}=await Dn("https://www.googleapis.com/auth/drive.file");if(!r)throw Error("Sign into Google before using picker");{const n=new google.picker.DocsView(google.picker.ViewId.DOCS);n.setIncludeFolders(!0);const i=new google.picker.DocsView(google.picker.ViewId.DOCS);let a;i.setEnableTeamDrives(!0),i.setIncludeFolders(!0),a=t?(new google.picker.PickerBuilder).enableFeature(google.picker.Feature.MULTISELECT_ENABLED).setOAuthToken(r).addView(n).addView(i).enableFeature(google.picker.Feature.SUPPORT_TEAM_DRIVES).setCallback((function(t){t[google.picker.Response.ACTION]===google.picker.Action.PICKED&&e(t[google.picker.Response.DOCUMENTS])})).build():(new google.picker.PickerBuilder).disableFeature(google.picker.Feature.MULTISELECT_ENABLED).setOAuthToken(r).addView(n).addView(i).enableFeature(google.picker.Feature.SUPPORT_TEAM_DRIVES).setCallback((function(t){t[google.picker.Response.ACTION]===google.picker.Action.PICKED&&e(t[google.picker.Response.DOCUMENTS])})).build(),a.setVisible(!0)}}async function Ln(t){let e="https://www.googleapis.com/drive/v3/files/"+Cn(t)+"?supportsTeamDrives=true";const r=gapi.apiKey;r&&(e+="&key="+r);const n=await fetch(e);let i=await n.json();if(i.error&&404===i.error.code){const{access_token:t}=await Dn("https://www.googleapis.com/auth/drive.readonly");if(!t)throw Error(i.error);{const r=await fetch(e,{headers:{Authorization:"Bearer "+t}});if(i=await r.json(),i.error)throw Error(i.error)}}return i}let Tn;function In(t,e){e.addEventListener("mousedown",Bn.bind(t))}function Bn(t){t.stopPropagation(),t.preventDefault();!function(t){if(!t.getClientRects().length)return{top:0,left:0};const e=t.getBoundingClientRect(),r=t.ownerDocument.defaultView;e.top,r.pageYOffset,e.left,r.pageXOffset}(this);const e=An.bind(this),r=On.bind(this),n=getComputedStyle(this),i=parseInt(n.top.replace("px","")),a=parseInt(n.left.replace("px",""));Tn={dragFunction:e,dragEndFunction:r,screenX:t.screenX,screenY:t.screenY,top:i,left:a},document.addEventListener("mousemove",e),document.addEventListener("mouseup",r),document.addEventListener("mouseleave",r),document.addEventListener("mouseexit",r)}function An(t){if(!Tn)return;t.stopPropagation(),t.preventDefault();const e=t.screenX-Tn.screenX,r=t.screenY-Tn.screenY;this.style.left=Tn.left+e+"px",this.style.top=Tn.top+r+"px"}function On(t){if(!Tn)return;t.stopPropagation(),t.preventDefault();const e=Tn.dragFunction,r=Tn.dragEndFunction;document.removeEventListener("mousemove",e),document.removeEventListener("mouseup",r),document.removeEventListener("mouseleave",r),document.removeEventListener("mouseexit",r),Tn=void 0}const _n={401:"Access unauthorized",403:"Access forbidden",404:"Not found"};class Mn{constructor(t){this.container=cn({class:"igv-widgets-alert-dialog-container"}),t.appendChild(this.container),this.parent=t,this.container.setAttribute("tabIndex","-1");const e=cn();this.container.appendChild(e);const r=cn();e.appendChild(r),r.textContent="ERROR";let n=cn({id:"igv-widgets-alert-dialog-body"});this.container.appendChild(n),this.body=cn({id:"igv-widgets-alert-dialog-body-copy"}),n.appendChild(this.body);let i=cn();this.container.appendChild(i),this.ok=cn(),i.appendChild(this.ok),this.ok.textContent="OK";const a=()=>{"function"==typeof this.callback&&(this.callback("OK"),this.callback=void 0),this.body.innerHTML="",fn(this.container)};this.ok.addEventListener("click",(t=>{t.stopPropagation(),a()})),this.container.addEventListener("keypress",(t=>{t.stopPropagation(),"Enter"===t.key&&a()})),In(this.container,e),fn(this.container)}present(t,e){let r=t.message||t;_n.hasOwnProperty(r)&&(r=_n[r]),this.body.innerHTML=r,this.callback=e,hn(this.container);const{width:n,height:i}=this.parent.getBoundingClientRect(),{width:a,height:o}=this.container.getBoundingClientRect(),s=.5*(n-a),l=.5*(i-o);this.container.style.left=s+"px",this.container.style.top=l+"px",this.container.focus()}}var zn=new class{constructor(t){t&&(this.alertDialog=void 0)}init(t){this.alertDialog=new Mn(t)}present(t,e){this.alertDialog.present(t,e)}};let Fn={};class Un{constructor(){}subscribe(t,e){let r=Fn[t];void 0===r&&(r=[],Fn[t]=r),r.push(e)}post(t){const e=Fn[t.type];if(e)for(let r of e)"function"==typeof r.receiveEvent?r.receiveEvent(t):"function"==typeof r&&r(t)}static createEvent(t,e,r){return{type:t,data:e||{},propogate:void 0===r||r}}}function Hn(t){this.mode=Nn.MODE_8BIT_BYTE,this.data=t,this.parsedData=[];for(var e=0,r=this.data.length;e<r;e++){var n=[],i=this.data.charCodeAt(e);i>65536?(n[0]=240|(1835008&i)>>>18,n[1]=128|(258048&i)>>>12,n[2]=128|(4032&i)>>>6,n[3]=128|63&i):i>2048?(n[0]=224|(61440&i)>>>12,n[1]=128|(4032&i)>>>6,n[2]=128|63&i):i>128?(n[0]=192|(1984&i)>>>6,n[1]=128|63&i):n[0]=i,this.parsedData.push(n)}this.parsedData=Array.prototype.concat.apply([],this.parsedData),this.parsedData.length!=this.data.length&&(this.parsedData.unshift(191),this.parsedData.unshift(187),this.parsedData.unshift(239))}function Pn(t,e){this.typeNumber=t,this.errorCorrectLevel=e,this.modules=null,this.moduleCount=0,this.dataCache=null,this.dataList=[]}Un.globalBus=new Un,Hn.prototype={getLength:function(t){return this.parsedData.length},write:function(t){for(var e=0,r=this.parsedData.length;e<r;e++)t.put(this.parsedData[e],8)}},Pn.prototype={addData:function(t){var e=new Hn(t);this.dataList.push(e),this.dataCache=null},isDark:function(t,e){if(t<0||this.moduleCount<=t||e<0||this.moduleCount<=e)throw new Error(t+","+e);return this.modules[t][e]},getModuleCount:function(){return this.moduleCount},make:function(){this.makeImpl(!1,this.getBestMaskPattern())},makeImpl:function(t,e){this.moduleCount=4*this.typeNumber+17,this.modules=new Array(this.moduleCount);for(var r=0;r<this.moduleCount;r++){this.modules[r]=new Array(this.moduleCount);for(var n=0;n<this.moduleCount;n++)this.modules[r][n]=null}this.setupPositionProbePattern(0,0),this.setupPositionProbePattern(this.moduleCount-7,0),this.setupPositionProbePattern(0,this.moduleCount-7),this.setupPositionAdjustPattern(),this.setupTimingPattern(),this.setupTypeInfo(t,e),this.typeNumber>=7&&this.setupTypeNumber(t),null==this.dataCache&&(this.dataCache=Pn.createData(this.typeNumber,this.errorCorrectLevel,this.dataList)),this.mapData(this.dataCache,e)},setupPositionProbePattern:function(t,e){for(var r=-1;r<=7;r++)if(!(t+r<=-1||this.moduleCount<=t+r))for(var n=-1;n<=7;n++)e+n<=-1||this.moduleCount<=e+n||(this.modules[t+r][e+n]=0<=r&&r<=6&&(0==n||6==n)||0<=n&&n<=6&&(0==r||6==r)||2<=r&&r<=4&&2<=n&&n<=4)},getBestMaskPattern:function(){for(var t=0,e=0,r=0;r<8;r++){this.makeImpl(!0,r);var n=Xn.getLostPoint(this);(0==r||t>n)&&(t=n,e=r)}return e},createMovieClip:function(t,e,r){var n=t.createEmptyMovieClip(e,r);this.make();for(var i=0;i<this.modules.length;i++)for(var a=1*i,o=0;o<this.modules[i].length;o++){var s=1*o;this.modules[i][o]&&(n.beginFill(0,100),n.moveTo(s,a),n.lineTo(s+1,a),n.lineTo(s+1,a+1),n.lineTo(s,a+1),n.endFill())}return n},setupTimingPattern:function(){for(var t=8;t<this.moduleCount-8;t++)null==this.modules[t][6]&&(this.modules[t][6]=t%2==0);for(var e=8;e<this.moduleCount-8;e++)null==this.modules[6][e]&&(this.modules[6][e]=e%2==0)},setupPositionAdjustPattern:function(){for(var t=Xn.getPatternPosition(this.typeNumber),e=0;e<t.length;e++)for(var r=0;r<t.length;r++){var n=t[e],i=t[r];if(null==this.modules[n][i])for(var a=-2;a<=2;a++)for(var o=-2;o<=2;o++)this.modules[n+a][i+o]=-2==a||2==a||-2==o||2==o||0==a&&0==o}},setupTypeNumber:function(t){for(var e=Xn.getBCHTypeNumber(this.typeNumber),r=0;r<18;r++){var n=!t&&1==(e>>r&1);this.modules[Math.floor(r/3)][r%3+this.moduleCount-8-3]=n}for(r=0;r<18;r++){n=!t&&1==(e>>r&1);this.modules[r%3+this.moduleCount-8-3][Math.floor(r/3)]=n}},setupTypeInfo:function(t,e){for(var r=this.errorCorrectLevel<<3|e,n=Xn.getBCHTypeInfo(r),i=0;i<15;i++){var a=!t&&1==(n>>i&1);i<6?this.modules[i][8]=a:i<8?this.modules[i+1][8]=a:this.modules[this.moduleCount-15+i][8]=a}for(i=0;i<15;i++){a=!t&&1==(n>>i&1);i<8?this.modules[8][this.moduleCount-i-1]=a:i<9?this.modules[8][15-i-1+1]=a:this.modules[8][15-i-1]=a}this.modules[this.moduleCount-8][8]=!t},mapData:function(t,e){for(var r=-1,n=this.moduleCount-1,i=7,a=0,o=this.moduleCount-1;o>0;o-=2)for(6==o&&o--;;){for(var s=0;s<2;s++)if(null==this.modules[n][o-s]){var l=!1;a<t.length&&(l=1==(t[a]>>>i&1)),Xn.getMask(e,n,o-s)&&(l=!l),this.modules[n][o-s]=l,-1==--i&&(a++,i=7)}if((n+=r)<0||this.moduleCount<=n){n-=r,r=-r;break}}}},Pn.PAD0=236,Pn.PAD1=17,Pn.createData=function(t,e,r){for(var n=ei.getRSBlocks(t,e),i=new ri,a=0;a<r.length;a++){var o=r[a];i.put(o.mode,4),i.put(o.getLength(),Xn.getLengthInBits(o.mode,t)),o.write(i)}var s=0;for(a=0;a<n.length;a++)s+=n[a].dataCount;if(i.getLengthInBits()>8*s)throw new Error("code length overflow. ("+i.getLengthInBits()+">"+8*s+")");for(i.getLengthInBits()+4<=8*s&&i.put(0,4);i.getLengthInBits()%8!=0;)i.putBit(!1);for(;!(i.getLengthInBits()>=8*s||(i.put(Pn.PAD0,8),i.getLengthInBits()>=8*s));)i.put(Pn.PAD1,8);return Pn.createBytes(i,n)},Pn.createBytes=function(t,e){for(var r=0,n=0,i=0,a=new Array(e.length),o=new Array(e.length),s=0;s<e.length;s++){var l=e[s].dataCount,c=e[s].totalCount-l;n=Math.max(n,l),i=Math.max(i,c),a[s]=new Array(l);for(var u=0;u<a[s].length;u++)a[s][u]=255&t.buffer[u+r];r+=l;var f=Xn.getErrorCorrectPolynomial(c),h=new ti(a[s],f.getLength()-1).mod(f);o[s]=new Array(f.getLength()-1);for(u=0;u<o[s].length;u++){var p=u+h.getLength()-o[s].length;o[s][u]=p>=0?h.get(p):0}}var d=0;for(u=0;u<e.length;u++)d+=e[u].totalCount;var g=new Array(d),m=0;for(u=0;u<n;u++)for(s=0;s<e.length;s++)u<a[s].length&&(g[m++]=a[s][u]);for(u=0;u<i;u++)for(s=0;s<e.length;s++)u<o[s].length&&(g[m++]=o[s][u]);return g};for(var Nn={MODE_NUMBER:1,MODE_ALPHA_NUM:2,MODE_8BIT_BYTE:4,MODE_KANJI:8},$n={L:1,M:0,Q:3,H:2},jn=0,Kn=1,Gn=2,Zn=3,Vn=4,Yn=5,qn=6,Wn=7,Xn={PATTERN_POSITION_TABLE:[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],G15:1335,G18:7973,G15_MASK:21522,getBCHTypeInfo:function(t){for(var e=t<<10;Xn.getBCHDigit(e)-Xn.getBCHDigit(Xn.G15)>=0;)e^=Xn.G15<<Xn.getBCHDigit(e)-Xn.getBCHDigit(Xn.G15);return(t<<10|e)^Xn.G15_MASK},getBCHTypeNumber:function(t){for(var e=t<<12;Xn.getBCHDigit(e)-Xn.getBCHDigit(Xn.G18)>=0;)e^=Xn.G18<<Xn.getBCHDigit(e)-Xn.getBCHDigit(Xn.G18);return t<<12|e},getBCHDigit:function(t){for(var e=0;0!=t;)e++,t>>>=1;return e},getPatternPosition:function(t){return Xn.PATTERN_POSITION_TABLE[t-1]},getMask:function(t,e,r){switch(t){case jn:return(e+r)%2==0;case Kn:return e%2==0;case Gn:return r%3==0;case Zn:return(e+r)%3==0;case Vn:return(Math.floor(e/2)+Math.floor(r/3))%2==0;case Yn:return e*r%2+e*r%3==0;case qn:return(e*r%2+e*r%3)%2==0;case Wn:return(e*r%3+(e+r)%2)%2==0;default:throw new Error("bad maskPattern:"+t)}},getErrorCorrectPolynomial:function(t){for(var e=new ti([1],0),r=0;r<t;r++)e=e.multiply(new ti([1,Jn.gexp(r)],0));return e},getLengthInBits:function(t,e){if(1<=e&&e<10)switch(t){case Nn.MODE_NUMBER:return 10;case Nn.MODE_ALPHA_NUM:return 9;case Nn.MODE_8BIT_BYTE:case Nn.MODE_KANJI:return 8;default:throw new Error("mode:"+t)}else if(e<27)switch(t){case Nn.MODE_NUMBER:return 12;case Nn.MODE_ALPHA_NUM:return 11;case Nn.MODE_8BIT_BYTE:return 16;case Nn.MODE_KANJI:return 10;default:throw new Error("mode:"+t)}else{if(!(e<41))throw new Error("type:"+e);switch(t){case Nn.MODE_NUMBER:return 14;case Nn.MODE_ALPHA_NUM:return 13;case Nn.MODE_8BIT_BYTE:return 16;case Nn.MODE_KANJI:return 12;default:throw new Error("mode:"+t)}}},getLostPoint:function(t){for(var e=t.getModuleCount(),r=0,n=0;n<e;n++)for(var i=0;i<e;i++){for(var a=0,o=t.isDark(n,i),s=-1;s<=1;s++)if(!(n+s<0||e<=n+s))for(var l=-1;l<=1;l++)i+l<0||e<=i+l||0==s&&0==l||o==t.isDark(n+s,i+l)&&a++;a>5&&(r+=3+a-5)}for(n=0;n<e-1;n++)for(i=0;i<e-1;i++){var c=0;t.isDark(n,i)&&c++,t.isDark(n+1,i)&&c++,t.isDark(n,i+1)&&c++,t.isDark(n+1,i+1)&&c++,0!=c&&4!=c||(r+=3)}for(n=0;n<e;n++)for(i=0;i<e-6;i++)t.isDark(n,i)&&!t.isDark(n,i+1)&&t.isDark(n,i+2)&&t.isDark(n,i+3)&&t.isDark(n,i+4)&&!t.isDark(n,i+5)&&t.isDark(n,i+6)&&(r+=40);for(i=0;i<e;i++)for(n=0;n<e-6;n++)t.isDark(n,i)&&!t.isDark(n+1,i)&&t.isDark(n+2,i)&&t.isDark(n+3,i)&&t.isDark(n+4,i)&&!t.isDark(n+5,i)&&t.isDark(n+6,i)&&(r+=40);var u=0;for(i=0;i<e;i++)for(n=0;n<e;n++)t.isDark(n,i)&&u++;return r+=10*(Math.abs(100*u/e/e-50)/5)}},Jn={glog:function(t){if(t<1)throw new Error("glog("+t+")");return Jn.LOG_TABLE[t]},gexp:function(t){for(;t<0;)t+=255;for(;t>=256;)t-=255;return Jn.EXP_TABLE[t]},EXP_TABLE:new Array(256),LOG_TABLE:new Array(256)},Qn=0;Qn<8;Qn++)Jn.EXP_TABLE[Qn]=1<<Qn;for(Qn=8;Qn<256;Qn++)Jn.EXP_TABLE[Qn]=Jn.EXP_TABLE[Qn-4]^Jn.EXP_TABLE[Qn-5]^Jn.EXP_TABLE[Qn-6]^Jn.EXP_TABLE[Qn-8];for(Qn=0;Qn<255;Qn++)Jn.LOG_TABLE[Jn.EXP_TABLE[Qn]]=Qn;function ti(t,e){if(null==t.length)throw new Error(t.length+"/"+e);for(var r=0;r<t.length&&0==t[r];)r++;this.num=new Array(t.length-r+e);for(var n=0;n<t.length-r;n++)this.num[n]=t[n+r]}function ei(t,e){this.totalCount=t,this.dataCount=e}function ri(){this.buffer=[],this.length=0}ti.prototype={get:function(t){return this.num[t]},getLength:function(){return this.num.length},multiply:function(t){for(var e=new Array(this.getLength()+t.getLength()-1),r=0;r<this.getLength();r++)for(var n=0;n<t.getLength();n++)e[r+n]^=Jn.gexp(Jn.glog(this.get(r))+Jn.glog(t.get(n)));return new ti(e,0)},mod:function(t){if(this.getLength()-t.getLength()<0)return this;for(var e=Jn.glog(this.get(0))-Jn.glog(t.get(0)),r=new Array(this.getLength()),n=0;n<this.getLength();n++)r[n]=this.get(n);for(n=0;n<t.getLength();n++)r[n]^=Jn.gexp(Jn.glog(t.get(n))+e);return new ti(r,0).mod(t)}},ei.RS_BLOCK_TABLE=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]],ei.getRSBlocks=function(t,e){var r=ei.getRsBlockTable(t,e);if(null==r)throw new Error("bad rs block @ typeNumber:"+t+"/errorCorrectLevel:"+e);for(var n=r.length/3,i=[],a=0;a<n;a++)for(var o=r[3*a+0],s=r[3*a+1],l=r[3*a+2],c=0;c<o;c++)i.push(new ei(s,l));return i},ei.getRsBlockTable=function(t,e){switch(e){case $n.L:return ei.RS_BLOCK_TABLE[4*(t-1)+0];case $n.M:return ei.RS_BLOCK_TABLE[4*(t-1)+1];case $n.Q:return ei.RS_BLOCK_TABLE[4*(t-1)+2];case $n.H:return ei.RS_BLOCK_TABLE[4*(t-1)+3];default:return}},ri.prototype={get:function(t){var e=Math.floor(t/8);return 1==(this.buffer[e]>>>7-t%8&1)},put:function(t,e){for(var r=0;r<e;r++)this.putBit(1==(t>>>e-r-1&1))},getLengthInBits:function(){return this.length},putBit:function(t){var e=Math.floor(this.length/8);this.buffer.length<=e&&this.buffer.push(0),t&&(this.buffer[e]|=128>>>this.length%8),this.length++}};var ni=[[17,14,11,7],[32,26,20,14],[53,42,32,24],[78,62,46,34],[106,84,60,44],[134,106,74,58],[154,122,86,64],[192,152,108,84],[230,180,130,98],[271,213,151,119],[321,251,177,137],[367,287,203,155],[425,331,241,177],[458,362,258,194],[520,412,292,220],[586,450,322,250],[644,504,364,280],[718,560,394,310],[792,624,442,338],[858,666,482,382],[929,711,509,403],[1003,779,565,439],[1091,857,611,461],[1171,911,661,511],[1273,997,715,535],[1367,1059,751,593],[1465,1125,805,625],[1528,1190,868,658],[1628,1264,908,698],[1732,1370,982,742],[1840,1452,1030,790],[1952,1538,1112,842],[2068,1628,1168,898],[2188,1722,1228,958],[2303,1809,1283,983],[2431,1911,1351,1051],[2563,1989,1423,1093],[2699,2099,1499,1139],[2809,2213,1579,1219],[2953,2331,1663,1273]];let ii;function ai(t,e){for(var r=1,n=function(t){var e=encodeURI(t).toString().replace(/\%[0-9a-fA-F]{2}/g,"a");return e.length+(e.length!=t?3:0)}(t),i=0,a=ni.length;i<=a;i++){var o=0;switch(e){case $n.L:o=ni[i][0];break;case $n.M:o=ni[i][1];break;case $n.Q:o=ni[i][2];break;case $n.H:o=ni[i][3]}if(n<=o)break;r++}if(r>ni.length)throw new Error("Too long data");return r}"svg"===document.documentElement.tagName.toLowerCase()?(ii=function(t,e){this._el=t,this._htOption=e},ii.prototype.draw=function(t){var e=this._htOption,r=this._el,n=t.getModuleCount();Math.floor(e.width/n),Math.floor(e.height/n);function i(t,e){var r=document.createElementNS("http://www.w3.org/2000/svg",t);for(var n in e)e.hasOwnProperty(n)&&r.setAttribute(n,e[n]);return r}this.clear();var a=i("svg",{viewBox:"0 0 "+String(n)+" "+String(n),width:"100%",height:"100%",fill:e.colorLight});a.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:xlink","http://www.w3.org/1999/xlink"),r.appendChild(a),a.appendChild(i("rect",{fill:e.colorLight,width:"100%",height:"100%"})),a.appendChild(i("rect",{fill:e.colorDark,width:"1",height:"1",id:"template"}));for(var o=0;o<n;o++)for(var s=0;s<n;s++)if(t.isDark(o,s)){var l=i("use",{x:String(s),y:String(o)});l.setAttributeNS("http://www.w3.org/1999/xlink","href","#template"),a.appendChild(l)}},ii.prototype.clear=function(){for(;this._el.hasChildNodes();)this._el.removeChild(this._el.lastChild)}):(ii=function(t,e){this._bIsPainted=!1,this._htOption=e,this._elCanvas=document.createElement("canvas"),this._elCanvas.width=e.width,this._elCanvas.height=e.height,t.appendChild(this._elCanvas),this._el=t,this._oContext=this._elCanvas.getContext("2d"),this._bIsPainted=!1,this._elImage=document.createElement("img"),this._elImage.alt="Scan me!",this._elImage.style.display="none",this._el.appendChild(this._elImage),this._bSupportDataURI=null},ii.prototype.draw=function(t){var e=this._elImage,r=this._oContext,n=this._htOption,i=t.getModuleCount(),a=n.width/i,o=n.height/i,s=Math.round(a),l=Math.round(o);e.style.display="none",this.clear();for(var c=0;c<i;c++)for(var u=0;u<i;u++){var f=t.isDark(c,u),h=u*a,p=c*o;r.strokeStyle=f?n.colorDark:n.colorLight,r.lineWidth=1,r.fillStyle=f?n.colorDark:n.colorLight,r.fillRect(h,p,a,o),r.strokeRect(Math.floor(h)+.5,Math.floor(p)+.5,s,l),r.strokeRect(Math.ceil(h)-.5,Math.ceil(p)-.5,s,l)}this._bIsPainted=!0},ii.prototype.makeImage=function(){this._bIsPainted&&(this._elImage.src=this._elCanvas.toDataURL("image/png"),this._elImage.style.display="block",this._elCanvas.style.display="none")},ii.prototype.isPainted=function(){return this._bIsPainted},ii.prototype.clear=function(){this._oContext.clearRect(0,0,this._elCanvas.width,this._elCanvas.height),this._bIsPainted=!1},ii.prototype.round=function(t){return t?Math.floor(1e3*t)/1e3:t});const oi=function(t,e){if(this._htOption={width:256,height:256,typeNumber:4,colorDark:"#000000",colorLight:"#ffffff",correctLevel:$n.H},"string"==typeof e&&(e={text:e}),e)for(var r in e)this._htOption[r]=e[r];"string"==typeof t&&(t=document.getElementById(t)),this._htOption.useSVG&&(ii=svgDrawer),this._el=t,this._oQRCode=null,this._oDrawing=new ii(this._el,this._htOption),this._htOption.text&&this.makeCode(this._htOption.text)};oi.prototype.makeCode=function(t){this._oQRCode=new Pn(ai(t,this._htOption.correctLevel),this._htOption.correctLevel),this._oQRCode.addData(t),this._oQRCode.make(),this._el.title=t,this._oDrawing.draw(this._oQRCode),this.makeImage()},oi.prototype.makeImage=function(){"function"==typeof this._oDrawing.makeImage&&this._oDrawing.makeImage()},oi.prototype.clear=function(){this._oDrawing.clear()},oi.CorrectLevel=$n;class si{constructor(){this.dictionary={}}inputHandler(t,e){this.ingestPath(t,e)}ingestPath(t,e){let r=!0===e?"index":"data";this.dictionary[r]=t.trim()}didDragDrop(t){var e;return(e=t.files)&&e.length>0}dragDropHandler(t,e){var r,n;r=t.getData("text/uri-list"),(n=t.files)&&n.length>0?this.ingestPath(n[0],e):r&&""!==r&&this.ingestPath(r,e)}indexName(){return li(this.dictionary.index)}dataName(){return li(this.dictionary.data)}reset(){this.dictionary={}}}function li(t){return bn(t)?t.name:t}class ci{constructor({widgetParent:t,dataTitle:e,indexTitle:r,mode:n,fileLoadManager:i,dataOnly:a,doURL:o}){let s;var l,c,u;e=e||"Data",r=r||"Index",this.fileLoadManager=i,a=a||!1,o=o||!1,this.container=cn({class:"igv-file-load-widget-container"}),t.appendChild(this.container),s="localFile"===n?{parent:this.container,doURL:!1,dataTitle:e+" file",indexTitle:r+" file",dataOnly:a}:{parent:this.container,doURL:!0,dataTitle:e+" URL",indexTitle:r+" URL",dataOnly:a},this.createInputContainer(s),this.error_message=cn({class:"igv-flw-error-message-container"}),this.container.appendChild(this.error_message),this.error_message.appendChild(cn({class:"igv-flw-error-message"})),l=this.error_message,c=()=>{this.dismissErrorMessage()},u=document.createElement("div"),l.appendChild(u),u.appendChild(pn("times")),u.addEventListener("click",(function(t){t.preventDefault(),t.stopPropagation(),c()})),this.dismissErrorMessage()}retrievePaths(){this.fileLoadManager.ingestPath(this.inputData.value,!1),this.inputIndex&&this.fileLoadManager.ingestPath(this.inputIndex.value,!0);let t=[];return this.fileLoadManager.dictionary&&(this.fileLoadManager.dictionary.data&&t.push(this.fileLoadManager.dictionary.data),this.fileLoadManager.dictionary.index&&t.push(this.fileLoadManager.dictionary.index)),this.container.querySelectorAll(".igv-flw-input-row").forEach((t=>{t.querySelector("input").value=""})),t}presentErrorMessage(t){this.error_message.querySelector(".igv-flw-error-message").textContent=t,hn(this.error_message)}dismissErrorMessage(){fn(this.error_message),this.error_message.querySelector(".igv-flw-error-message").textContent=""}present(){hn(this.container)}dismiss(){this.dismissErrorMessage(),this.container.querySelectorAll(".igv-flw-input-row").forEach((t=>{t.querySelector("input").value=""})),this.fileLoadManager.reset()}createInputContainer({parent:t,doURL:e,dataTitle:r,indexTitle:n,dataOnly:i}){const a=cn({class:"igv-flw-input-container"});t.appendChild(a);const o=cn({class:"igv-flw-input-row"});let s;if(a.appendChild(o),s=cn({class:"igv-flw-input-label"}),o.appendChild(s),s.textContent=r,!0===e?this.createURLContainer(o,"igv-flw-data-url",!1):this.createLocalFileContainer(o,"igv-flw-local-data-file",!1),!0===i)return;const l=cn({class:"igv-flw-input-row"});a.appendChild(l),s=cn({class:"igv-flw-input-label"}),l.appendChild(s),s.textContent=n,!0===e?this.createURLContainer(l,"igv-flw-index-url",!0):this.createLocalFileContainer(l,"igv-flw-local-index-file",!0)}createURLContainer(t,e,r){const n=un("input");n.setAttribute("type","text"),t.appendChild(n),r?this.inputIndex=n:this.inputData=n}createLocalFileContainer(t,e,r){const n=cn({class:"igv-flw-file-chooser-container"});t.appendChild(n);const i=`${e}${("0000"+(Math.random()*Math.pow(36,4)<<0).toString(36)).slice(-4)}`,a=un("label");a.setAttribute("for",i),n.appendChild(a),a.textContent="Choose file";const o=un("input",{class:"igv-flw-file-chooser-input"});o.setAttribute("id",i),o.setAttribute("name",i),o.setAttribute("type","file"),n.appendChild(o);const s=cn({class:"igv-flw-local-file-name-container"});t.appendChild(s),fn(s),o.addEventListener("change",(t=>{this.dismissErrorMessage();const e=t.target.files[0];this.fileLoadManager.inputHandler(e,r);const{name:n}=e;s.textContent=n,s.setAttribute("title",n),hn(s)}))}}function ui(t){let e,r,n,i,a;if(e=yn(t),!1!==fi(e)){if(r=t.split(".").pop(),n=function(t){const e={index:"idx",isOptional:!0},r={fa:{index:"fai",isOptional:!1},fasta:{index:"fai",isOptional:!1},bam:{index:"bai",isOptional:!1},cram:{index:"crai",isOptional:!1},gz:{index:"tbi",isOptional:!0},bgz:{index:"tbi",isOptional:!0}};return r[t]?r[t]:e}(r),i={},a=t+"."+n.index,i[a]={},i[a].data=t,i[a].isOptional=n.isOptional,"bam"===e||"cram"===e){let e,r;r=t.split("."),r.pop(),e=r.join(".")+"."+n.index,i[e]={},i[e].data=t,i[e].isOptional=n.isOptional}return i}}function fi(t){let e=new Set(["fa","fasta"]);return new Set([...TrackUtils.knownFileExtensions,...e]).has(t)}function hi(t,e,r){const n=()=>{t.dismiss(),$(e).modal("hide")},i=async()=>{!0===await r(t)&&(t.dismiss(),$(e).modal("hide"))};let a;a=e.querySelector(".modal-header button"),a.addEventListener("click",n),a=e.querySelector(".modal-footer button:nth-child(1)"),a.addEventListener("click",n);e.querySelector(".modal-footer button:nth-child(2)").addEventListener("click",i),e.addEventListener("keypress",(t=>{"Enter"===t.key&&i()}))}var pi=Object.freeze({__proto__:null,getIndexObjectWithDataName:ui,isKnownFileExtension:fi,configureModal:hi});class di{constructor({localFileInput:t,dropboxButton:e,googleEnabled:r,googleDriveButton:n,igvxhr:i}){this.igvxhr=i,t.addEventListener("change",(async()=>{!0===di.isValidLocalFileInput(t)&&(await this.loadPaths(Array.from(t.files)),t.value="")})),e.addEventListener("click",(()=>{const t={success:t=>this.loadPaths(t.map((t=>t.link))),cancel:()=>{},linkType:"preview",multiselect:!0,folderselect:!1};Dropbox.choose(t)})),!1===r&&fn(n.parentElement),!0===r&&n&&n.addEventListener("click",(()=>{kn(!0,(t=>{const e=t.map((({name:t,url:e})=>({filename:t,name:t,google_url:xn(e)})));this.loadPaths(e)}))}))}async loadPaths(t){}static isValidLocalFileInput(t){return t.files&&t.files.length>0}static getIndexURL(t){return t?t[0]?t[0].path:t[1]?t[1].path:void 0:void 0}static getIndexPaths(t,e){return Object.keys(t).map((function(t){let r;r=ui(t);for(let t in r)r.hasOwnProperty(t)&&(r[t].missing=void 0===e[t]);return r})).filter((function(t){if(1===Object.keys(t).length){let e;return e=t[Object.keys(t)[0]],(!0!==e.missing||!0!==e.isOptional)&&(!1===e.missing&&!1===e.isOptional||!0===e.missing&&e.isOptional,!0)}return!0})).reduce((function(t,r){for(let n in r)if(r.hasOwnProperty(n)){let i;i=r[n],void 0===t[i.data]&&(t[i.data]=[]),t[i.data].push(!1===i.missing?{name:n,path:e[n]}:void 0)}return t}),{})}}const gi=new Set(["fai","fa","fasta"]),mi=new Set(["fna","fa","fasta"]),wi=new Set(["fai"]),yi="ERROR: Select both a sequence file (.fa or .fasta) and an index file (.fai).";class bi extends di{constructor({localFileInput:t,dropboxButton:e,googleEnabled:r,googleDriveButton:n,loadHandler:i,igvxhr:a}){super({localFileInput:t,dropboxButton:e,googleEnabled:r,googleDriveButton:n,igvxhr:a}),this.loadHandler=i}async loadPaths(t){if(1===t.length){const e=t[0];if("json"===yn(e)){const t=await this.igvxhr.loadJson(e.google_url||e);this.loadHandler(t)}else if("xml"===yn(e)){const t={};t[!0===bn(e)?"file":"url"]=e,this.loadHandler(t)}else zn.present(""+yi)}else if(2===t.length){let[e,r]=t.map((t=>yn(t)));if(!1===bi.extensionValidator(e,r))return void zn.present(""+yi);const[n,i]=bi.retrieveDataPathAndIndexPath(t);await this.loadHandler({fastaURL:n,indexURL:i})}else zn.present(""+yi)}static retrieveDataPathAndIndexPath(t){let[e,r]=t.map((t=>yn(t)));const[n,i]=t;let a,o;return mi.has(e)&&wi.has(r)?(a=n.google_url||n,o=i.google_url||i):(a=i.google_url||i,o=n.google_url||n),[a,o]}static extensionValidator(t,e){return!(!mi.has(t)||!wi.has(e))||mi.has(e)&&wi.has(t)}static pathValidator(t){return gi.has(t)}static configurationHandler(t,e,r){return{fastaURL:e,indexURL:di.getIndexURL(r[t])}}}class vi extends di{constructor({localFileInput:t,dropboxButton:e,googleEnabled:r,googleDriveButton:n,loadHandler:i,igvxhr:a}){super({localFileInput:t,dropboxButton:e,googleEnabled:r,googleDriveButton:n,igvxhr:a}),this.loadHandler=i}async loadPaths(t){const e=t[0];if("json"===yn(e)){const t=await this.igvxhr.loadJson(e.google_url||e);this.loadHandler(t)}else if("xml"===yn(e)){const t={};t[!0===bn(e)?"file":"url"]=e,this.loadHandler(t)}}}class Si{constructor({$localFileInput:t,$dropboxButton:e,$googleDriveButton:r,fileLoadHandler:n,multipleFileSelection:i}){this.fileLoadHandler=n,t.on("change",(async()=>{if(!0===Si.isValidLocalFileInput(t)){const e=t.get(0),{files:r}=e,i=Array.from(r);e.value="",await xi({paths:i,fileLoadHandler:n})}})),e.on("click",(()=>{const t={success:t=>xi({paths:t.map((({link:t})=>t)),fileLoadHandler:n}),cancel:()=>{},linkType:"preview",multiselect:i,folderselect:!1};Dropbox.choose(t)})),r&&r.on("click",(()=>{kn(i,(async t=>{await xi({paths:t.map((({name:t,url:e})=>e)),fileLoadHandler:n})}))}))}async loadPaths(t){await xi({paths:t,fileLoadHandler:this.fileLoadHandler})}static isValidLocalFileInput(t){return t.get(0).files&&t.get(0).files.length>0}static async getFilename(t){if(t instanceof File)return t.name;if(En(t)){const e=await Ln(t);return e.name||e.originalFileName}return function(t){for(var e=Rn,r=e.parser.loose.exec(t),n={},i=14;i--;)n[e.key[i]]=r[i]||"";return n[e.q.name]={},n[e.key[12]].replace(e.q.parser,(function(t,r,i){r&&(n[e.q.name][r]=i)})),n}(t).file}static isGoogleDrivePath(t){return!(t instanceof File)&&En(t)}}const Ri=new Set(["bai","csi","tbi","idx","crai"]),Ei=new Set(["bam","cram"]);async function xi({paths:t,fileLoadHandler:e}){try{await async function({paths:t,fileLoadHandler:e}){const r=new Map,n=[];for(let e of t){const t=await Si.getFilename(e),i=yn(t);if(Ri.has(i)){const n=Ci(t,i);r.set(n,{indexURL:e,indexFilename:Si.isGoogleDrivePath(e)?t:void 0})}else n.push(e)}const i=[];for(let t of n){const e=await Si.getFilename(t),n=Sn(e);if(!n)throw new Error(`ERROR: Unable to load track file ${e}. Unknown format.`);if(r.has(e)){const{indexURL:a,indexFilename:o}=r.get(e);i.push({url:t,name:e,indexURL:a,indexFilename:o,format:n})}else{if(Ei.has(yn(e)))throw new Error(`ERROR: ${e} does not have an index file.`);i.push({url:t,name:e,format:n})}}i&&e(i)}({paths:t,fileLoadHandler:e})}catch(t){console.error(t),zn.present(t.message)}}const Ci=(t,e)=>{let r=t.substring(0,t.length-(e.length+1));return"bai"!==e||r.endsWith("bam")?"crai"!==e||r.endsWith("cram")?r:r+".cram":r+".bam"},Di=(t,e)=>`<div id="${t}" class="modal">\n\n            <div class="modal-dialog modal-lg">\n    \n                <div class="modal-content">\n    \n                    <div class="modal-header">\n                        <div class="modal-title">${e}</div>\n    \n                        <button type="button" class="close" data-dismiss="modal">\n                            <span>&times;</span>\n                        </button>\n    \n                    </div>\n    \n                    <div class="modal-body">\n                    </div>\n    \n                    <div class="modal-footer">\n                        <button type="button" class="btn btn-sm btn-outline-secondary" data-dismiss="modal">Cancel</button>\n                        <button type="button" class="btn btn-sm btn-secondary" data-dismiss="modal">OK</button>\n                    </div>\n    \n                </div>\n    \n            </div>\n\n        </div>`;let ki;function Li(t,e,r,n,i,a,o,s,l,c,u){const f=$(Di(o,"Session URL"));t.append(f),l||$("#"+a).parent().hide();const h={widgetParent:f.find(".modal-body").get(0),dataTitle:"Session",indexTitle:void 0,mode:"url",fileLoadManager:new si,dataOnly:!0,doURL:void 0};ki=new ci(h);const p={localFileInput:document.querySelector("#"+n),dropboxButton:document.querySelector("#"+i),googleEnabled:l,googleDriveButton:document.querySelector("#"+a),loadHandler:c,igvxhr:e},d=new vi(p);hi(ki,f.get(0),(async t=>(await d.loadPaths(t.retrievePaths()),!0))),function(t,e,r,n){const i=$(`<div id="${n}" class="modal fade igv-app-file-save-modal">\n\n            <div class="modal-dialog modal-lg">\n    \n                <div class="modal-content">\n    \n                    <div class="modal-header">\n    \n                        <div class="modal-title">\n                            <div>\n                                Save Session File\n                            </div>\n                        </div>\n    \n                        <button type="button" class="close" data-dismiss="modal">\n                            <span aria-hidden="true">&times;</span>\n                        </button>\n                    </div>\n    \n                    <div class="modal-body">\n                        <input class="form-control" type="text" placeholder="igv-app-session.json">\n    \n                        <div>\n                            Enter session filename with .json suffix\n                        </div>\n    \n                    </div>\n    \n                    <div class="modal-footer">\n                        <button type="button" class="btn btn-sm btn-outline-secondary" data-dismiss="modal">Cancel</button>\n                        <button type="button" class="btn btn-sm btn-secondary">OK</button>\n                    </div>\n    \n                </div>\n    \n            </div>\n    \n        </div>`);t.append(i);let a=i.find("input"),o=()=>{const t=new Set(["json","xml"]);let e=a.val();void 0===e||""===e?e=a.attr("placeholder"):!1===t.has(yn(e))&&(e+=".json");const n=r();if(n){const t=JSON.stringify(n,null,"\t");!function(t,e){const r=document.createElement("a");r.setAttribute("href",e),r.setAttribute("download",t),r.style.display="none",document.body.appendChild(r),r.click(),document.body.removeChild(r)}(e,URL.createObjectURL(new Blob([t],{type:"application/octet-stream"})))}i.modal("hide")};i.find(".modal-footer button:nth-child(2)").on("click",o),i.on("show.bs.modal",(t=>{a.val(e+"-session.json")})),a.on("keyup",(t=>{13===t.keyCode&&o()}))}(t,r,u,s)}class Ti{constructor(t){this.datasource=t.datasource,this.selectHandler=t.selectHandler,this.pageLength=t.pageLength||10,t.selectionStyle?this.select={style:t.selectionStyle}:this.select=!0;const e=t.id,r=t.title||"",n=t.parent?$(t.parent):$("body"),i=$(`\n        <div id="${e}" class="modal fade">\n        \n            <div class="modal-dialog modal-xl">\n        \n                <div class="modal-content">\n        \n                    <div class="modal-header">\n                        <div class="modal-title">${r}</div>\n                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">\n                            <span aria-hidden="true">&times;</span>\n                        </button>\n                    </div>\n        \n                    <div class="modal-body">\n        \n                        <div id="${e}-spinner" class="spinner-border" style="display: none;">\n                            \x3c!-- spinner --\x3e\n                        </div>\n        \n                        <div id="${e}-datatable-container">\n        \n                        </div>\n                    </div>\n        \n                    <div class="modal-footer">\n                        <button type="button" class="btn btn-sm btn-outline-secondary" data-dismiss="modal">Cancel</button>\n                        <button type="button" class="btn btn-sm btn-secondary" data-dismiss="modal">OK</button>\n                    </div>\n        \n                </div>\n        \n            </div>\n        \n        </div>\n    `);n.append(i),this.$modal=i,this.$datatableContainer=i.find(`#${e}-datatable-container`),this.$spinner=i.find(`#${e}-spinner`);const a=i.find(".modal-footer button:nth-child(2)");i.on("shown.bs.modal",(t=>{this.buildTable()})),i.on("hidden.bs.modal",(t=>{$(t.relatedTarget).find("tr.selected").removeClass("selected")})),a.on("click",(t=>{const e=this.getSelectedTableRowsData.call(this,this.$dataTable.$("tr.selected"));e&&this.selectHandler&&this.selectHandler(e)}))}remove(){this.$modal.remove()}setDatasource(t){this.datasource=t,this.$datatableContainer.empty(),this.$table=void 0}async buildTable(){if(!this.$table&&this.datasource){this.$table=$('<table class="display"></table>'),this.$datatableContainer.append(this.$table);try{this.startSpinner();const t=await this.datasource.tableData(),e={data:t,columns:(await this.datasource.tableColumns()).map((t=>({title:t,data:t}))),pageLength:this.pageLength,select:this.select,autoWidth:!1,paging:!0,scrollX:!0,scrollY:"400px"};this.datasource.columnDefs&&(e.columnDefs=this.datasource.columnDefs),this.api=this.$table.DataTable(e),this.api.columns.adjust().draw(),this.$dataTable=this.$table.dataTable(),this.tableData=t}catch(t){}finally{this.stopSpinner()}}}getSelectedTableRowsData(t){const e=this.tableData,r=[];if(t.length>0){t.removeClass("selected");const n=this.$table.api();return t.each((function(){const t=n.row(this).index();r.push(e[t])})),this.datasource.tableSelectionHandler(r)}}startSpinner(){this.$spinner&&this.$spinner.show()}stopSpinner(){this.$spinner&&this.$spinner.hide()}}var Ii=function(t){this.data=t,this.ptr=0};Ii.prototype.nextLine=function(){var t=this.ptr,e=this.data.indexOf("\n",t);return e>0?(this.ptr=e+1,e===t?void 0:this.data.substring(t,e).trim()):(this.ptr=this.data.length,t>=this.data.length?void 0:this.data.substring(t).trim())},Ii.prototype.nextLineNoTrim=function(){var t=this.ptr,e=this.data.indexOf("\n",t),r=this.data;if(e>0)return this.ptr=e+1,e>t&&"\r"===r.charAt(e-1)?r.substring(t,e-1):r.substring(t,e);var n=r.length;return this.ptr=n,t>=n?void 0:r.substring(t)};var Bi=function(t){this.data=t,this.length=this.data.length,this.ptr=0};Bi.prototype.nextLine=function(){var t,e;if(e="",!(this.ptr>=this.length)){for(var r=this.ptr;r<this.length;r++)if("\r"!==(t=String.fromCharCode(this.data[r]))){if("\n"===t)break;e+=t}return this.ptr=r+1,e}},Bi.prototype.nextLineNoTrim=Bi.prototype.nextLine;class Ai extends class{constructor(t){this.isJSON=t.isJSON||!1,t.genomeId&&(this.genomeId=t.genomeId),t.dataSetPathPrefix&&(this.dataSetPathPrefix=t.dataSetPathPrefix),t.urlPrefix&&(this.urlPrefix=t.urlPrefix),t.dataSetPath&&(this.path=t.dataSetPath),this.addIndexColumn=t.addIndexColumn||!1,this.columnDictionary={};for(let e of t.columns)this.columnDictionary[e]=e;if(t.hiddenColumns||t.titles){this.columnDefs=[];const e=Object.keys(this.columnDictionary);if(t.hiddenColumns)for(let r of t.hiddenColumns)this.columnDefs.push({visible:!1,searchable:!1,targets:e.indexOf(r)});if(t.titles)for(let[r,n]of Object.entries(t.titles))this.columnDefs.push({title:n,targets:e.indexOf(r)})}else this.columnDefs=void 0;t.parser&&(this.parser=t.parser),t.selectionHandler&&(this.selectionHandler=t.selectionHandler)}async tableColumns(){return Object.keys(this.columnDictionary)}async tableData(){let t=void 0;try{t=await fetch(this.path)}catch(t){return void console.error(t)}if(t){if(!0===this.isJSON){const e=await t.json();return this.parser(e,this.columnDictionary,this.addIndexColumn)}{const e=await t.text();return this.parser(e,this.columnDictionary,this.addIndexColumn)}}}tableSelectionHandler(t){return this.selectionHandler?this.selectionHandler(t):t}}{constructor(t){super(t),t.filter&&(this.filter=t.filter),this.suffix=t.suffix||".txt"}async tableData(){let t=void 0;try{const e=`${this.urlPrefix}${Mi(this.genomeId)}${this.suffix}`;t=await fetch(e)}catch(t){return void console.error(t)}if(t){const e=await t.text(),r=this.parseTabData(e,this.filter,this.columnDictionary);return r.sort(_i),r}}parseTabData(t,e,r){const n=function(t){return"string"==typeof t||t instanceof String?new Ii(t):new Bi(t)}(t);n.nextLine();const i=[];let a;const o=Object.keys(r);for(;a=n.nextLine();){const t={},r=a.split("\t");for(let e of o)t[e]=r[o.indexOf(e)];t.Experiment=t.ID.substr(13).replace("/",""),t.HREF=`${this.dataSetPathPrefix}${t.HREF}`,t.name=Oi(t),(void 0===e||e(t))&&i.push(t)}return i}static supportsGenome(t){const e=new Set(["ce10","ce11","dm3","dm6","GRCh38","hg19","mm9","mm10"]),r=Mi(t);return e.has(r)}}function Oi(t){let e=t.Biosample||"";return t.Target&&(e+=" "+t.Target),"chip-seq"!==t.AssayType.toLowerCase()&&(e+=" "+t.AssayType),e}function _i(t,e){var r,n,i,a,o,s;return r=t["Assay Type"],n=e["Assay Type"],i=t.Biosample,a=e.Biosample,o=t.Target,s=e.Target,r===n?i===a?o===s?0:o<s?-1:1:i<a?-1:1:r<n?-1:1}function Mi(t){switch(t){case"hg38":return"GRCh38";case"CRCh37":return"hg19";case"GRCm38":return"mm10";case"NCBI37":return"mm9";case"WBcel235":return"ce11";case"WS220":return"ce10";default:return t}}const zi=t=>({isJSON:!1,genomeId:t,suffix:".signals.txt",dataSetPathPrefix:"https://www.encodeproject.org",urlPrefix:"https://s3.amazonaws.com/igv.org.app/encode/",dataSetPath:void 0,addIndexColumn:!1,columns:["ID","Assembly","Biosample","AssayType","Target","BioRep","TechRep","OutputType","Format","Lab","HREF","Accession","Experiment"],titles:{AssayType:"Assay Type",OutputType:"Output Type",BioRep:"Bio Rep",TechRep:"Tech Rep"},hiddenColumns:["ID","Assembly","HREF"],parser:void 0,selectionHandler:t=>t.map((({name:t,HREF:e})=>({name:t,url:e})))}),Fi=t=>({isJSON:!1,genomeId:t,suffix:".other.txt",dataSetPathPrefix:"https://www.encodeproject.org",urlPrefix:"https://s3.amazonaws.com/igv.org.app/encode/",dataSetPath:void 0,addIndexColumn:!1,columns:["ID","Assembly","Biosample","AssayType","Target","BioRep","TechRep","OutputType","Format","Lab","HREF","Accession","Experiment"],titles:{AssayType:"Assay Type",OutputType:"Output Type",BioRep:"Bio Rep",TechRep:"Tech Rep"},hiddenColumns:["ID","Assembly","HREF"],parser:void 0,selectionHandler:t=>t.map((({name:t,HREF:e})=>({name:t,url:e})))});let Ui,Hi,Pi,Ni=[];function $i(t,e,r,n,i,a,o,s,l,c,u,f){!function(t,e,r,n,i,a,o,s){const l=$((t=>`<div id="${t}" class="modal">\n\n            <div class="modal-dialog modal-lg">\n    \n                <div class="modal-content">\n    \n                    <div class="modal-header">\n                        <div class="modal-title">Track URL</div>\n    \n                        <button type="button" class="close" data-dismiss="modal">\n                            <span>&times;</span>\n                        </button>\n    \n                    </div>\n    \n                    <div class="modal-body">\n                    </div>\n    \n                    <div class="modal-footer">\n                        <button type="button" class="btn btn-sm btn-outline-secondary" data-dismiss="modal">Cancel</button>\n                        <button type="button" class="btn btn-sm btn-secondary" data-dismiss="modal">OK</button>\n                    </div>\n    \n                </div>\n    \n            </div>\n\n        </div>`)(o));t.append(l);let c={widgetParent:l.find(".modal-body").get(0),dataTitle:"Track",indexTitle:"Index",mode:"url",fileLoadManager:new si,dataOnly:!1,doURL:!0};Ui=new ci(c),hi(Ui,l.get(0),(async t=>{const e=t.retrievePaths();return await Hi.loadPaths(e),!0})),n||i.parent().hide(),Hi=new Si({$localFileInput:e,$dropboxButton:r,$googleDriveButton:n?i:void 0,fileLoadHandler:s,multipleFileSelection:!0});for(let t of a){const e={id:t,title:"ENCODE",selectionStyle:"multi",pageLength:100,selectHandler:s};Ni.push(new Ti(e))}Pi={receiveEvent:async({data:t})=>{const{genomeID:e}=t;Ni[0].setDatasource(new Ai(zi(e))),Ni[1].setDatasource(new Ai(Fi(e)))}},Un.globalBus.subscribe("DidChangeGenome",Pi)}(t,r,n,i,a,o,s,f);const h=$(function(t,e){return`<div id="${t}" class="modal">\n\n                <div class="modal-dialog modal-lg">\n    \n                    <div class="modal-content">\n    \n                        <div class="modal-header">\n                            <div class="modal-title"></div>\n                            <button type="button" class="close" data-dismiss="modal">\n                                <span>&times;</span>\n                            </button>\n                        </div>\n            \n                        <div class="modal-body">\n                            <div class="form-group">\n                                <select id="${e}" class="form-control" multiple></select>\n                            </div>\n                            <div id="igv-widgets-generic-select-modal-footnotes"></div>\n                        </div>\n                        \n                        <div class="modal-footer">\n                            <button type="button" class="btn btn-sm btn-outline-secondary" data-dismiss="modal">Cancel</button>\n                            <button type="button" class="btn btn-sm btn-secondary" data-dismiss="modal">OK</button>\n                        </div>\n    \n                    </div>\n    \n                </div>\n\n            </div>`}(l,l+"-select"));t.append(h);const p=h.find("select");h.find(".modal-footer button:nth-child(1)").on("click",(()=>h.modal("hide")));const d=h.find(".modal-footer button:nth-child(2)"),g=()=>{const t=[];p.find("option:selected").each((function(){t.push($(this).data("track")),$(this).removeAttr("selected")})),t.length>0&&f(t),h.modal("hide")};d.on("click",g),h.get(0).addEventListener("keypress",(t=>{"Enter"===t.key&&g()})),Pi={receiveEvent:async({data:t})=>{const{genomeID:r}=t,n=Ai.supportsGenome(r);n&&(Ni[0].setDatasource(new Ai(zi(r))),Ni[1].setDatasource(new Ai(Fi(r)))),await async function(t,e,r,n,i,a,o){const s="genome_specific_",l=a.find(".dropdown-divider"),c="[id^="+s+"]";a.find(c).remove();const u=await async function(t,e){let r=void 0;try{r=await fetch(e)}catch(t){console.error(t)}let n=void 0;if(!r){const t=new Error("Error retrieving registry via getPathsWithTrackRegistryFile()");throw zn.present(t.message),t}n=await r.json();return n[t]}(t,i);if(void 0===u)return void console.warn("There are no tracks in the track registryy for genome "+t);let f=[];try{f=await Promise.all(u.map((t=>fetch(t))))}catch(t){zn.present(t.message)}let h=[];try{h=await Promise.all(f.map((t=>t.json())))}catch(t){zn.present(t.message)}let p=[];for(let r of h)if("ENCODE"===r.type){let e=0;for(let i of[zi(t),Fi(r.genomeID)])n[e++].setDatasource(new Ai(i));p.push(r)}else if("GTEX"===r.type){let t=void 0;try{t=await e.getTissueInfo(r.datasetId)}catch(t){zn.present(t.message)}t&&(r.tracks=t.tissueInfo.map((t=>e.trackConfiguration(t))),p.push(r))}else p.push(r);let d=[];for(let t of p)t.type&&"ENCODE"===t.type||d.unshift(t);r&&(ji(l,"ENCODE Other",s).on("click",(()=>n[1].$modal.modal("show"))),ji(l,"ENCODE Signals",s).on("click",(()=>n[0].$modal.modal("show"))));for(let t of d){ji(l,t.label,s).on("click",(()=>{Ki(o,t),o.modal("show")}))}}(r,c,n,Ni,u,e,h)}},Un.globalBus.subscribe("DidChangeGenome",Pi)}function ji(t,e,r){const n=$("<button>",{class:"dropdown-item",type:"button"});return n.text(e+" ..."),n.attr("id",`${r}${e.toLowerCase().split(" ").join("_")}`),n.insertAfter(t),n}function Ki(t,e){e.label;t.find(".modal-title").text(""+e.label);let r=t.find("select");r.empty(),e.tracks.reduce(((t,e)=>{const n=$("<option>",{value:e.name,text:e.name});return r.append(n),n.data("track",e),t.append(n),t}),r),e.description&&t.find("#igv-widgets-generic-select-modal-footnotes").html(e.description)}const Gi=()=>window.btoa('<svg width="75px" height="64px" viewBox="0 0 75 64" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n        <title>Shape</title>\n        <desc>Created with Sketch.</desc>\n        <defs></defs>\n        <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n            <g id="dropbox" fill="#0061FF" fill-rule="nonzero">\n                <path d="M37.6,12 L18.8,24 L37.6,36 L18.8,48 L1.42108547e-14,35.9 L18.8,23.9 L1.42108547e-14,12 L18.8,0 L37.6,12 Z M18.7,51.8 L37.5,39.8 L56.3,51.8 L37.5,63.8 L18.7,51.8 Z M37.6,35.9 L56.4,23.9 L37.6,12 L56.3,0 L75.1,12 L56.3,24 L75.1,36 L56.3,48 L37.6,35.9 Z" id="Shape"></path>\n            </g>\n        </g>\n    </svg>'),Zi=()=>window.btoa('<svg viewBox="0 0 139 120.4" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><radialGradient id="a" cx="-254.81979" cy="705.83588" gradientTransform="matrix(2.827 1.6322 -1.6322 2.827 2092.1199 -1494.5786)" gradientUnits="userSpaceOnUse" r="82.978401"><stop offset="0" stop-color="#4387fd"/><stop offset=".65" stop-color="#3078f0"/><stop offset=".9099" stop-color="#2b72ea"/><stop offset="1" stop-color="#286ee6"/></radialGradient><radialGradient id="b" cx="-254.8174" cy="705.83691" gradientTransform="matrix(2.827 1.6322 -1.6322 2.827 2092.1199 -1494.5786)" gradientUnits="userSpaceOnUse" r="82.973"><stop offset="0" stop-color="#ffd24d"/><stop offset="1" stop-color="#f6c338"/></radialGradient><path d="m24.2 120.4-24.2-41.9 45.3-78.5 24.2 41.9z" fill="#0da960"/><path d="m24.2 120.4 24.2-41.9h90.6l-24.2 41.9z" fill="url(#a)"/><path d="m139 78.5h-48.4l-45.3-78.5h48.4z" fill="url(#b)"/><path d="m69.5 78.5h-21.1l10.5-18.3-34.7 60.2z" fill="#2d6fdd"/><path d="m90.6 78.5h48.4l-58.9-18.3z" fill="#e5b93c"/><path d="m58.9 60.2 10.6-18.3-24.2-41.9z" fill="#0c9b57"/></svg>'),Vi=t=>`<div class="dropdown-item">\n                <div id="${t}" class="igv-app-dropdown-item-cloud-storage">\n                    <div>Dropbox File</div>\n                    <div>\n                        <img src="data:image/svg+xml;base64,${Gi()}" width="18" height="18">\n                    </div>\n                </div>\n            </div>`,Yi=t=>`<div class="dropdown-item">\n                <div id="${t}" class="igv-app-dropdown-item-cloud-storage">\n                    <div>Google Drive File</div>\n                    <div>\n                        <img src="data:image/svg+xml;base64,${Zi()}" width="18" height="18">\n                    </div>\n                </div>\n            </div>`;var qi,Wi={},Xi=Object.keys||function(t){return wt(t,yt)},Ji=o?Object.defineProperties:function(t,e){k(t);for(var r,n=Xi(e),i=n.length,a=0;i>a;)T.f(t,r=n[a++],e[r]);return t},Qi=V("IE_PROTO"),ta=function(){},ea=function(t){return"<script>"+t+"</"+"script>"},ra=function(){try{qi=document.domain&&new ActiveXObject("htmlfile")}catch(t){}var t,e;ra=qi?function(t){t.write(ea("")),t.close();var e=t.parentWindow.Object;return t=null,e}(qi):((e=E("iframe")).style.display="none",Ae.appendChild(e),e.src=String("javascript:"),(t=e.contentWindow.document).open(),t.write(ea("document.F=Object")),t.close(),t.F);for(var r=yt.length;r--;)delete ra.prototype[yt[r]];return ra()};Y[Qi]=!0;var na=Object.create||function(t,e){var r;return null!==t?(ta.prototype=k(t),r=new ta,ta.prototype=null,r[Qi]=t):r=ra(),void 0===e?r:Ji(r,e)},ia=$t("unscopables"),aa=Array.prototype;null==aa[ia]&&T.f(aa,ia,{configurable:!0,value:na(null)});var oa=function(t){aa[ia][t]=!0},sa=Vt.find,la="find",ca=!0,ua=Jt(la);la in[]&&Array(1).find((function(){ca=!1})),At({target:"Array",proto:!0,forced:ca||!ua},{find:function(t){return sa(this,t,arguments.length>1?arguments[1]:void 0)}}),oa(la);var fa,ha=T.f,pa=Function.prototype,da=pa.toString,ga=/^\s*function ([^ (]*)/,ma="name";function wa(t){var e=t.$igvMain,r=t.urlModalId,n=t.genomeFileLoad,i=$(Di(r,"Genome URL"));e.append(i);var a={widgetParent:i.find(".modal-body").get(0),dataTitle:"Genome",indexTitle:"Index",mode:"url",fileLoadManager:new si,dataOnly:!1,doURL:!0};fa=new ci(a),pi.configureModal(fa,i.get(0),function(){var t=tn(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.loadPaths(e.retrievePaths());case 2:return t.abrupt("return",!0);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}function ya(t,e,r){return ba.apply(this,arguments)}function ba(){return(ba=tn(regeneratorRuntime.mark((function t(e,r,n){var i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,va(r);case 3:(i=t.sent)&&Ea({browser:e,genomeDictionary:i,$dropdown_menu:n}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),zn.present(t.t0.message);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))).apply(this,arguments)}function va(t){return Sa.apply(this,arguments)}function Sa(){return(Sa=tn(regeneratorRuntime.mark((function t(e){var r,n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(void 0!==e){t.next=2;break}return t.abrupt("return",void 0);case 2:if(!Array.isArray(e)){t.next=6;break}return t.abrupt("return",Ra(e));case 6:return r=void 0,t.prev=7,t.next=10,fetch(e);case 10:r=t.sent,t.next=16;break;case 13:t.prev=13,t.t0=t.catch(7),zn.present(t.t0.message);case 16:if(!r){t.next=21;break}return t.next=19,r.json();case 19:return n=t.sent,t.abrupt("return",Ra(n));case 21:case"end":return t.stop()}}),t,null,[[7,13]])})))).apply(this,arguments)}function Ra(t){var e={};if(!0===Array.isArray(t)){var r,n=rn(t);try{for(n.s();!(r=n.n()).done;){var i=r.value;e[i.id]=i}}catch(t){n.e(t)}finally{n.f()}}else e[t.id]=t;return e}function Ea(t){var e=t.browser,r=t.genomeDictionary,n=t.$dropdown_menu.find(".dropdown-divider");for(var i in n.prevAll().remove(),r)r.hasOwnProperty(i)&&function(){var t=a(r[i].name);t.insertBefore(n),t.data("id",i);var o="click.genome-dropdown.".concat(i);t.on(o,tn(regeneratorRuntime.mark((function n(){var i;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if((i=t.data("id"))===e.genome.id){n.next=4;break}return n.next=4,Ca(r[i]);case 4:case"end":return n.stop()}}),n)}))))}();function a(t){var e=$("<button>",{class:"dropdown-item",type:"button"});return e.text(t),e}}function xa(t){var e,r={localFileInput:document.getElementById("igv-app-dropdown-local-genome-file-input"),dropboxButton:document.getElementById("igv-app-dropdown-dropbox-genome-file-button"),googleEnabled:t,googleDriveButton:document.getElementById("igv-app-dropdown-google-drive-genome-file-button"),loadHandler:(e=tn(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Ca(e);case 2:case"end":return t.stop()}}),t)}))),function(t){return e.apply(this,arguments)}),igvxhr:igv.xhr},n=new bi(r);return{$igvMain:$("#igv-main"),urlModalId:"igv-app-genome-from-url-modal",genomeFileLoad:n}}function Ca(t){return Da.apply(this,arguments)}function Da(){return(Da=tn(regeneratorRuntime.mark((function t(e){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=void 0,t.prev=1,t.next=4,Wi.browser.loadGenome(e);case 4:r=t.sent,t.next=10;break;case 7:t.prev=7,t.t0=t.catch(1),zn.present(t.t0.message);case 10:r&&Un.globalBus.post({type:"DidChangeGenome",data:{genomeID:r.id}});case 11:case"end":return t.stop()}}),t,null,[[1,7]])})))).apply(this,arguments)}o&&!(ma in pa)&&ha(pa,ma,{configurable:!0,get:function(){try{return da.call(this).match(ga)[1]}catch(t){return""}}});var ka=gt.indexOf,La=[].indexOf,Ta=!!La&&1/[1].indexOf(1,-0)<0,Ia=Yt("indexOf"),Ba=Jt("indexOf",{ACCESSORS:!0,1:0});At({target:"Array",proto:!0,forced:Ta||!Ia||!Ba},{indexOf:function(t){return Ta?La.apply(this,arguments)||0:ka(this,t,arguments.length>1?arguments[1]:void 0)}});var Aa=Math.min,Oa=[].lastIndexOf,_a=!!Oa&&1/[1].lastIndexOf(1,-0)<0,Ma=Yt("lastIndexOf"),za=Jt("indexOf",{ACCESSORS:!0,1:0}),Fa=_a||!Ma||!za?function(t){if(_a)return Oa.apply(this,arguments)||0;var e=m(this),r=ut(e.length),n=r-1;for(arguments.length>1&&(n=Aa(n,lt(arguments[1]))),n<0&&(n=r+n);n>=0;n--)if(n in e&&e[n]===t)return n||0;return-1}:Oa;At({target:"Array",proto:!0,forced:Fa!==[].lastIndexOf},{lastIndexOf:Fa});var Ua=function(t,e,r){var n=y(e);n in t?T.f(t,n,u(0,r)):t[n]=r},Ha=$t("species"),Pa=function(t){return Cr>=51||!a((function(){var e=[];return(e.constructor={})[Ha]=function(){return{foo:1}},1!==e[t](Boolean).foo}))},Na=Pa("slice"),$a=Jt("slice",{ACCESSORS:!0,0:0,1:2}),ja=$t("species"),Ka=[].slice,Ga=Math.max;At({target:"Array",proto:!0,forced:!Na||!$a},{slice:function(t,e){var r,n,i,a=m(this),o=ut(a.length),s=pt(t,o),l=pt(void 0===e?o:e,o);if(zt(a)&&("function"!=typeof(r=a.constructor)||r!==Array&&!zt(r.prototype)?w(r)&&null===(r=r[ja])&&(r=void 0):r=void 0,r===Array||void 0===r))return Ka.call(a,s,l);for(n=new(void 0===r?Array:r)(Ga(l-s,0)),i=0;s<l;s++,i++)s in a&&Ua(n,i,a[s]);return n.length=i,n}});var Za=$t("isConcatSpreadable"),Va=9007199254740991,Ya="Maximum allowed index exceeded",qa=Cr>=51||!a((function(){var t=[];return t[Za]=!1,t.concat()[0]!==t})),Wa=Pa("concat"),Xa=function(t){if(!w(t))return!1;var e=t[Za];return void 0!==e?!!e:zt(t)};At({target:"Array",proto:!0,forced:!qa||!Wa},{concat:function(t){var e,r,n,i,a,o=Mt(this),s=Kt(o,0),l=0;for(e=-1,n=arguments.length;e<n;e++)if(Xa(a=-1===e?o:arguments[e])){if(l+(i=ut(a.length))>Va)throw TypeError(Ya);for(r=0;r<i;r++,l++)r in a&&Ua(s,l,a[r])}else{if(l>=Va)throw TypeError(Ya);Ua(s,l++,a)}return s.length=l,s}});var Ja=function(){var t=k(this),e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.dotAll&&(e+="s"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e};function Qa(t,e){return RegExp(t,e)}var to,eo,ro={UNSUPPORTED_Y:a((function(){var t=Qa("a","y");return t.lastIndex=2,null!=t.exec("abcd")})),BROKEN_CARET:a((function(){var t=Qa("^r","gy");return t.lastIndex=2,null!=t.exec("str")}))},no=RegExp.prototype.exec,io=String.prototype.replace,ao=no,oo=(to=/a/,eo=/b*/g,no.call(to,"a"),no.call(eo,"a"),0!==to.lastIndex||0!==eo.lastIndex),so=ro.UNSUPPORTED_Y||ro.BROKEN_CARET,lo=void 0!==/()??/.exec("")[1];(oo||lo||so)&&(ao=function(t){var e,r,n,i,a=this,o=so&&a.sticky,s=Ja.call(a),l=a.source,c=0,u=t;return o&&(-1===(s=s.replace("y","")).indexOf("g")&&(s+="g"),u=String(t).slice(a.lastIndex),a.lastIndex>0&&(!a.multiline||a.multiline&&"\n"!==t[a.lastIndex-1])&&(l="(?: "+l+")",u=" "+u,c++),r=new RegExp("^(?:"+l+")",s)),lo&&(r=new RegExp("^"+l+"$(?!\\s)",s)),oo&&(e=a.lastIndex),n=no.call(o?r:a,u),o?n?(n.input=n.input.slice(c),n[0]=n[0].slice(c),n.index=a.lastIndex,a.lastIndex+=n[0].length):a.lastIndex=0:oo&&n&&(a.lastIndex=a.global?n.index+n[0].length:e),lo&&n&&n.length>1&&io.call(n[0],r,(function(){for(i=1;i<arguments.length-2;i++)void 0===arguments[i]&&(n[i]=void 0)})),n});var co=ao;At({target:"RegExp",proto:!0,forced:/./.exec!==co},{exec:co});var uo=$t("species"),fo=!a((function(){var t=/./;return t.exec=function(){var t=[];return t.groups={a:"7"},t},"7"!=="".replace(t,"$<a>")})),ho="$0"==="a".replace(/./,"$0"),po=$t("replace"),go=!!/./[po]&&""===/./[po]("a","$0"),mo=!a((function(){var t=/(?:)/,e=t.exec;t.exec=function(){return e.apply(this,arguments)};var r="ab".split(t);return 2!==r.length||"a"!==r[0]||"b"!==r[1]})),wo=function(t){return function(e,r){var n,i,a=String(g(e)),o=lt(r),s=a.length;return o<0||o>=s?t?"":void 0:(n=a.charCodeAt(o))<55296||n>56319||o+1===s||(i=a.charCodeAt(o+1))<56320||i>57343?t?a.charAt(o):n:t?a.slice(o,o+2):i-56320+(n-55296<<10)+65536}},yo={codeAt:wo(!1),charAt:wo(!0)},bo=yo.charAt,vo=function(t,e,r){return e+(r?bo(t,e).length:1)},So=function(t,e){var r=t.exec;if("function"==typeof r){var n=r.call(t,e);if("object"!=typeof n)throw TypeError("RegExp exec method returned something other than an Object or null");return n}if("RegExp"!==h(t))throw TypeError("RegExp#exec called on incompatible receiver");return co.call(t,e)},Ro=Math.max,Eo=Math.min,xo=Math.floor,Co=/\$([$&'`]|\d\d?|<[^>]*>)/g,Do=/\$([$&'`]|\d\d?)/g;!function(t,e,r,n){var i=$t(t),o=!a((function(){var e={};return e[i]=function(){return 7},7!=""[t](e)})),s=o&&!a((function(){var e=!1,r=/a/;return"split"===t&&((r={}).constructor={},r.constructor[uo]=function(){return r},r.flags="",r[i]=/./[i]),r.exec=function(){return e=!0,null},r[i](""),!e}));if(!o||!s||"replace"===t&&(!fo||!ho||go)||"split"===t&&!mo){var l=/./[i],c=r(i,""[t],(function(t,e,r,n,i){return e.exec===co?o&&!i?{done:!0,value:l.call(e,r,n)}:{done:!0,value:t.call(r,e,n)}:{done:!1}}),{REPLACE_KEEPS_$0:ho,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:go}),u=c[0],f=c[1];rt(String.prototype,t,u),rt(RegExp.prototype,i,2==e?function(t,e){return f.call(t,this,e)}:function(t){return f.call(t,this)})}n&&I(RegExp.prototype[i],"sham",!0)}("replace",2,(function(t,e,r,n){var i=n.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,a=n.REPLACE_KEEPS_$0,o=i?"$":"$0";return[function(r,n){var i=g(this),a=null==r?void 0:r[t];return void 0!==a?a.call(r,i,n):e.call(String(i),r,n)},function(t,n){if(!i&&a||"string"==typeof n&&-1===n.indexOf(o)){var l=r(e,t,this,n);if(l.done)return l.value}var c=k(t),u=String(this),f="function"==typeof n;f||(n=String(n));var h=c.global;if(h){var p=c.unicode;c.lastIndex=0}for(var d=[];;){var g=So(c,u);if(null===g)break;if(d.push(g),!h)break;""===String(g[0])&&(c.lastIndex=vo(u,ut(c.lastIndex),p))}for(var m,w="",y=0,b=0;b<d.length;b++){g=d[b];for(var v=String(g[0]),S=Ro(Eo(lt(g.index),u.length),0),R=[],E=1;E<g.length;E++)R.push(void 0===(m=g[E])?m:String(m));var x=g.groups;if(f){var C=[v].concat(R,S,u);void 0!==x&&C.push(x);var D=String(n.apply(void 0,C))}else D=s(v,u,S,R,x,n);S>=y&&(w+=u.slice(y,S)+D,y=S+v.length)}return w+u.slice(y)}];function s(t,r,n,i,a,o){var s=n+t.length,l=i.length,c=Do;return void 0!==a&&(a=Mt(a),c=Co),e.call(o,c,(function(e,o){var c;switch(o.charAt(0)){case"$":return"$";case"&":return t;case"`":return r.slice(0,n);case"'":return r.slice(s);case"<":c=a[o.slice(1,-1)];break;default:var u=+o;if(0===u)return e;if(u>l){var f=xo(u/10);return 0===f?e:f<=l?void 0===i[f-1]?o.charAt(1):i[f-1]+o.charAt(1):e}c=i[u-1]}return void 0===c?"":c}))}}));var ko,Lo,To=$t("match"),Io=function(t){if(function(t){var e;return w(t)&&(void 0!==(e=t[To])?!!e:"RegExp"==h(t))}(t))throw TypeError("The method doesn't accept regular expressions");return t},Bo=$t("match"),Ao=D.f,Oo="".startsWith,_o=Math.min,Mo=function(t){var e=/./;try{"/./"[t](e)}catch(r){try{return e[Bo]=!1,"/./"[t](e)}catch(t){}}return!1}("startsWith"),zo=!(Mo||(ko=Ao(String.prototype,"startsWith"),!ko||ko.writable));function Fo(t){var e,r,n,i;return"function"==typeof t?e=t:t.provider?"tinyURL"===t.provider?(i=(i=t.endpoint)||"https://2et6uxfezb.execute-api.us-east-1.amazonaws.com/dev/tinyurl/",e=function(){var t=tn(regeneratorRuntime.mark((function t(e){var r,n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=encodeURIComponent(e),t.next=3,fetch("".concat(i).concat(r));case 3:if(!(n=t.sent).ok){t.next=8;break}return t.abrupt("return",n.text());case 8:throw new Error(n.statusText);case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()):"bitly"===t.provider&&t.apiKey?e=(n=t.apiKey)&&"BITLY_TOKEN"!==n?function(){var t=tn(regeneratorRuntime.mark((function t(e){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.startsWith("http://localhost")&&(e=e.replace("localhost","192.168.1.11")),r="https://api-ssl.bitly.com/v3/shorten?access_token="+n+"&longUrl="+encodeURIComponent(e),t.abrupt("return",igv.xhr.loadJson(r,{}).then((function(t){return t.data.url})));case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}():void 0:"google"===t.provider&&t.apiKey?e=(r=t.apiKey)&&"API_KEY"!==r?function(){var t=tn(regeneratorRuntime.mark((function t(e){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n="https://www.googleapis.com/urlshortener/v1/url?key="+r,t.abrupt("return",igv.xhr.loadJson(n,{sendData:JSON.stringify({longUrl:e}),contentType:"application/json"}).then((function(t){return t.id})));case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}():void 0:zn.present("Unknown URL shortener provider: ".concat(t.provider)):zn.present("URL shortener object must either be an object specifying a provider and apiKey, or a function"),e&&(Lo={shortenURL:e}),e}function Uo(t,e){return function(t){return Lo?Lo.shortenURL(t):Promise.resolve(t)}(t+"?sessionURL=blob:"+e)}function Ho(t){var e=t.browser,r=t.$container,n=t.$modal,i=t.$share_input,a=t.$copy_link_button,o=t.$tweet_button_container,s=t.$email_button,l=t.$qrcode_button,c=t.$qrcode_image,u=t.$embed_container,f=t.$embed_button,h=t.embedTarget;void 0===h&&(h=function(){var t=window.location.href.slice(),e=t.indexOf("?");e>0&&(t=t.substring(0,e));return e=t.lastIndexOf("/"),t.substring(0,e)+"/embed.html"}()),n.on("shown.bs.modal",function(){var t=tn(regeneratorRuntime.mark((function t(a){var l,f,p,d,g,m,w;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:l=window.location.href.slice(),(f=l.indexOf("?"))>0&&(l=l.substring(0,f)),p=void 0;try{p=e.compressedSession()}catch(t){zn.present(t.message)}if(!p){t.next=20;break}return h&&(d=Po(r,h,p),u.find("textarea").val(d),u.find("textarea").get(0).select()),t.next=9,Uo(l,p);case 9:g=t.sent,i.val(g),i.get(0).select(),s.attr("href","mailto:?body="+g),c.empty(),m={width:128,height:128,correctLevel:oi.CorrectLevel.H},new oi(c.get(0),m).makeCode(g),o&&(o.empty(),w={text:""},window.twttr.widgets.createShareButton(g,o.get(0),w)),t.next=21;break;case 20:n.modal("hide");case 21:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),n.on("hidden.bs.modal",(function(t){u.hide(),c.hide()})),a.on("click",(function(t){i.get(0).select(),document.execCommand("copy")&&n.modal("hide")})),void 0===h?f.hide():(u.find("button").on("click",(function(t){u.find("textarea").get(0).select(),document.execCommand("copy")&&n.modal("hide")})),f.on("click",(function(t){c.hide(),u.toggle()}))),l.on("click",(function(t){u.hide(),c.toggle()}))}function Po(t,e,r){return'<iframe src="'+(e+"?sessionURL=blob:"+r)+'" style="width:100%; height:'+(t.height()+50)+'px"  allowfullscreen></iframe>'}function No(t,e,r){var n,i=r.urlShortener,a=r.embedTarget;i&&(n=void 0!==Fo(i));var o=$("#igv-app-tweet-button-container");return n||o.hide(),{browser:t,$container:e,$modal:$("#igv-app-share-modal"),$share_input:$("#igv-app-share-input"),$copy_link_button:$("#igv-app-copy-link-button"),$tweet_button_container:n?o:void 0,$email_button:$("#igv-app-email-button"),$qrcode_button:$("#igv-app-qrcode-button"),$qrcode_image:$("#igv-app-qrcode-image"),$embed_container:$("#igv-app-embed-container"),$embed_button:$("#igv-app-embed-button"),embedTarget:a}}At({target:"String",proto:!0,forced:!zo&&!Mo},{startsWith:function(t){var e=String(g(this));Io(t);var r=ut(_o(arguments.length>1?arguments[1]:void 0,e.length)),n=String(t);return Oo?Oo.call(e,n,r):e.slice(r,r+n.length)===n}});var $o,jo,Ko,Go=!a((function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype})),Zo=V("IE_PROTO"),Vo=Object.prototype,Yo=Go?Object.getPrototypeOf:function(t){return t=Mt(t),v(t,Zo)?t[Zo]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?Vo:null},qo=$t("iterator"),Wo=!1;[].keys&&("next"in(Ko=[].keys())?(jo=Yo(Yo(Ko)))!==Object.prototype&&($o=jo):Wo=!0),null==$o&&($o={}),v($o,qo)||I($o,qo,(function(){return this}));var Xo={IteratorPrototype:$o,BUGGY_SAFARI_ITERATORS:Wo},Jo=Xo.IteratorPrototype,Qo=function(){return this},ts=Object.setPrototypeOf||("__proto__"in{}?function(){var t,e=!1,r={};try{(t=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(r,[]),e=r instanceof Array}catch(t){}return function(r,n){return k(r),function(t){if(!w(t)&&null!==t)throw TypeError("Can't set "+String(t)+" as a prototype")}(n),e?t.call(r,n):r.__proto__=n,r}}():void 0),es=Xo.IteratorPrototype,rs=Xo.BUGGY_SAFARI_ITERATORS,ns=$t("iterator"),is="keys",as="values",os="entries",ss=function(){return this},ls=function(t,e,r,n,i,a,o){!function(t,e,r){var n=e+" Iterator";t.prototype=na(Jo,{next:u(1,r)}),pe(t,n,!1),we[n]=Qo}(r,e,n);var s,l,c,f=function(t){if(t===i&&m)return m;if(!rs&&t in d)return d[t];switch(t){case is:case as:case os:return function(){return new r(this,t)}}return function(){return new r(this)}},h=e+" Iterator",p=!1,d=t.prototype,g=d[ns]||d["@@iterator"]||i&&d[i],m=!rs&&g||f(i),w="Array"==e&&d.entries||g;if(w&&(s=Yo(w.call(new t)),es!==Object.prototype&&s.next&&(Yo(s)!==es&&(ts?ts(s,es):"function"!=typeof s[ns]&&I(s,ns,ss)),pe(s,h,!0))),i==as&&g&&g.name!==as&&(p=!0,m=function(){return g.call(this)}),d[ns]!==m&&I(d,ns,m),we[e]=m,i)if(l={values:f(as),keys:a?m:f(is),entries:f(os)},o)for(c in l)(rs||p||!(c in d))&&rt(d,c,l[c]);else At({target:e,proto:!0,forced:rs||p},l);return l},cs="Array Iterator",us=et.set,fs=et.getterFor(cs),hs=ls(Array,"Array",(function(t,e){us(this,{type:cs,target:m(t),index:0,kind:e})}),(function(){var t=fs(this),e=t.target,r=t.kind,n=t.index++;return!e||n>=e.length?(t.target=void 0,{value:void 0,done:!0}):"keys"==r?{value:n,done:!1}:"values"==r?{value:e[n],done:!1}:{value:[n,e[n]],done:!1}}),"values");we.Arguments=we.Array,oa("keys"),oa("values"),oa("entries");var ps=!a((function(){return Object.isExtensible(Object.preventExtensions({}))})),ds=r((function(t){var e=T.f,r=G("meta"),n=0,i=Object.isExtensible||function(){return!0},a=function(t){e(t,r,{value:{objectID:"O"+ ++n,weakData:{}}})},o=t.exports={REQUIRED:!1,fastKey:function(t,e){if(!w(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!v(t,r)){if(!i(t))return"F";if(!e)return"E";a(t)}return t[r].objectID},getWeakData:function(t,e){if(!v(t,r)){if(!i(t))return!0;if(!e)return!1;a(t)}return t[r].weakData},onFreeze:function(t){return ps&&o.REQUIRED&&i(t)&&!v(t,r)&&a(t),t}};Y[r]=!0})),gs=(ds.REQUIRED,ds.fastKey,ds.getWeakData,ds.onFreeze,T.f),ms=ds.fastKey,ws=et.set,ys=et.getterFor,bs=(function(t,e,r){var n=-1!==t.indexOf("Map"),o=-1!==t.indexOf("Weak"),s=n?"set":"add",l=i[t],c=l&&l.prototype,u=l,f={},h=function(t){var e=c[t];rt(c,t,"add"==t?function(t){return e.call(this,0===t?0:t),this}:"delete"==t?function(t){return!(o&&!w(t))&&e.call(this,0===t?0:t)}:"get"==t?function(t){return o&&!w(t)?void 0:e.call(this,0===t?0:t)}:"has"==t?function(t){return!(o&&!w(t))&&e.call(this,0===t?0:t)}:function(t,r){return e.call(this,0===t?0:t,r),this})};if(It(t,"function"!=typeof l||!(o||c.forEach&&!a((function(){(new l).entries().next()})))))u=r.getConstructor(e,t,n,s),ds.REQUIRED=!0;else if(It(t,!0)){var p=new u,d=p[s](o?{}:-0,1)!=p,g=a((function(){p.has(1)})),m=Ie((function(t){new l(t)})),y=!o&&a((function(){for(var t=new l,e=5;e--;)t[s](e,e);return!t.has(-0)}));m||((u=e((function(e,r){me(e,u,t);var i=function(t,e,r){var n,i;return ts&&"function"==typeof(n=e.constructor)&&n!==r&&w(i=n.prototype)&&i!==r.prototype&&ts(t,i),t}(new l,e,u);return null!=r&&Re(r,i[s],i,n),i}))).prototype=c,c.constructor=u),(g||y)&&(h("delete"),h("has"),n&&h("get")),(y||d)&&h(s),o&&c.clear&&delete c.clear}f[t]=u,At({global:!0,forced:u!=l},f),pe(u,t),o||r.setStrong(u,t,n)}("Set",(function(t){return function(){return t(this,arguments.length?arguments[0]:void 0)}}),{getConstructor:function(t,e,r,n){var i=t((function(t,a){me(t,i,e),ws(t,{type:e,index:na(null),first:void 0,last:void 0,size:0}),o||(t.size=0),null!=a&&Re(a,t[n],t,r)})),a=ys(e),s=function(t,e,r){var n,i,s=a(t),c=l(t,e);return c?c.value=r:(s.last=c={index:i=ms(e,!0),key:e,value:r,previous:n=s.last,next:void 0,removed:!1},s.first||(s.first=c),n&&(n.next=c),o?s.size++:t.size++,"F"!==i&&(s.index[i]=c)),t},l=function(t,e){var r,n=a(t),i=ms(e);if("F"!==i)return n.index[i];for(r=n.first;r;r=r.next)if(r.key==e)return r};return ue(i.prototype,{clear:function(){for(var t=a(this),e=t.index,r=t.first;r;)r.removed=!0,r.previous&&(r.previous=r.previous.next=void 0),delete e[r.index],r=r.next;t.first=t.last=void 0,o?t.size=0:this.size=0},delete:function(t){var e=this,r=a(e),n=l(e,t);if(n){var i=n.next,s=n.previous;delete r.index[n.index],n.removed=!0,s&&(s.next=i),i&&(i.previous=s),r.first==n&&(r.first=i),r.last==n&&(r.last=s),o?r.size--:e.size--}return!!n},forEach:function(t){for(var e,r=a(this),n=_t(t,arguments.length>1?arguments[1]:void 0,3);e=e?e.next:r.first;)for(n(e.value,e.key,this);e&&e.removed;)e=e.previous},has:function(t){return!!l(this,t)}}),ue(i.prototype,r?{get:function(t){var e=l(this,t);return e&&e.value},set:function(t,e){return s(this,0===t?0:t,e)}}:{add:function(t){return s(this,t=0===t?0:t,t)}}),o&&gs(i.prototype,"size",{get:function(){return a(this).size}}),i},setStrong:function(t,e,r){var n=e+" Iterator",i=ys(e),a=ys(n);ls(t,e,(function(t,e){ws(this,{type:n,target:t,state:i(t),kind:e,last:void 0})}),(function(){for(var t=a(this),e=t.kind,r=t.last;r&&r.removed;)r=r.previous;return t.target&&(t.last=r=r?r.next:t.state.first)?"keys"==e?{value:r.key,done:!1}:"values"==e?{value:r.value,done:!1}:{value:[r.key,r.value],done:!1}:(t.target=void 0,{value:void 0,done:!0})}),r?"entries":"values",!r,!0),ge(e)}}),yo.charAt),vs="String Iterator",Ss=et.set,Rs=et.getterFor(vs);ls(String,"String",(function(t){Ss(this,{type:vs,string:String(t),index:0})}),(function(){var t,e=Rs(this),r=e.string,n=e.index;return n>=r.length?{value:void 0,done:!0}:(t=bs(r,n),e.index+=t.length,{value:t,done:!1})}));var Es={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0},xs=$t("iterator"),Cs=$t("toStringTag"),Ds=hs.values;for(var ks in Es){var Ls=i[ks],Ts=Ls&&Ls.prototype;if(Ts){if(Ts[xs]!==Ds)try{I(Ts,xs,Ds)}catch(t){Ts[xs]=Ds}if(Ts[Cs]||I(Ts,Cs,ks),Es[ks])for(var Is in hs)if(Ts[Is]!==hs[Is])try{I(Ts,Is,hs[Is])}catch(t){Ts[Is]=hs[Is]}}}function Bs(t){var e=t.browser,r=t.$saveModal,n="igv-app.svg",i=r.find("input");r.on("show.bs.modal",(function(t){i.val(n)})),r.on("hidden.bs.modal",(function(t){i.val(n)}));var a=function(){var t=i.val(),n=new Set(["svg"]);void 0===t||""===t?t=i.attr("placeholder"):!1===n.has(igv.getExtension({url:t}))&&(t+=".svg"),r.modal("hide"),e.saveSVGtoFile({filename:t})};r.find(".modal-footer button:nth-child(2)").on("click",a),i.on("keyup",(function(t){13===t.keyCode&&a()}));var o=r.find(".modal-header button:nth-child(1)");o.on("click",(function(){r.modal("hide")})),(o=r.find(".modal-footer button:nth-child(1)")).on("click",(function(){r.modal("hide")}))}$(document).ready(tn(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",Os($("#igv-app-container"),igvwebConfig));case 1:case"end":return t.stop()}}),t)}))));var As=!1;function Os(t,e){return _s.apply(this,arguments)}function _s(){return(_s=tn(regeneratorRuntime.mark((function t(e,r){var n,i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(zn.init(e.get(0)),$("#igv-app-version").text("IGV-Web app version ".concat("1.3.0")),$("#igv-igvjs-version").text("igv.js version ".concat(igv.version())),!((r.clientId||r.apiKey)&&("https:"===window.location.protocol||"localhost"===window.location.host))){t.next=15;break}return t.prev=5,t.next=8,ln({client_id:r.clientId,apiKey:r.apiKey,scope:"https://www.googleapis.com/auth/userinfo.profile"});case 8:As=!0,t.next=15;break;case 11:t.prev=11,t.t0=t.catch(5),console.error(t.t0),zn.present(t.t0.message);case 15:if(!r.genomes){t.next=21;break}return t.next=18,Us(r.genomes);case 18:n=t.sent,r.genomes=n,r.igvConfig.genomes=n;case 21:return t.next=23,igv.createBrowser(e.get(0),r.igvConfig);case 23:if(!(i=t.sent)){t.next=28;break}return Wi.browser=i,t.next=28,Ms(i,e,r);case 28:case"end":return t.stop()}}),t,null,[[5,11]])})))).apply(this,arguments)}function Ms(t,e,r){return zs.apply(this,arguments)}function zs(){return(zs=tn(regeneratorRuntime.mark((function t(e,r,n){var i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return["track","genome"].forEach((function(t){document.querySelector("img#igv-app-".concat(t,"-dropbox-button-image")).src="data:image/svg+xml;base64,".concat(Gi()),document.querySelector("img#igv-app-".concat(t,"-google-drive-button-image")).src="data:image/svg+xml;base64,".concat(Zi())})),$("div#igv-session-dropdown-menu > :nth-child(1)").after(Vi("igv-app-dropdown-dropbox-session-file-button")),$("div#igv-session-dropdown-menu > :nth-child(2)").after(Yi("igv-app-dropdown-google-drive-session-file-button")),wa(xa(As)),t.next=6,ya(e,n.genomes,$("#igv-app-genome-dropdown-menu"));case 6:$i(i=$("#igv-main"),$("#igv-app-track-dropdown-menu"),$("#igv-app-dropdown-local-track-file-input"),$("#igv-app-dropdown-dropbox-track-file-button"),As,$("#igv-app-dropdown-google-drive-track-file-button"),["igv-app-encode-signal-modal","igv-app-encode-others-modal"],"igv-app-track-from-url-modal","igv-app-track-select-modal",igv.GtexUtils,n.trackRegistryFile,function(){var t=tn(regeneratorRuntime.mark((function t(r){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.loadTrackList(r);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),$("#igv-app-session-save-button").on("click",(function(){var t=void 0;try{t=e.toJSON()}catch(t){zn.present(t.message)}t&&$("#igv-app-session-save-modal").modal("show")})),Li(i,igv.xhr,"igv-webapp","igv-app-dropdown-local-session-file-input","igv-app-dropdown-dropbox-session-file-button","igv-app-dropdown-google-drive-session-file-button","igv-app-session-url-modal","igv-app-session-save-modal",As,function(){var t=tn(regeneratorRuntime.mark((function t(r){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.loadSession(r);case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),(function(){return e.toJSON()})),Bs({browser:e,$saveModal:$("#igv-app-svg-save-modal")}),Ho(No(e,r,n)),Fs($("#igv-app-bookmark-button")),Un.globalBus.post({type:"DidChangeGenome",data:{genomeID:e.genome.id}});case 14:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function Fs(t){t.on("click",(function(t){var e=void 0;try{e=function(){var t,e;return((e=(t=window.location.href.slice()).indexOf("?"))>0?t.substring(0,e):t)+"?sessionURL=blob:"+Wi.browser.compressedSession()}()}catch(t){zn.present(t.message)}if(e){window.history.pushState({},"IGV",e);var r=/Mac/i.test(navigator.userAgent)?"Cmd":"Ctrl";alert("A bookmark URL has been created. Press "+r+"+D to save.")}}))}function Us(t){return Hs.apply(this,arguments)}function Hs(){return(Hs=tn(regeneratorRuntime.mark((function t(e){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(void 0!==e){t.next=2;break}return t.abrupt("return",void 0);case 2:if(!Array.isArray(e)){t.next=6;break}return t.abrupt("return",e);case 6:return r=void 0,t.prev=7,t.next=10,fetch(e);case 10:return r=t.sent,t.abrupt("return",r.json());case 14:t.prev=14,t.t0=t.catch(7),zn.present(t.t0.message);case 17:case"end":return t.stop()}}),t,null,[[7,14]])})))).apply(this,arguments)}t.main=Os,Object.defineProperty(t,"__esModule",{value:!0})}));
//# sourceMappingURL=app_bundle-1.3.0.min.js.map
